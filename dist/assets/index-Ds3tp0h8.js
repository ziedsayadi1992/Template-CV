var vM=Object.defineProperty;var uA=n=>{throw TypeError(n)};var wM=(n,t,e)=>t in n?vM(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var O=(n,t,e)=>wM(n,typeof t!="symbol"?t+"":t,e),O0=(n,t,e)=>t.has(n)||uA("Cannot "+e);var a=(n,t,e)=>(O0(n,t,"read from private field"),e?e.call(n):t.get(n)),x=(n,t,e)=>t.has(n)?uA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),g=(n,t,e,i)=>(O0(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),A=(n,t,e)=>(O0(n,t,"access private method"),e);var Ce=(n,t,e,i)=>({set _(s){g(n,t,s,e)},get _(){return a(n,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();var bM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xM(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hE={exports:{}},d0={},dE={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=Symbol.for("react.element"),AM=Symbol.for("react.portal"),SM=Symbol.for("react.fragment"),CM=Symbol.for("react.strict_mode"),EM=Symbol.for("react.profiler"),TM=Symbol.for("react.provider"),kM=Symbol.for("react.context"),_M=Symbol.for("react.forward_ref"),PM=Symbol.for("react.suspense"),MM=Symbol.for("react.memo"),DM=Symbol.for("react.lazy"),hA=Symbol.iterator;function RM(n){return n===null||typeof n!="object"?null:(n=hA&&n[hA]||n["@@iterator"],typeof n=="function"?n:null)}var fE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pE=Object.assign,mE={};function Wh(n,t,e){this.props=n,this.context=t,this.refs=mE,this.updater=e||fE}Wh.prototype.isReactComponent={};Wh.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};Wh.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function gE(){}gE.prototype=Wh.prototype;function A1(n,t,e){this.props=n,this.context=t,this.refs=mE,this.updater=e||fE}var S1=A1.prototype=new gE;S1.constructor=A1;pE(S1,Wh.prototype);S1.isPureReactComponent=!0;var dA=Array.isArray,yE=Object.prototype.hasOwnProperty,C1={current:null},vE={key:!0,ref:!0,__self:!0,__source:!0};function wE(n,t,e){var i,s={},r=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)yE.call(t,i)&&!vE.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(l===1)s.children=e;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:mm,type:n,key:r,ref:o,props:s,_owner:C1.current}}function LM(n,t){return{$$typeof:mm,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function E1(n){return typeof n=="object"&&n!==null&&n.$$typeof===mm}function NM(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var fA=/\/+/g;function B0(n,t){return typeof n=="object"&&n!==null&&n.key!=null?NM(""+n.key):t.toString(36)}function ag(n,t,e,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case mm:case AM:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+B0(o,0):i,dA(s)?(e="",n!=null&&(e=n.replace(fA,"$&/")+"/"),ag(s,t,e,"",function(u){return u})):s!=null&&(E1(s)&&(s=LM(s,e+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fA,"$&/")+"/")+n)),t.push(s)),1;if(o=0,i=i===""?".":i+":",dA(n))for(var l=0;l<n.length;l++){r=n[l];var c=i+B0(r,l);o+=ag(r,t,e,c,s)}else if(c=RM(n),typeof c=="function")for(n=c.call(n),l=0;!(r=n.next()).done;)r=r.value,c=i+B0(r,l++),o+=ag(r,t,e,c,s);else if(r==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Dm(n,t,e){if(n==null)return n;var i=[],s=0;return ag(n,i,"","",function(r){return t.call(e,r,s++)}),i}function IM(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var _n={current:null},lg={transition:null},FM={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:lg,ReactCurrentOwner:C1};function bE(){throw Error("act(...) is not supported in production builds of React.")}gt.Children={map:Dm,forEach:function(n,t,e){Dm(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return Dm(n,function(){t++}),t},toArray:function(n){return Dm(n,function(t){return t})||[]},only:function(n){if(!E1(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};gt.Component=Wh;gt.Fragment=SM;gt.Profiler=EM;gt.PureComponent=A1;gt.StrictMode=CM;gt.Suspense=PM;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FM;gt.act=bE;gt.cloneElement=function(n,t,e){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=pE({},n.props),s=n.key,r=n.ref,o=n._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=C1.current),t.key!==void 0&&(s=""+t.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in t)yE.call(t,c)&&!vE.hasOwnProperty(c)&&(i[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)i.children=e;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:mm,type:n.type,key:s,ref:r,props:i,_owner:o}};gt.createContext=function(n){return n={$$typeof:kM,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:TM,_context:n},n.Consumer=n};gt.createElement=wE;gt.createFactory=function(n){var t=wE.bind(null,n);return t.type=n,t};gt.createRef=function(){return{current:null}};gt.forwardRef=function(n){return{$$typeof:_M,render:n}};gt.isValidElement=E1;gt.lazy=function(n){return{$$typeof:DM,_payload:{_status:-1,_result:n},_init:IM}};gt.memo=function(n,t){return{$$typeof:MM,type:n,compare:t===void 0?null:t}};gt.startTransition=function(n){var t=lg.transition;lg.transition={};try{n()}finally{lg.transition=t}};gt.unstable_act=bE;gt.useCallback=function(n,t){return _n.current.useCallback(n,t)};gt.useContext=function(n){return _n.current.useContext(n)};gt.useDebugValue=function(){};gt.useDeferredValue=function(n){return _n.current.useDeferredValue(n)};gt.useEffect=function(n,t){return _n.current.useEffect(n,t)};gt.useId=function(){return _n.current.useId()};gt.useImperativeHandle=function(n,t,e){return _n.current.useImperativeHandle(n,t,e)};gt.useInsertionEffect=function(n,t){return _n.current.useInsertionEffect(n,t)};gt.useLayoutEffect=function(n,t){return _n.current.useLayoutEffect(n,t)};gt.useMemo=function(n,t){return _n.current.useMemo(n,t)};gt.useReducer=function(n,t,e){return _n.current.useReducer(n,t,e)};gt.useRef=function(n){return _n.current.useRef(n)};gt.useState=function(n){return _n.current.useState(n)};gt.useSyncExternalStore=function(n,t,e){return _n.current.useSyncExternalStore(n,t,e)};gt.useTransition=function(){return _n.current.useTransition()};gt.version="18.3.1";dE.exports=gt;var z=dE.exports;const pA=xM(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OM=z,BM=Symbol.for("react.element"),jM=Symbol.for("react.fragment"),VM=Object.prototype.hasOwnProperty,zM=OM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UM={key:!0,ref:!0,__self:!0,__source:!0};function xE(n,t,e){var i,s={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)VM.call(t,i)&&!UM.hasOwnProperty(i)&&(s[i]=t[i]);if(n&&n.defaultProps)for(i in t=n.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:BM,type:n,key:r,ref:o,props:s,_owner:zM.current}}d0.Fragment=jM;d0.jsx=xE;d0.jsxs=xE;hE.exports=d0;var T=hE.exports,AE={exports:{}},wi={},SE={exports:{}},CE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(N,U){var $=N.length;N.push(U);t:for(;0<$;){var et=$-1>>>1,nt=N[et];if(0<s(nt,U))N[et]=U,N[$]=nt,$=et;else break t}}function e(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var U=N[0],$=N.pop();if($!==U){N[0]=$;t:for(var et=0,nt=N.length,M=nt>>>1;et<M;){var L=2*(et+1)-1,F=N[L],tt=L+1,Z=N[tt];if(0>s(F,$))tt<nt&&0>s(Z,F)?(N[et]=Z,N[tt]=$,et=tt):(N[et]=F,N[L]=$,et=L);else if(tt<nt&&0>s(Z,$))N[et]=Z,N[tt]=$,et=tt;else break t}}return U}function s(N,U){var $=N.sortIndex-U.sortIndex;return $!==0?$:N.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,v=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var U=e(u);U!==null;){if(U.callback===null)i(u);else if(U.startTime<=N)i(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=e(u)}}function C(N){if(b=!1,w(N),!v)if(e(c)!==null)v=!0,G(E);else{var U=e(u);U!==null&&j(C,U.startTime-N)}}function E(N,U){v=!1,b&&(b=!1,m(P),P=-1),p=!0;var $=f;try{for(w(U),d=e(c);d!==null&&(!(d.expirationTime>U)||N&&!I());){var et=d.callback;if(typeof et=="function"){d.callback=null,f=d.priorityLevel;var nt=et(d.expirationTime<=U);U=n.unstable_now(),typeof nt=="function"?d.callback=nt:d===e(c)&&i(c),w(U)}else i(c);d=e(c)}if(d!==null)var M=!0;else{var L=e(u);L!==null&&j(C,L.startTime-U),M=!1}return M}finally{d=null,f=$,p=!1}}var k=!1,_=null,P=-1,D=5,R=-1;function I(){return!(n.unstable_now()-R<D)}function V(){if(_!==null){var N=n.unstable_now();R=N;var U=!0;try{U=_(!0,N)}finally{U?Q():(k=!1,_=null)}}else k=!1}var Q;if(typeof y=="function")Q=function(){y(V)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,rt=q.port2;q.port1.onmessage=V,Q=function(){rt.postMessage(null)}}else Q=function(){S(V,0)};function G(N){_=N,k||(k=!0,Q())}function j(N,U){P=S(function(){N(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||p||(v=!0,G(E))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return e(c)},n.unstable_next=function(N){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var $=f;f=U;try{return N()}finally{f=$}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,U){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=f;f=N;try{return U()}finally{f=$}},n.unstable_scheduleCallback=function(N,U,$){var et=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?et+$:et):$=et,N){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=$+nt,N={id:h++,callback:U,priorityLevel:N,startTime:$,expirationTime:nt,sortIndex:-1},$>et?(N.sortIndex=$,t(u,N),e(c)===null&&N===e(u)&&(b?(m(P),P=-1):b=!0,j(C,$-et))):(N.sortIndex=nt,t(c,N),v||p||(v=!0,G(E))),N},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(N){var U=f;return function(){var $=f;f=U;try{return N.apply(this,arguments)}finally{f=$}}}})(CE);SE.exports=CE;var HM=SE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $M=z,vi=HM;function B(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var EE=new Set,Qd={};function wc(n,t){Fh(n,t),Fh(n+"Capture",t)}function Fh(n,t){for(Qd[n]=t,n=0;n<t.length;n++)EE.add(t[n])}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iv=Object.prototype.hasOwnProperty,WM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mA={},gA={};function GM(n){return Iv.call(gA,n)?!0:Iv.call(mA,n)?!1:WM.test(n)?gA[n]=!0:(mA[n]=!0,!1)}function XM(n,t,e,i){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:e!==null?!e.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function YM(n,t,e,i){if(t===null||typeof t>"u"||XM(n,t,e,i))return!0;if(i)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pn(n,t,e,i,s,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=e,this.propertyName=n,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){nn[n]=new Pn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];nn[t]=new Pn(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){nn[n]=new Pn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){nn[n]=new Pn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){nn[n]=new Pn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){nn[n]=new Pn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){nn[n]=new Pn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){nn[n]=new Pn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){nn[n]=new Pn(n,5,!1,n.toLowerCase(),null,!1,!1)});var T1=/[\-:]([a-z])/g;function k1(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(T1,k1);nn[t]=new Pn(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(T1,k1);nn[t]=new Pn(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(T1,k1);nn[t]=new Pn(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){nn[n]=new Pn(n,1,!1,n.toLowerCase(),null,!1,!1)});nn.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){nn[n]=new Pn(n,1,!1,n.toLowerCase(),null,!0,!0)});function _1(n,t,e,i){var s=nn.hasOwnProperty(t)?nn[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(YM(t,e,s,i)&&(e=null),i||s===null?GM(t)&&(e===null?n.removeAttribute(t):n.setAttribute(t,""+e)):s.mustUseProperty?n[s.propertyName]=e===null?s.type===3?!1:"":e:(t=s.attributeName,i=s.attributeNamespace,e===null?n.removeAttribute(t):(s=s.type,e=s===3||s===4&&e===!0?"":""+e,i?n.setAttributeNS(i,t,e):n.setAttribute(t,e))))}var oo=$M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rm=Symbol.for("react.element"),Nc=Symbol.for("react.portal"),Ic=Symbol.for("react.fragment"),P1=Symbol.for("react.strict_mode"),Fv=Symbol.for("react.profiler"),TE=Symbol.for("react.provider"),kE=Symbol.for("react.context"),M1=Symbol.for("react.forward_ref"),Ov=Symbol.for("react.suspense"),Bv=Symbol.for("react.suspense_list"),D1=Symbol.for("react.memo"),po=Symbol.for("react.lazy"),_E=Symbol.for("react.offscreen"),yA=Symbol.iterator;function Qh(n){return n===null||typeof n!="object"?null:(n=yA&&n[yA]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,j0;function hd(n){if(j0===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);j0=t&&t[1]||""}return`
`+j0+n}var V0=!1;function z0(n,t){if(!n||V0)return"";V0=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(n,[],t)}else{try{t.call()}catch(u){i=u}n.call(t.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,l=r.length-1;1<=o&&0<=l&&s[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==r[l]){var c=`
`+s[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{V0=!1,Error.prepareStackTrace=e}return(n=n?n.displayName||n.name:"")?hd(n):""}function KM(n){switch(n.tag){case 5:return hd(n.type);case 16:return hd("Lazy");case 13:return hd("Suspense");case 19:return hd("SuspenseList");case 0:case 2:case 15:return n=z0(n.type,!1),n;case 11:return n=z0(n.type.render,!1),n;case 1:return n=z0(n.type,!0),n;default:return""}}function jv(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ic:return"Fragment";case Nc:return"Portal";case Fv:return"Profiler";case P1:return"StrictMode";case Ov:return"Suspense";case Bv:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case kE:return(n.displayName||"Context")+".Consumer";case TE:return(n._context.displayName||"Context")+".Provider";case M1:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D1:return t=n.displayName||null,t!==null?t:jv(n.type)||"Memo";case po:t=n._payload,n=n._init;try{return jv(n(t))}catch{}}return null}function qM(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jv(t);case 8:return t===P1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ba(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function PE(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QM(n){var t=PE(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var s=e.get,r=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function Lm(n){n._valueTracker||(n._valueTracker=QM(n))}function ME(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=PE(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function sy(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Vv(n,t){var e=t.checked;return se({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??n._wrapperState.initialChecked})}function vA(n,t){var e=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;e=ba(t.value!=null?t.value:e),n._wrapperState={initialChecked:i,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function DE(n,t){t=t.checked,t!=null&&_1(n,"checked",t,!1)}function zv(n,t){DE(n,t);var e=ba(t.value),i=t.type;if(e!=null)i==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+e):n.value!==""+e&&(n.value=""+e);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?Uv(n,t.type,e):t.hasOwnProperty("defaultValue")&&Uv(n,t.type,ba(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function wA(n,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,e||t===n.value||(n.value=t),n.defaultValue=t}e=n.name,e!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,e!==""&&(n.name=e)}function Uv(n,t,e){(t!=="number"||sy(n.ownerDocument)!==n)&&(e==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+e&&(n.defaultValue=""+e))}var dd=Array.isArray;function iu(n,t,e,i){if(n=n.options,t){t={};for(var s=0;s<e.length;s++)t["$"+e[s]]=!0;for(e=0;e<n.length;e++)s=t.hasOwnProperty("$"+n[e].value),n[e].selected!==s&&(n[e].selected=s),s&&i&&(n[e].defaultSelected=!0)}else{for(e=""+ba(e),t=null,s=0;s<n.length;s++){if(n[s].value===e){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}t!==null||n[s].disabled||(t=n[s])}t!==null&&(t.selected=!0)}}function Hv(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return se({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function bA(n,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(B(92));if(dd(e)){if(1<e.length)throw Error(B(93));e=e[0]}t=e}t==null&&(t=""),e=t}n._wrapperState={initialValue:ba(e)}}function RE(n,t){var e=ba(t.value),i=ba(t.defaultValue);e!=null&&(e=""+e,e!==n.value&&(n.value=e),t.defaultValue==null&&n.defaultValue!==e&&(n.defaultValue=e)),i!=null&&(n.defaultValue=""+i)}function xA(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function LE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $v(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?LE(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Nm,NE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,i,s){MSApp.execUnsafeLocalFunction(function(){return n(t,e,i,s)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(Nm=Nm||document.createElement("div"),Nm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Nm.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function Zd(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var Od={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZM=["Webkit","ms","Moz","O"];Object.keys(Od).forEach(function(n){ZM.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),Od[t]=Od[n]})});function IE(n,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||Od.hasOwnProperty(n)&&Od[n]?(""+t).trim():t+"px"}function FE(n,t){n=n.style;for(var e in t)if(t.hasOwnProperty(e)){var i=e.indexOf("--")===0,s=IE(e,t[e],i);e==="float"&&(e="cssFloat"),i?n.setProperty(e,s):n[e]=s}}var JM=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wv(n,t){if(t){if(JM[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function Gv(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xv=null;function R1(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Yv=null,su=null,ru=null;function AA(n){if(n=vm(n)){if(typeof Yv!="function")throw Error(B(280));var t=n.stateNode;t&&(t=y0(t),Yv(n.stateNode,n.type,t))}}function OE(n){su?ru?ru.push(n):ru=[n]:su=n}function BE(){if(su){var n=su,t=ru;if(ru=su=null,AA(n),t)for(n=0;n<t.length;n++)AA(t[n])}}function jE(n,t){return n(t)}function VE(){}var U0=!1;function zE(n,t,e){if(U0)return n(t,e);U0=!0;try{return jE(n,t,e)}finally{U0=!1,(su!==null||ru!==null)&&(VE(),BE())}}function Jd(n,t){var e=n.stateNode;if(e===null)return null;var i=y0(e);if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(B(231,t,typeof e));return e}var Kv=!1;if(Zr)try{var Zh={};Object.defineProperty(Zh,"passive",{get:function(){Kv=!0}}),window.addEventListener("test",Zh,Zh),window.removeEventListener("test",Zh,Zh)}catch{Kv=!1}function tD(n,t,e,i,s,r,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var Bd=!1,ry=null,oy=!1,qv=null,eD={onError:function(n){Bd=!0,ry=n}};function nD(n,t,e,i,s,r,o,l,c){Bd=!1,ry=null,tD.apply(eD,arguments)}function iD(n,t,e,i,s,r,o,l,c){if(nD.apply(this,arguments),Bd){if(Bd){var u=ry;Bd=!1,ry=null}else throw Error(B(198));oy||(oy=!0,qv=u)}}function bc(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function UE(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function SA(n){if(bc(n)!==n)throw Error(B(188))}function sD(n){var t=n.alternate;if(!t){if(t=bc(n),t===null)throw Error(B(188));return t!==n?null:n}for(var e=n,i=t;;){var s=e.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){e=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===e)return SA(s),n;if(r===i)return SA(s),t;r=r.sibling}throw Error(B(188))}if(e.return!==i.return)e=s,i=r;else{for(var o=!1,l=s.child;l;){if(l===e){o=!0,e=s,i=r;break}if(l===i){o=!0,i=s,e=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===e){o=!0,e=r,i=s;break}if(l===i){o=!0,i=r,e=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(e.alternate!==i)throw Error(B(190))}if(e.tag!==3)throw Error(B(188));return e.stateNode.current===e?n:t}function HE(n){return n=sD(n),n!==null?$E(n):null}function $E(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=$E(n);if(t!==null)return t;n=n.sibling}return null}var WE=vi.unstable_scheduleCallback,CA=vi.unstable_cancelCallback,rD=vi.unstable_shouldYield,oD=vi.unstable_requestPaint,ge=vi.unstable_now,aD=vi.unstable_getCurrentPriorityLevel,L1=vi.unstable_ImmediatePriority,GE=vi.unstable_UserBlockingPriority,ay=vi.unstable_NormalPriority,lD=vi.unstable_LowPriority,XE=vi.unstable_IdlePriority,f0=null,qs=null;function cD(n){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(f0,n,void 0,(n.current.flags&128)===128)}catch{}}var gs=Math.clz32?Math.clz32:dD,uD=Math.log,hD=Math.LN2;function dD(n){return n>>>=0,n===0?32:31-(uD(n)/hD|0)|0}var Im=64,Fm=4194304;function fd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ly(n,t){var e=n.pendingLanes;if(e===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=e&268435455;if(o!==0){var l=o&~s;l!==0?i=fd(l):(r&=o,r!==0&&(i=fd(r)))}else o=e&~s,o!==0?i=fd(o):r!==0&&(i=fd(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(i&4&&(i|=e&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=i;0<t;)e=31-gs(t),s=1<<e,i|=n[e],t&=~s;return i}function fD(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pD(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-gs(r),l=1<<o,c=s[o];c===-1?(!(l&e)||l&i)&&(s[o]=fD(l,t)):c<=t&&(n.expiredLanes|=l),r&=~l}}function Qv(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function YE(){var n=Im;return Im<<=1,!(Im&4194240)&&(Im=64),n}function H0(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function gm(n,t,e){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-gs(t),n[t]=e}function mD(n,t){var e=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<e;){var s=31-gs(e),r=1<<s;t[s]=0,i[s]=-1,n[s]=-1,e&=~r}}function N1(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-gs(e),s=1<<i;s&t|n[i]&t&&(n[i]|=t),e&=~s}}var _t=0;function KE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var qE,I1,QE,ZE,JE,Zv=!1,Om=[],da=null,fa=null,pa=null,tf=new Map,ef=new Map,go=[],gD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EA(n,t){switch(n){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":pa=null;break;case"pointerover":case"pointerout":tf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ef.delete(t.pointerId)}}function Jh(n,t,e,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=vm(t),t!==null&&I1(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),n)}function yD(n,t,e,i,s){switch(t){case"focusin":return da=Jh(da,n,t,e,i,s),!0;case"dragenter":return fa=Jh(fa,n,t,e,i,s),!0;case"mouseover":return pa=Jh(pa,n,t,e,i,s),!0;case"pointerover":var r=s.pointerId;return tf.set(r,Jh(tf.get(r)||null,n,t,e,i,s)),!0;case"gotpointercapture":return r=s.pointerId,ef.set(r,Jh(ef.get(r)||null,n,t,e,i,s)),!0}return!1}function tT(n){var t=za(n.target);if(t!==null){var e=bc(t);if(e!==null){if(t=e.tag,t===13){if(t=UE(e),t!==null){n.blockedOn=t,JE(n.priority,function(){QE(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function cg(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=Jv(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);Xv=i,e.target.dispatchEvent(i),Xv=null}else return t=vm(e),t!==null&&I1(t),n.blockedOn=e,!1;t.shift()}return!0}function TA(n,t,e){cg(n)&&e.delete(t)}function vD(){Zv=!1,da!==null&&cg(da)&&(da=null),fa!==null&&cg(fa)&&(fa=null),pa!==null&&cg(pa)&&(pa=null),tf.forEach(TA),ef.forEach(TA)}function td(n,t){n.blockedOn===t&&(n.blockedOn=null,Zv||(Zv=!0,vi.unstable_scheduleCallback(vi.unstable_NormalPriority,vD)))}function nf(n){function t(s){return td(s,n)}if(0<Om.length){td(Om[0],n);for(var e=1;e<Om.length;e++){var i=Om[e];i.blockedOn===n&&(i.blockedOn=null)}}for(da!==null&&td(da,n),fa!==null&&td(fa,n),pa!==null&&td(pa,n),tf.forEach(t),ef.forEach(t),e=0;e<go.length;e++)i=go[e],i.blockedOn===n&&(i.blockedOn=null);for(;0<go.length&&(e=go[0],e.blockedOn===null);)tT(e),e.blockedOn===null&&go.shift()}var ou=oo.ReactCurrentBatchConfig,cy=!0;function wD(n,t,e,i){var s=_t,r=ou.transition;ou.transition=null;try{_t=1,F1(n,t,e,i)}finally{_t=s,ou.transition=r}}function bD(n,t,e,i){var s=_t,r=ou.transition;ou.transition=null;try{_t=4,F1(n,t,e,i)}finally{_t=s,ou.transition=r}}function F1(n,t,e,i){if(cy){var s=Jv(n,t,e,i);if(s===null)J0(n,t,i,uy,e),EA(n,i);else if(yD(s,n,t,e,i))i.stopPropagation();else if(EA(n,i),t&4&&-1<gD.indexOf(n)){for(;s!==null;){var r=vm(s);if(r!==null&&qE(r),r=Jv(n,t,e,i),r===null&&J0(n,t,i,uy,e),r===s)break;s=r}s!==null&&i.stopPropagation()}else J0(n,t,i,null,e)}}var uy=null;function Jv(n,t,e,i){if(uy=null,n=R1(i),n=za(n),n!==null)if(t=bc(n),t===null)n=null;else if(e=t.tag,e===13){if(n=UE(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return uy=n,null}function eT(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aD()){case L1:return 1;case GE:return 4;case ay:case lD:return 16;case XE:return 536870912;default:return 16}default:return 16}}var ua=null,O1=null,ug=null;function nT(){if(ug)return ug;var n,t=O1,e=t.length,i,s="value"in ua?ua.value:ua.textContent,r=s.length;for(n=0;n<e&&t[n]===s[n];n++);var o=e-n;for(i=1;i<=o&&t[e-i]===s[r-i];i++);return ug=s.slice(n,1<i?1-i:void 0)}function hg(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function Bm(){return!0}function kA(){return!1}function bi(n){function t(e,i,s,r,o){this._reactName=e,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(e=n[l],this[l]=e?e(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Bm:kA,this.isPropagationStopped=kA,this}return se(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Bm)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Bm)},persist:function(){},isPersistent:Bm}),t}var Gh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B1=bi(Gh),ym=se({},Gh,{view:0,detail:0}),xD=bi(ym),$0,W0,ed,p0=se({},ym,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:j1,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ed&&(ed&&n.type==="mousemove"?($0=n.screenX-ed.screenX,W0=n.screenY-ed.screenY):W0=$0=0,ed=n),$0)},movementY:function(n){return"movementY"in n?n.movementY:W0}}),_A=bi(p0),AD=se({},p0,{dataTransfer:0}),SD=bi(AD),CD=se({},ym,{relatedTarget:0}),G0=bi(CD),ED=se({},Gh,{animationName:0,elapsedTime:0,pseudoElement:0}),TD=bi(ED),kD=se({},Gh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),_D=bi(kD),PD=se({},Gh,{data:0}),PA=bi(PD),MD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LD(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=RD[n])?!!t[n]:!1}function j1(){return LD}var ND=se({},ym,{key:function(n){if(n.key){var t=MD[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=hg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?DD[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:j1,charCode:function(n){return n.type==="keypress"?hg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?hg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ID=bi(ND),FD=se({},p0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MA=bi(FD),OD=se({},ym,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:j1}),BD=bi(OD),jD=se({},Gh,{propertyName:0,elapsedTime:0,pseudoElement:0}),VD=bi(jD),zD=se({},p0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),UD=bi(zD),HD=[9,13,27,32],V1=Zr&&"CompositionEvent"in window,jd=null;Zr&&"documentMode"in document&&(jd=document.documentMode);var $D=Zr&&"TextEvent"in window&&!jd,iT=Zr&&(!V1||jd&&8<jd&&11>=jd),DA=" ",RA=!1;function sT(n,t){switch(n){case"keyup":return HD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fc=!1;function WD(n,t){switch(n){case"compositionend":return rT(t);case"keypress":return t.which!==32?null:(RA=!0,DA);case"textInput":return n=t.data,n===DA&&RA?null:n;default:return null}}function GD(n,t){if(Fc)return n==="compositionend"||!V1&&sT(n,t)?(n=nT(),ug=O1=ua=null,Fc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return iT&&t.locale!=="ko"?null:t.data;default:return null}}var XD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LA(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!XD[n.type]:t==="textarea"}function oT(n,t,e,i){OE(i),t=hy(t,"onChange"),0<t.length&&(e=new B1("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var Vd=null,sf=null;function YD(n){yT(n,0)}function m0(n){var t=jc(n);if(ME(t))return n}function KD(n,t){if(n==="change")return t}var aT=!1;if(Zr){var X0;if(Zr){var Y0="oninput"in document;if(!Y0){var NA=document.createElement("div");NA.setAttribute("oninput","return;"),Y0=typeof NA.oninput=="function"}X0=Y0}else X0=!1;aT=X0&&(!document.documentMode||9<document.documentMode)}function IA(){Vd&&(Vd.detachEvent("onpropertychange",lT),sf=Vd=null)}function lT(n){if(n.propertyName==="value"&&m0(sf)){var t=[];oT(t,sf,n,R1(n)),zE(YD,t)}}function qD(n,t,e){n==="focusin"?(IA(),Vd=t,sf=e,Vd.attachEvent("onpropertychange",lT)):n==="focusout"&&IA()}function QD(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return m0(sf)}function ZD(n,t){if(n==="click")return m0(t)}function JD(n,t){if(n==="input"||n==="change")return m0(t)}function tR(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var vs=typeof Object.is=="function"?Object.is:tR;function rf(n,t){if(vs(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var s=e[i];if(!Iv.call(t,s)||!vs(n[s],t[s]))return!1}return!0}function FA(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function OA(n,t){var e=FA(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=FA(e)}}function cT(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?cT(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function uT(){for(var n=window,t=sy();t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=sy(n.document)}return t}function z1(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function eR(n){var t=uT(),e=n.focusedElem,i=n.selectionRange;if(t!==e&&e&&e.ownerDocument&&cT(e.ownerDocument.documentElement,e)){if(i!==null&&z1(e)){if(t=i.start,n=i.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var s=e.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=OA(e,r);var o=OA(e,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(t),n.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nR=Zr&&"documentMode"in document&&11>=document.documentMode,Oc=null,tw=null,zd=null,ew=!1;function BA(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;ew||Oc==null||Oc!==sy(i)||(i=Oc,"selectionStart"in i&&z1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),zd&&rf(zd,i)||(zd=i,i=hy(tw,"onSelect"),0<i.length&&(t=new B1("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=Oc)))}function jm(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var Bc={animationend:jm("Animation","AnimationEnd"),animationiteration:jm("Animation","AnimationIteration"),animationstart:jm("Animation","AnimationStart"),transitionend:jm("Transition","TransitionEnd")},K0={},hT={};Zr&&(hT=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function g0(n){if(K0[n])return K0[n];if(!Bc[n])return n;var t=Bc[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in hT)return K0[n]=t[e];return n}var dT=g0("animationend"),fT=g0("animationiteration"),pT=g0("animationstart"),mT=g0("transitionend"),gT=new Map,jA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ka(n,t){gT.set(n,t),wc(t,[n])}for(var q0=0;q0<jA.length;q0++){var Q0=jA[q0],iR=Q0.toLowerCase(),sR=Q0[0].toUpperCase()+Q0.slice(1);ka(iR,"on"+sR)}ka(dT,"onAnimationEnd");ka(fT,"onAnimationIteration");ka(pT,"onAnimationStart");ka("dblclick","onDoubleClick");ka("focusin","onFocus");ka("focusout","onBlur");ka(mT,"onTransitionEnd");Fh("onMouseEnter",["mouseout","mouseover"]);Fh("onMouseLeave",["mouseout","mouseover"]);Fh("onPointerEnter",["pointerout","pointerover"]);Fh("onPointerLeave",["pointerout","pointerover"]);wc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wc("onBeforeInput",["compositionend","keypress","textInput","paste"]);wc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rR=new Set("cancel close invalid load scroll toggle".split(" ").concat(pd));function VA(n,t,e){var i=n.type||"unknown-event";n.currentTarget=e,iD(i,t,void 0,n),n.currentTarget=null}function yT(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var l=i[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==r&&s.isPropagationStopped())break t;VA(s,l,u),r=c}else for(o=0;o<i.length;o++){if(l=i[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==r&&s.isPropagationStopped())break t;VA(s,l,u),r=c}}}if(oy)throw n=qv,oy=!1,qv=null,n}function $t(n,t){var e=t[ow];e===void 0&&(e=t[ow]=new Set);var i=n+"__bubble";e.has(i)||(vT(t,n,2,!1),e.add(i))}function Z0(n,t,e){var i=0;t&&(i|=4),vT(e,n,i,t)}var Vm="_reactListening"+Math.random().toString(36).slice(2);function of(n){if(!n[Vm]){n[Vm]=!0,EE.forEach(function(e){e!=="selectionchange"&&(rR.has(e)||Z0(e,!1,n),Z0(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[Vm]||(t[Vm]=!0,Z0("selectionchange",!1,t))}}function vT(n,t,e,i){switch(eT(t)){case 1:var s=wD;break;case 4:s=bD;break;default:s=F1}e=s.bind(null,t,e,n),s=void 0,!Kv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(t,e,{capture:!0,passive:s}):n.addEventListener(t,e,!0):s!==void 0?n.addEventListener(t,e,{passive:s}):n.addEventListener(t,e,!1)}function J0(n,t,e,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=za(l),o===null)return;if(c=o.tag,c===5||c===6){i=r=o;continue t}l=l.parentNode}}i=i.return}zE(function(){var u=r,h=R1(e),d=[];t:{var f=gT.get(n);if(f!==void 0){var p=B1,v=n;switch(n){case"keypress":if(hg(e)===0)break t;case"keydown":case"keyup":p=ID;break;case"focusin":v="focus",p=G0;break;case"focusout":v="blur",p=G0;break;case"beforeblur":case"afterblur":p=G0;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=_A;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=SD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=BD;break;case dT:case fT:case pT:p=TD;break;case mT:p=VD;break;case"scroll":p=xD;break;case"wheel":p=UD;break;case"copy":case"cut":case"paste":p=_D;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=MA}var b=(t&4)!==0,S=!b&&n==="scroll",m=b?f!==null?f+"Capture":null:f;b=[];for(var y=u,w;y!==null;){w=y;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,m!==null&&(C=Jd(y,m),C!=null&&b.push(af(y,C,w)))),S)break;y=y.return}0<b.length&&(f=new p(f,v,null,e,h),d.push({event:f,listeners:b}))}}if(!(t&7)){t:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&e!==Xv&&(v=e.relatedTarget||e.fromElement)&&(za(v)||v[Jr]))break t;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=e.relatedTarget||e.toElement,p=u,v=v?za(v):null,v!==null&&(S=bc(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(b=_A,C="onMouseLeave",m="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(b=MA,C="onPointerLeave",m="onPointerEnter",y="pointer"),S=p==null?f:jc(p),w=v==null?f:jc(v),f=new b(C,y+"leave",p,e,h),f.target=S,f.relatedTarget=w,C=null,za(h)===u&&(b=new b(m,y+"enter",v,e,h),b.target=w,b.relatedTarget=S,C=b),S=C,p&&v)e:{for(b=p,m=v,y=0,w=b;w;w=Sc(w))y++;for(w=0,C=m;C;C=Sc(C))w++;for(;0<y-w;)b=Sc(b),y--;for(;0<w-y;)m=Sc(m),w--;for(;y--;){if(b===m||m!==null&&b===m.alternate)break e;b=Sc(b),m=Sc(m)}b=null}else b=null;p!==null&&zA(d,f,p,b,!1),v!==null&&S!==null&&zA(d,S,v,b,!0)}}t:{if(f=u?jc(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var E=KD;else if(LA(f))if(aT)E=JD;else{E=QD;var k=qD}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=ZD);if(E&&(E=E(n,u))){oT(d,E,e,h);break t}k&&k(n,f,u),n==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Uv(f,"number",f.value)}switch(k=u?jc(u):window,n){case"focusin":(LA(k)||k.contentEditable==="true")&&(Oc=k,tw=u,zd=null);break;case"focusout":zd=tw=Oc=null;break;case"mousedown":ew=!0;break;case"contextmenu":case"mouseup":case"dragend":ew=!1,BA(d,e,h);break;case"selectionchange":if(nR)break;case"keydown":case"keyup":BA(d,e,h)}var _;if(V1)t:{switch(n){case"compositionstart":var P="onCompositionStart";break t;case"compositionend":P="onCompositionEnd";break t;case"compositionupdate":P="onCompositionUpdate";break t}P=void 0}else Fc?sT(n,e)&&(P="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(P="onCompositionStart");P&&(iT&&e.locale!=="ko"&&(Fc||P!=="onCompositionStart"?P==="onCompositionEnd"&&Fc&&(_=nT()):(ua=h,O1="value"in ua?ua.value:ua.textContent,Fc=!0)),k=hy(u,P),0<k.length&&(P=new PA(P,n,null,e,h),d.push({event:P,listeners:k}),_?P.data=_:(_=rT(e),_!==null&&(P.data=_)))),(_=$D?WD(n,e):GD(n,e))&&(u=hy(u,"onBeforeInput"),0<u.length&&(h=new PA("onBeforeInput","beforeinput",null,e,h),d.push({event:h,listeners:u}),h.data=_))}yT(d,t)})}function af(n,t,e){return{instance:n,listener:t,currentTarget:e}}function hy(n,t){for(var e=t+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Jd(n,e),r!=null&&i.unshift(af(n,r,s)),r=Jd(n,t),r!=null&&i.push(af(n,r,s))),n=n.return}return i}function Sc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function zA(n,t,e,i,s){for(var r=t._reactName,o=[];e!==null&&e!==i;){var l=e,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,s?(c=Jd(e,r),c!=null&&o.unshift(af(e,c,l))):s||(c=Jd(e,r),c!=null&&o.push(af(e,c,l)))),e=e.return}o.length!==0&&n.push({event:t,listeners:o})}var oR=/\r\n?/g,aR=/\u0000|\uFFFD/g;function UA(n){return(typeof n=="string"?n:""+n).replace(oR,`
`).replace(aR,"")}function zm(n,t,e){if(t=UA(t),UA(n)!==t&&e)throw Error(B(425))}function dy(){}var nw=null,iw=null;function sw(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rw=typeof setTimeout=="function"?setTimeout:void 0,lR=typeof clearTimeout=="function"?clearTimeout:void 0,HA=typeof Promise=="function"?Promise:void 0,cR=typeof queueMicrotask=="function"?queueMicrotask:typeof HA<"u"?function(n){return HA.resolve(null).then(n).catch(uR)}:rw;function uR(n){setTimeout(function(){throw n})}function tv(n,t){var e=t,i=0;do{var s=e.nextSibling;if(n.removeChild(e),s&&s.nodeType===8)if(e=s.data,e==="/$"){if(i===0){n.removeChild(s),nf(t);return}i--}else e!=="$"&&e!=="$?"&&e!=="$!"||i++;e=s}while(e);nf(t)}function ma(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function $A(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}var Xh=Math.random().toString(36).slice(2),Ys="__reactFiber$"+Xh,lf="__reactProps$"+Xh,Jr="__reactContainer$"+Xh,ow="__reactEvents$"+Xh,hR="__reactListeners$"+Xh,dR="__reactHandles$"+Xh;function za(n){var t=n[Ys];if(t)return t;for(var e=n.parentNode;e;){if(t=e[Jr]||e[Ys]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=$A(n);n!==null;){if(e=n[Ys])return e;n=$A(n)}return t}n=e,e=n.parentNode}return null}function vm(n){return n=n[Ys]||n[Jr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function jc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(B(33))}function y0(n){return n[lf]||null}var aw=[],Vc=-1;function _a(n){return{current:n}}function Gt(n){0>Vc||(n.current=aw[Vc],aw[Vc]=null,Vc--)}function Ut(n,t){Vc++,aw[Vc]=n.current,n.current=t}var xa={},mn=_a(xa),Hn=_a(!1),hc=xa;function Oh(n,t){var e=n.type.contextTypes;if(!e)return xa;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in e)s[r]=t[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=s),s}function $n(n){return n=n.childContextTypes,n!=null}function fy(){Gt(Hn),Gt(mn)}function WA(n,t,e){if(mn.current!==xa)throw Error(B(168));Ut(mn,t),Ut(Hn,e)}function wT(n,t,e){var i=n.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return e;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(B(108,qM(n)||"Unknown",s));return se({},e,i)}function py(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||xa,hc=mn.current,Ut(mn,n),Ut(Hn,Hn.current),!0}function GA(n,t,e){var i=n.stateNode;if(!i)throw Error(B(169));e?(n=wT(n,t,hc),i.__reactInternalMemoizedMergedChildContext=n,Gt(Hn),Gt(mn),Ut(mn,n)):Gt(Hn),Ut(Hn,e)}var ur=null,v0=!1,ev=!1;function bT(n){ur===null?ur=[n]:ur.push(n)}function fR(n){v0=!0,bT(n)}function Pa(){if(!ev&&ur!==null){ev=!0;var n=0,t=_t;try{var e=ur;for(_t=1;n<e.length;n++){var i=e[n];do i=i(!0);while(i!==null)}ur=null,v0=!1}catch(s){throw ur!==null&&(ur=ur.slice(n+1)),WE(L1,Pa),s}finally{_t=t,ev=!1}}return null}var zc=[],Uc=0,my=null,gy=0,ji=[],Vi=0,dc=null,Gr=1,Xr="";function Ra(n,t){zc[Uc++]=gy,zc[Uc++]=my,my=n,gy=t}function xT(n,t,e){ji[Vi++]=Gr,ji[Vi++]=Xr,ji[Vi++]=dc,dc=n;var i=Gr;n=Xr;var s=32-gs(i)-1;i&=~(1<<s),e+=1;var r=32-gs(t)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Gr=1<<32-gs(t)+s|e<<s|i,Xr=r+n}else Gr=1<<r|e<<s|i,Xr=n}function U1(n){n.return!==null&&(Ra(n,1),xT(n,1,0))}function H1(n){for(;n===my;)my=zc[--Uc],zc[Uc]=null,gy=zc[--Uc],zc[Uc]=null;for(;n===dc;)dc=ji[--Vi],ji[Vi]=null,Xr=ji[--Vi],ji[Vi]=null,Gr=ji[--Vi],ji[Vi]=null}var gi=null,mi=null,qt=!1,ps=null;function AT(n,t){var e=Ui(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=n,t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)}function XA(n,t){switch(n.tag){case 5:var e=n.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,gi=n,mi=ma(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,gi=n,mi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=dc!==null?{id:Gr,overflow:Xr}:null,n.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Ui(18,null,null,0),e.stateNode=t,e.return=n,n.child=e,gi=n,mi=null,!0):!1;default:return!1}}function lw(n){return(n.mode&1)!==0&&(n.flags&128)===0}function cw(n){if(qt){var t=mi;if(t){var e=t;if(!XA(n,t)){if(lw(n))throw Error(B(418));t=ma(e.nextSibling);var i=gi;t&&XA(n,t)?AT(i,e):(n.flags=n.flags&-4097|2,qt=!1,gi=n)}}else{if(lw(n))throw Error(B(418));n.flags=n.flags&-4097|2,qt=!1,gi=n}}}function YA(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;gi=n}function Um(n){if(n!==gi)return!1;if(!qt)return YA(n),qt=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!sw(n.type,n.memoizedProps)),t&&(t=mi)){if(lw(n))throw ST(),Error(B(418));for(;t;)AT(n,t),t=ma(t.nextSibling)}if(YA(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(B(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"){if(t===0){mi=ma(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}n=n.nextSibling}mi=null}}else mi=gi?ma(n.stateNode.nextSibling):null;return!0}function ST(){for(var n=mi;n;)n=ma(n.nextSibling)}function Bh(){mi=gi=null,qt=!1}function $1(n){ps===null?ps=[n]:ps.push(n)}var pR=oo.ReactCurrentBatchConfig;function nd(n,t,e){if(n=e.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(B(309));var i=e.stateNode}if(!i)throw Error(B(147,n));var s=i,r=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var l=s.refs;o===null?delete l[r]:l[r]=o},t._stringRef=r,t)}if(typeof n!="string")throw Error(B(284));if(!e._owner)throw Error(B(290,n))}return n}function Hm(n,t){throw n=Object.prototype.toString.call(t),Error(B(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function KA(n){var t=n._init;return t(n._payload)}function CT(n){function t(m,y){if(n){var w=m.deletions;w===null?(m.deletions=[y],m.flags|=16):w.push(y)}}function e(m,y){if(!n)return null;for(;y!==null;)t(m,y),y=y.sibling;return null}function i(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function s(m,y){return m=wa(m,y),m.index=0,m.sibling=null,m}function r(m,y,w){return m.index=w,n?(w=m.alternate,w!==null?(w=w.index,w<y?(m.flags|=2,y):w):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function l(m,y,w,C){return y===null||y.tag!==6?(y=lv(w,m.mode,C),y.return=m,y):(y=s(y,w),y.return=m,y)}function c(m,y,w,C){var E=w.type;return E===Ic?h(m,y,w.props.children,C,w.key):y!==null&&(y.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===po&&KA(E)===y.type)?(C=s(y,w.props),C.ref=nd(m,y,w),C.return=m,C):(C=vg(w.type,w.key,w.props,null,m.mode,C),C.ref=nd(m,y,w),C.return=m,C)}function u(m,y,w,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=cv(w,m.mode,C),y.return=m,y):(y=s(y,w.children||[]),y.return=m,y)}function h(m,y,w,C,E){return y===null||y.tag!==7?(y=lc(w,m.mode,C,E),y.return=m,y):(y=s(y,w),y.return=m,y)}function d(m,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=lv(""+y,m.mode,w),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Rm:return w=vg(y.type,y.key,y.props,null,m.mode,w),w.ref=nd(m,null,y),w.return=m,w;case Nc:return y=cv(y,m.mode,w),y.return=m,y;case po:var C=y._init;return d(m,C(y._payload),w)}if(dd(y)||Qh(y))return y=lc(y,m.mode,w,null),y.return=m,y;Hm(m,y)}return null}function f(m,y,w,C){var E=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:l(m,y,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rm:return w.key===E?c(m,y,w,C):null;case Nc:return w.key===E?u(m,y,w,C):null;case po:return E=w._init,f(m,y,E(w._payload),C)}if(dd(w)||Qh(w))return E!==null?null:h(m,y,w,C,null);Hm(m,w)}return null}function p(m,y,w,C,E){if(typeof C=="string"&&C!==""||typeof C=="number")return m=m.get(w)||null,l(y,m,""+C,E);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Rm:return m=m.get(C.key===null?w:C.key)||null,c(y,m,C,E);case Nc:return m=m.get(C.key===null?w:C.key)||null,u(y,m,C,E);case po:var k=C._init;return p(m,y,w,k(C._payload),E)}if(dd(C)||Qh(C))return m=m.get(w)||null,h(y,m,C,E,null);Hm(y,C)}return null}function v(m,y,w,C){for(var E=null,k=null,_=y,P=y=0,D=null;_!==null&&P<w.length;P++){_.index>P?(D=_,_=null):D=_.sibling;var R=f(m,_,w[P],C);if(R===null){_===null&&(_=D);break}n&&_&&R.alternate===null&&t(m,_),y=r(R,y,P),k===null?E=R:k.sibling=R,k=R,_=D}if(P===w.length)return e(m,_),qt&&Ra(m,P),E;if(_===null){for(;P<w.length;P++)_=d(m,w[P],C),_!==null&&(y=r(_,y,P),k===null?E=_:k.sibling=_,k=_);return qt&&Ra(m,P),E}for(_=i(m,_);P<w.length;P++)D=p(_,m,P,w[P],C),D!==null&&(n&&D.alternate!==null&&_.delete(D.key===null?P:D.key),y=r(D,y,P),k===null?E=D:k.sibling=D,k=D);return n&&_.forEach(function(I){return t(m,I)}),qt&&Ra(m,P),E}function b(m,y,w,C){var E=Qh(w);if(typeof E!="function")throw Error(B(150));if(w=E.call(w),w==null)throw Error(B(151));for(var k=E=null,_=y,P=y=0,D=null,R=w.next();_!==null&&!R.done;P++,R=w.next()){_.index>P?(D=_,_=null):D=_.sibling;var I=f(m,_,R.value,C);if(I===null){_===null&&(_=D);break}n&&_&&I.alternate===null&&t(m,_),y=r(I,y,P),k===null?E=I:k.sibling=I,k=I,_=D}if(R.done)return e(m,_),qt&&Ra(m,P),E;if(_===null){for(;!R.done;P++,R=w.next())R=d(m,R.value,C),R!==null&&(y=r(R,y,P),k===null?E=R:k.sibling=R,k=R);return qt&&Ra(m,P),E}for(_=i(m,_);!R.done;P++,R=w.next())R=p(_,m,P,R.value,C),R!==null&&(n&&R.alternate!==null&&_.delete(R.key===null?P:R.key),y=r(R,y,P),k===null?E=R:k.sibling=R,k=R);return n&&_.forEach(function(V){return t(m,V)}),qt&&Ra(m,P),E}function S(m,y,w,C){if(typeof w=="object"&&w!==null&&w.type===Ic&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Rm:t:{for(var E=w.key,k=y;k!==null;){if(k.key===E){if(E=w.type,E===Ic){if(k.tag===7){e(m,k.sibling),y=s(k,w.props.children),y.return=m,m=y;break t}}else if(k.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===po&&KA(E)===k.type){e(m,k.sibling),y=s(k,w.props),y.ref=nd(m,k,w),y.return=m,m=y;break t}e(m,k);break}else t(m,k);k=k.sibling}w.type===Ic?(y=lc(w.props.children,m.mode,C,w.key),y.return=m,m=y):(C=vg(w.type,w.key,w.props,null,m.mode,C),C.ref=nd(m,y,w),C.return=m,m=C)}return o(m);case Nc:t:{for(k=w.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){e(m,y.sibling),y=s(y,w.children||[]),y.return=m,m=y;break t}else{e(m,y);break}else t(m,y);y=y.sibling}y=cv(w,m.mode,C),y.return=m,m=y}return o(m);case po:return k=w._init,S(m,y,k(w._payload),C)}if(dd(w))return v(m,y,w,C);if(Qh(w))return b(m,y,w,C);Hm(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(e(m,y.sibling),y=s(y,w),y.return=m,m=y):(e(m,y),y=lv(w,m.mode,C),y.return=m,m=y),o(m)):e(m,y)}return S}var jh=CT(!0),ET=CT(!1),yy=_a(null),vy=null,Hc=null,W1=null;function G1(){W1=Hc=vy=null}function X1(n){var t=yy.current;Gt(yy),n._currentValue=t}function uw(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function au(n,t){vy=n,W1=Hc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(zn=!0),n.firstContext=null)}function Xi(n){var t=n._currentValue;if(W1!==n)if(n={context:n,memoizedValue:t,next:null},Hc===null){if(vy===null)throw Error(B(308));Hc=n,vy.dependencies={lanes:0,firstContext:n}}else Hc=Hc.next=n;return t}var Ua=null;function Y1(n){Ua===null?Ua=[n]:Ua.push(n)}function TT(n,t,e,i){var s=t.interleaved;return s===null?(e.next=e,Y1(t)):(e.next=s.next,s.next=e),t.interleaved=e,to(n,i)}function to(n,t){n.lanes|=t;var e=n.alternate;for(e!==null&&(e.lanes|=t),e=n,n=n.return;n!==null;)n.childLanes|=t,e=n.alternate,e!==null&&(e.childLanes|=t),e=n,n=n.return;return e.tag===3?e.stateNode:null}var mo=!1;function K1(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kT(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Yr(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function ga(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,bt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,to(n,e)}return s=i.interleaved,s===null?(t.next=t,Y1(i)):(t.next=s.next,s.next=t),i.interleaved=t,to(n,e)}function dg(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,N1(n,e)}}function qA(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var s=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?s=r=o:r=r.next=o,e=e.next}while(e!==null);r===null?s=r=t:r=r.next=t}else s=r=t;e={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}function wy(n,t,e,i){var s=n.updateQueue;mo=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=s.baseState;o=0,h=u=c=null,l=r;do{var f=l.lane,p=l.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var v=n,b=l;switch(f=t,p=e,b.tag){case 1:if(v=b.payload,typeof v=="function"){d=v.call(p,d,f);break t}d=v;break t;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,f=typeof v=="function"?v.call(p,d,f):v,f==null)break t;d=se({},d,f);break t;case 2:mo=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);pc|=o,n.lanes=o,n.memoizedState=d}}function QA(n,t,e){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var i=n[t],s=i.callback;if(s!==null){if(i.callback=null,i=e,typeof s!="function")throw Error(B(191,s));s.call(i)}}}var wm={},Qs=_a(wm),cf=_a(wm),uf=_a(wm);function Ha(n){if(n===wm)throw Error(B(174));return n}function q1(n,t){switch(Ut(uf,t),Ut(cf,n),Ut(Qs,wm),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$v(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=$v(t,n)}Gt(Qs),Ut(Qs,t)}function Vh(){Gt(Qs),Gt(cf),Gt(uf)}function _T(n){Ha(uf.current);var t=Ha(Qs.current),e=$v(t,n.type);t!==e&&(Ut(cf,n),Ut(Qs,e))}function Q1(n){cf.current===n&&(Gt(Qs),Gt(cf))}var te=_a(0);function by(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var nv=[];function Z1(){for(var n=0;n<nv.length;n++)nv[n]._workInProgressVersionPrimary=null;nv.length=0}var fg=oo.ReactCurrentDispatcher,iv=oo.ReactCurrentBatchConfig,fc=0,ne=null,Pe=null,Ve=null,xy=!1,Ud=!1,hf=0,mR=0;function sn(){throw Error(B(321))}function J1(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!vs(n[e],t[e]))return!1;return!0}function tx(n,t,e,i,s,r){if(fc=r,ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fg.current=n===null||n.memoizedState===null?wR:bR,n=e(i,s),Ud){r=0;do{if(Ud=!1,hf=0,25<=r)throw Error(B(301));r+=1,Ve=Pe=null,t.updateQueue=null,fg.current=xR,n=e(i,s)}while(Ud)}if(fg.current=Ay,t=Pe!==null&&Pe.next!==null,fc=0,Ve=Pe=ne=null,xy=!1,t)throw Error(B(300));return n}function ex(){var n=hf!==0;return hf=0,n}function Es(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?ne.memoizedState=Ve=n:Ve=Ve.next=n,Ve}function Yi(){if(Pe===null){var n=ne.alternate;n=n!==null?n.memoizedState:null}else n=Pe.next;var t=Ve===null?ne.memoizedState:Ve.next;if(t!==null)Ve=t,Pe=n;else{if(n===null)throw Error(B(310));Pe=n,n={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Ve===null?ne.memoizedState=Ve=n:Ve=Ve.next=n}return Ve}function df(n,t){return typeof t=="function"?t(n):t}function sv(n){var t=Yi(),e=t.queue;if(e===null)throw Error(B(311));e.lastRenderedReducer=n;var i=Pe,s=i.baseQueue,r=e.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,e.pending=null}if(s!==null){r=s.next,i=i.baseState;var l=o=null,c=null,u=r;do{var h=u.lane;if((fc&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=i):c=c.next=d,ne.lanes|=h,pc|=h}u=u.next}while(u!==null&&u!==r);c===null?o=i:c.next=l,vs(i,t.memoizedState)||(zn=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,e.lastRenderedState=i}if(n=e.interleaved,n!==null){s=n;do r=s.lane,ne.lanes|=r,pc|=r,s=s.next;while(s!==n)}else s===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function rv(n){var t=Yi(),e=t.queue;if(e===null)throw Error(B(311));e.lastRenderedReducer=n;var i=e.dispatch,s=e.pending,r=t.memoizedState;if(s!==null){e.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);vs(r,t.memoizedState)||(zn=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,i]}function PT(){}function MT(n,t){var e=ne,i=Yi(),s=t(),r=!vs(i.memoizedState,s);if(r&&(i.memoizedState=s,zn=!0),i=i.queue,nx(LT.bind(null,e,i,n),[n]),i.getSnapshot!==t||r||Ve!==null&&Ve.memoizedState.tag&1){if(e.flags|=2048,ff(9,RT.bind(null,e,i,s,t),void 0,null),ze===null)throw Error(B(349));fc&30||DT(e,t,s)}return s}function DT(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=ne.updateQueue,t===null?(t={lastEffect:null,stores:null},ne.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function RT(n,t,e,i){t.value=e,t.getSnapshot=i,NT(t)&&IT(n)}function LT(n,t,e){return e(function(){NT(t)&&IT(n)})}function NT(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!vs(n,e)}catch{return!0}}function IT(n){var t=to(n,1);t!==null&&ys(t,n,1,-1)}function ZA(n){var t=Es();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:df,lastRenderedState:n},t.queue=n,n=n.dispatch=vR.bind(null,ne,n),[t.memoizedState,n]}function ff(n,t,e,i){return n={tag:n,create:t,destroy:e,deps:i,next:null},t=ne.updateQueue,t===null?(t={lastEffect:null,stores:null},ne.updateQueue=t,t.lastEffect=n.next=n):(e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n)),n}function FT(){return Yi().memoizedState}function pg(n,t,e,i){var s=Es();ne.flags|=n,s.memoizedState=ff(1|t,e,void 0,i===void 0?null:i)}function w0(n,t,e,i){var s=Yi();i=i===void 0?null:i;var r=void 0;if(Pe!==null){var o=Pe.memoizedState;if(r=o.destroy,i!==null&&J1(i,o.deps)){s.memoizedState=ff(t,e,r,i);return}}ne.flags|=n,s.memoizedState=ff(1|t,e,r,i)}function JA(n,t){return pg(8390656,8,n,t)}function nx(n,t){return w0(2048,8,n,t)}function OT(n,t){return w0(4,2,n,t)}function BT(n,t){return w0(4,4,n,t)}function jT(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function VT(n,t,e){return e=e!=null?e.concat([n]):null,w0(4,4,jT.bind(null,t,n),e)}function ix(){}function zT(n,t){var e=Yi();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&J1(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function UT(n,t){var e=Yi();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&J1(t,i[1])?i[0]:(n=n(),e.memoizedState=[n,t],n)}function HT(n,t,e){return fc&21?(vs(e,t)||(e=YE(),ne.lanes|=e,pc|=e,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,zn=!0),n.memoizedState=e)}function gR(n,t){var e=_t;_t=e!==0&&4>e?e:4,n(!0);var i=iv.transition;iv.transition={};try{n(!1),t()}finally{_t=e,iv.transition=i}}function $T(){return Yi().memoizedState}function yR(n,t,e){var i=va(n);if(e={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null},WT(n))GT(t,e);else if(e=TT(n,t,e,i),e!==null){var s=Tn();ys(e,n,i,s),XT(e,t,i)}}function vR(n,t,e){var i=va(n),s={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null};if(WT(n))GT(t,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,l=r(o,e);if(s.hasEagerState=!0,s.eagerState=l,vs(l,o)){var c=t.interleaved;c===null?(s.next=s,Y1(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}e=TT(n,t,s,i),e!==null&&(s=Tn(),ys(e,n,i,s),XT(e,t,i))}}function WT(n){var t=n.alternate;return n===ne||t!==null&&t===ne}function GT(n,t){Ud=xy=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function XT(n,t,e){if(e&4194240){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,N1(n,e)}}var Ay={readContext:Xi,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},wR={readContext:Xi,useCallback:function(n,t){return Es().memoizedState=[n,t===void 0?null:t],n},useContext:Xi,useEffect:JA,useImperativeHandle:function(n,t,e){return e=e!=null?e.concat([n]):null,pg(4194308,4,jT.bind(null,t,n),e)},useLayoutEffect:function(n,t){return pg(4194308,4,n,t)},useInsertionEffect:function(n,t){return pg(4,2,n,t)},useMemo:function(n,t){var e=Es();return t=t===void 0?null:t,n=n(),e.memoizedState=[n,t],n},useReducer:function(n,t,e){var i=Es();return t=e!==void 0?e(t):t,i.memoizedState=i.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},i.queue=n,n=n.dispatch=yR.bind(null,ne,n),[i.memoizedState,n]},useRef:function(n){var t=Es();return n={current:n},t.memoizedState=n},useState:ZA,useDebugValue:ix,useDeferredValue:function(n){return Es().memoizedState=n},useTransition:function(){var n=ZA(!1),t=n[0];return n=gR.bind(null,n[1]),Es().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,e){var i=ne,s=Es();if(qt){if(e===void 0)throw Error(B(407));e=e()}else{if(e=t(),ze===null)throw Error(B(349));fc&30||DT(i,t,e)}s.memoizedState=e;var r={value:e,getSnapshot:t};return s.queue=r,JA(LT.bind(null,i,r,n),[n]),i.flags|=2048,ff(9,RT.bind(null,i,r,e,t),void 0,null),e},useId:function(){var n=Es(),t=ze.identifierPrefix;if(qt){var e=Xr,i=Gr;e=(i&~(1<<32-gs(i)-1)).toString(32)+e,t=":"+t+"R"+e,e=hf++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=mR++,t=":"+t+"r"+e.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},bR={readContext:Xi,useCallback:zT,useContext:Xi,useEffect:nx,useImperativeHandle:VT,useInsertionEffect:OT,useLayoutEffect:BT,useMemo:UT,useReducer:sv,useRef:FT,useState:function(){return sv(df)},useDebugValue:ix,useDeferredValue:function(n){var t=Yi();return HT(t,Pe.memoizedState,n)},useTransition:function(){var n=sv(df)[0],t=Yi().memoizedState;return[n,t]},useMutableSource:PT,useSyncExternalStore:MT,useId:$T,unstable_isNewReconciler:!1},xR={readContext:Xi,useCallback:zT,useContext:Xi,useEffect:nx,useImperativeHandle:VT,useInsertionEffect:OT,useLayoutEffect:BT,useMemo:UT,useReducer:rv,useRef:FT,useState:function(){return rv(df)},useDebugValue:ix,useDeferredValue:function(n){var t=Yi();return Pe===null?t.memoizedState=n:HT(t,Pe.memoizedState,n)},useTransition:function(){var n=rv(df)[0],t=Yi().memoizedState;return[n,t]},useMutableSource:PT,useSyncExternalStore:MT,useId:$T,unstable_isNewReconciler:!1};function ts(n,t){if(n&&n.defaultProps){t=se({},t),n=n.defaultProps;for(var e in n)t[e]===void 0&&(t[e]=n[e]);return t}return t}function hw(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:se({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var b0={isMounted:function(n){return(n=n._reactInternals)?bc(n)===n:!1},enqueueSetState:function(n,t,e){n=n._reactInternals;var i=Tn(),s=va(n),r=Yr(i,s);r.payload=t,e!=null&&(r.callback=e),t=ga(n,r,s),t!==null&&(ys(t,n,s,i),dg(t,n,s))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=Tn(),s=va(n),r=Yr(i,s);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=ga(n,r,s),t!==null&&(ys(t,n,s,i),dg(t,n,s))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=Tn(),i=va(n),s=Yr(e,i);s.tag=2,t!=null&&(s.callback=t),t=ga(n,s,i),t!==null&&(ys(t,n,i,e),dg(t,n,i))}};function tS(n,t,e,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):t.prototype&&t.prototype.isPureReactComponent?!rf(e,i)||!rf(s,r):!0}function YT(n,t,e){var i=!1,s=xa,r=t.contextType;return typeof r=="object"&&r!==null?r=Xi(r):(s=$n(t)?hc:mn.current,i=t.contextTypes,r=(i=i!=null)?Oh(n,s):xa),t=new t(e,r),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=b0,n.stateNode=t,t._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),t}function eS(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&b0.enqueueReplaceState(t,t.state,null)}function dw(n,t,e,i){var s=n.stateNode;s.props=e,s.state=n.memoizedState,s.refs={},K1(n);var r=t.contextType;typeof r=="object"&&r!==null?s.context=Xi(r):(r=$n(t)?hc:mn.current,s.context=Oh(n,r)),s.state=n.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(hw(n,t,r,e),s.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&b0.enqueueReplaceState(s,s.state,null),wy(n,e,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function zh(n,t){try{var e="",i=t;do e+=KM(i),i=i.return;while(i);var s=e}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:t,stack:s,digest:null}}function ov(n,t,e){return{value:n,source:null,stack:e??null,digest:t??null}}function fw(n,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var AR=typeof WeakMap=="function"?WeakMap:Map;function KT(n,t,e){e=Yr(-1,e),e.tag=3,e.payload={element:null};var i=t.value;return e.callback=function(){Cy||(Cy=!0,Sw=i),fw(n,t)},e}function qT(n,t,e){e=Yr(-1,e),e.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;e.payload=function(){return i(s)},e.callback=function(){fw(n,t)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){fw(n,t),typeof i!="function"&&(ya===null?ya=new Set([this]):ya.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function nS(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new AR;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(e)||(s.add(e),n=FR.bind(null,n,t,e),t.then(n,n))}function iS(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function sS(n,t,e,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===t?n.flags|=65536:(n.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Yr(-1,1),t.tag=2,ga(e,t,1))),e.lanes|=1),n)}var SR=oo.ReactCurrentOwner,zn=!1;function Sn(n,t,e,i){t.child=n===null?ET(t,null,e,i):jh(t,n.child,e,i)}function rS(n,t,e,i,s){e=e.render;var r=t.ref;return au(t,s),i=tx(n,t,e,i,r,s),e=ex(),n!==null&&!zn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,eo(n,t,s)):(qt&&e&&U1(t),t.flags|=1,Sn(n,t,i,s),t.child)}function oS(n,t,e,i,s){if(n===null){var r=e.type;return typeof r=="function"&&!hx(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,QT(n,t,r,i,s)):(n=vg(e.type,null,i,t,t.mode,s),n.ref=t.ref,n.return=t,t.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(e=e.compare,e=e!==null?e:rf,e(o,i)&&n.ref===t.ref)return eo(n,t,s)}return t.flags|=1,n=wa(r,i),n.ref=t.ref,n.return=t,t.child=n}function QT(n,t,e,i,s){if(n!==null){var r=n.memoizedProps;if(rf(r,i)&&n.ref===t.ref)if(zn=!1,t.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(zn=!0);else return t.lanes=n.lanes,eo(n,t,s)}return pw(n,t,e,i,s)}function ZT(n,t,e){var i=t.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut(Wc,di),di|=e;else{if(!(e&1073741824))return n=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,Ut(Wc,di),di|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:e,Ut(Wc,di),di|=i}else r!==null?(i=r.baseLanes|e,t.memoizedState=null):i=e,Ut(Wc,di),di|=i;return Sn(n,t,s,e),t.child}function JT(n,t){var e=t.ref;(n===null&&e!==null||n!==null&&n.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function pw(n,t,e,i,s){var r=$n(e)?hc:mn.current;return r=Oh(t,r),au(t,s),e=tx(n,t,e,i,r,s),i=ex(),n!==null&&!zn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,eo(n,t,s)):(qt&&i&&U1(t),t.flags|=1,Sn(n,t,e,s),t.child)}function aS(n,t,e,i,s){if($n(e)){var r=!0;py(t)}else r=!1;if(au(t,s),t.stateNode===null)mg(n,t),YT(t,e,i),dw(t,e,i,s),i=!0;else if(n===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=e.contextType;typeof u=="object"&&u!==null?u=Xi(u):(u=$n(e)?hc:mn.current,u=Oh(t,u));var h=e.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||c!==u)&&eS(t,o,i,u),mo=!1;var f=t.memoizedState;o.state=f,wy(t,i,o,s),c=t.memoizedState,l!==i||f!==c||Hn.current||mo?(typeof h=="function"&&(hw(t,e,h,i),c=t.memoizedState),(l=mo||tS(t,e,l,i,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),o.props=i,o.state=c,o.context=u,i=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,kT(n,t),l=t.memoizedProps,u=t.type===t.elementType?l:ts(t.type,l),o.props=u,d=t.pendingProps,f=o.context,c=e.contextType,typeof c=="object"&&c!==null?c=Xi(c):(c=$n(e)?hc:mn.current,c=Oh(t,c));var p=e.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&eS(t,o,i,c),mo=!1,f=t.memoizedState,o.state=f,wy(t,i,o,s);var v=t.memoizedState;l!==d||f!==v||Hn.current||mo?(typeof p=="function"&&(hw(t,e,p,i),v=t.memoizedState),(u=mo||tS(t,e,u,i,f,v,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=v),o.props=i,o.state=v,o.context=c,i=u):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),i=!1)}return mw(n,t,e,i,r,s)}function mw(n,t,e,i,s,r){JT(n,t);var o=(t.flags&128)!==0;if(!i&&!o)return s&&GA(t,e,!1),eo(n,t,r);i=t.stateNode,SR.current=t;var l=o&&typeof e.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,n!==null&&o?(t.child=jh(t,n.child,null,r),t.child=jh(t,null,l,r)):Sn(n,t,l,r),t.memoizedState=i.state,s&&GA(t,e,!0),t.child}function tk(n){var t=n.stateNode;t.pendingContext?WA(n,t.pendingContext,t.pendingContext!==t.context):t.context&&WA(n,t.context,!1),q1(n,t.containerInfo)}function lS(n,t,e,i,s){return Bh(),$1(s),t.flags|=256,Sn(n,t,e,i),t.child}var gw={dehydrated:null,treeContext:null,retryLane:0};function yw(n){return{baseLanes:n,cachePool:null,transitions:null}}function ek(n,t,e){var i=t.pendingProps,s=te.current,r=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(r=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Ut(te,s&1),n===null)return cw(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,n=i.fallback,r?(i=t.mode,r=t.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=S0(o,i,0,null),n=lc(n,i,e,null),r.return=t,n.return=t,r.sibling=n,t.child=r,t.child.memoizedState=yw(e),t.memoizedState=gw,n):sx(t,o));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return CR(n,t,o,i,l,s,e);if(r){r=i.fallback,o=t.mode,s=n.child,l=s.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=c,t.deletions=null):(i=wa(s,c),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?r=wa(l,r):(r=lc(r,o,e,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=n.child.memoizedState,o=o===null?yw(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~e,t.memoizedState=gw,i}return r=n.child,n=r.sibling,i=wa(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=e),i.return=t,i.sibling=null,n!==null&&(e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)),t.child=i,t.memoizedState=null,i}function sx(n,t){return t=S0({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function $m(n,t,e,i){return i!==null&&$1(i),jh(t,n.child,null,e),n=sx(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function CR(n,t,e,i,s,r,o){if(e)return t.flags&256?(t.flags&=-257,i=ov(Error(B(422))),$m(n,t,o,i)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(r=i.fallback,s=t.mode,i=S0({mode:"visible",children:i.children},s,0,null),r=lc(r,s,o,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&jh(t,n.child,null,o),t.child.memoizedState=yw(o),t.memoizedState=gw,r);if(!(t.mode&1))return $m(n,t,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,r=Error(B(419)),i=ov(r,i,void 0),$m(n,t,o,i)}if(l=(o&n.childLanes)!==0,zn||l){if(i=ze,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,to(n,s),ys(i,n,s,-1))}return ux(),i=ov(Error(B(421))),$m(n,t,o,i)}return s.data==="$?"?(t.flags|=128,t.child=n.child,t=OR.bind(null,n),s._reactRetry=t,null):(n=r.treeContext,mi=ma(s.nextSibling),gi=t,qt=!0,ps=null,n!==null&&(ji[Vi++]=Gr,ji[Vi++]=Xr,ji[Vi++]=dc,Gr=n.id,Xr=n.overflow,dc=t),t=sx(t,i.children),t.flags|=4096,t)}function cS(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),uw(n.return,t,e)}function av(n,t,e,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=e,r.tailMode=s)}function nk(n,t,e){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(Sn(n,t,i.children,e),i=te.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&cS(n,e,t);else if(n.tag===19)cS(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Ut(te,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(e=t.child,s=null;e!==null;)n=e.alternate,n!==null&&by(n)===null&&(s=e),e=e.sibling;e=s,e===null?(s=t.child,t.child=null):(s=e.sibling,e.sibling=null),av(t,!1,s,e,r);break;case"backwards":for(e=null,s=t.child,t.child=null;s!==null;){if(n=s.alternate,n!==null&&by(n)===null){t.child=s;break}n=s.sibling,s.sibling=e,e=s,s=n}av(t,!0,e,null,r);break;case"together":av(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mg(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function eo(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),pc|=t.lanes,!(e&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(B(153));if(t.child!==null){for(n=t.child,e=wa(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=wa(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function ER(n,t,e){switch(t.tag){case 3:tk(t),Bh();break;case 5:_T(t);break;case 1:$n(t.type)&&py(t);break;case 4:q1(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Ut(yy,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ut(te,te.current&1),t.flags|=128,null):e&t.child.childLanes?ek(n,t,e):(Ut(te,te.current&1),n=eo(n,t,e),n!==null?n.sibling:null);Ut(te,te.current&1);break;case 19:if(i=(e&t.childLanes)!==0,n.flags&128){if(i)return nk(n,t,e);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ut(te,te.current),i)break;return null;case 22:case 23:return t.lanes=0,ZT(n,t,e)}return eo(n,t,e)}var ik,vw,sk,rk;ik=function(n,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)n.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};vw=function(){};sk=function(n,t,e,i){var s=n.memoizedProps;if(s!==i){n=t.stateNode,Ha(Qs.current);var r=null;switch(e){case"input":s=Vv(n,s),i=Vv(n,i),r=[];break;case"select":s=se({},s,{value:void 0}),i=se({},i,{value:void 0}),r=[];break;case"textarea":s=Hv(n,s),i=Hv(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=dy)}Wv(e,i);var o;e=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qd.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var c=i[u];if(l=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(e||(e={}),e[o]=c[o])}else e||(r||(r=[]),r.push(u,e)),e=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$t("scroll",n),r||l===c||(r=[])):(r=r||[]).push(u,c))}e&&(r=r||[]).push("style",e);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};rk=function(n,t,e,i){e!==i&&(t.flags|=4)};function id(n,t){if(!qt)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function rn(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function TR(n,t,e){var i=t.pendingProps;switch(H1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(t),null;case 1:return $n(t.type)&&fy(),rn(t),null;case 3:return i=t.stateNode,Vh(),Gt(Hn),Gt(mn),Z1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Um(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ps!==null&&(Tw(ps),ps=null))),vw(n,t),rn(t),null;case 5:Q1(t);var s=Ha(uf.current);if(e=t.type,n!==null&&t.stateNode!=null)sk(n,t,e,i,s),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(B(166));return rn(t),null}if(n=Ha(Qs.current),Um(t)){i=t.stateNode,e=t.type;var r=t.memoizedProps;switch(i[Ys]=t,i[lf]=r,n=(t.mode&1)!==0,e){case"dialog":$t("cancel",i),$t("close",i);break;case"iframe":case"object":case"embed":$t("load",i);break;case"video":case"audio":for(s=0;s<pd.length;s++)$t(pd[s],i);break;case"source":$t("error",i);break;case"img":case"image":case"link":$t("error",i),$t("load",i);break;case"details":$t("toggle",i);break;case"input":vA(i,r),$t("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},$t("invalid",i);break;case"textarea":bA(i,r),$t("invalid",i)}Wv(e,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?i.textContent!==l&&(r.suppressHydrationWarning!==!0&&zm(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&zm(i.textContent,l,n),s=["children",""+l]):Qd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$t("scroll",i)}switch(e){case"input":Lm(i),wA(i,r,!0);break;case"textarea":Lm(i),xA(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=dy)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=LE(e)),n==="http://www.w3.org/1999/xhtml"?e==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(e,{is:i.is}):(n=o.createElement(e),e==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,e),n[Ys]=t,n[lf]=i,ik(n,t,!1,!1),t.stateNode=n;t:{switch(o=Gv(e,i),e){case"dialog":$t("cancel",n),$t("close",n),s=i;break;case"iframe":case"object":case"embed":$t("load",n),s=i;break;case"video":case"audio":for(s=0;s<pd.length;s++)$t(pd[s],n);s=i;break;case"source":$t("error",n),s=i;break;case"img":case"image":case"link":$t("error",n),$t("load",n),s=i;break;case"details":$t("toggle",n),s=i;break;case"input":vA(n,i),s=Vv(n,i),$t("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=se({},i,{value:void 0}),$t("invalid",n);break;case"textarea":bA(n,i),s=Hv(n,i),$t("invalid",n);break;default:s=i}Wv(e,s),l=s;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?FE(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&NE(n,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&Zd(n,c):typeof c=="number"&&Zd(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Qd.hasOwnProperty(r)?c!=null&&r==="onScroll"&&$t("scroll",n):c!=null&&_1(n,r,c,o))}switch(e){case"input":Lm(n),wA(n,i,!1);break;case"textarea":Lm(n),xA(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ba(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?iu(n,!!i.multiple,r,!1):i.defaultValue!=null&&iu(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=dy)}switch(e){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rn(t),null;case 6:if(n&&t.stateNode!=null)rk(n,t,n.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(B(166));if(e=Ha(uf.current),Ha(Qs.current),Um(t)){if(i=t.stateNode,e=t.memoizedProps,i[Ys]=t,(r=i.nodeValue!==e)&&(n=gi,n!==null))switch(n.tag){case 3:zm(i.nodeValue,e,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&zm(i.nodeValue,e,(n.mode&1)!==0)}r&&(t.flags|=4)}else i=(e.nodeType===9?e:e.ownerDocument).createTextNode(i),i[Ys]=t,t.stateNode=i}return rn(t),null;case 13:if(Gt(te),i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(qt&&mi!==null&&t.mode&1&&!(t.flags&128))ST(),Bh(),t.flags|=98560,r=!1;else if(r=Um(t),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(B(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(B(317));r[Ys]=t}else Bh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;rn(t),r=!1}else ps!==null&&(Tw(ps),ps=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(n===null||te.current&1?Me===0&&(Me=3):ux())),t.updateQueue!==null&&(t.flags|=4),rn(t),null);case 4:return Vh(),vw(n,t),n===null&&of(t.stateNode.containerInfo),rn(t),null;case 10:return X1(t.type._context),rn(t),null;case 17:return $n(t.type)&&fy(),rn(t),null;case 19:if(Gt(te),r=t.memoizedState,r===null)return rn(t),null;if(i=(t.flags&128)!==0,o=r.rendering,o===null)if(i)id(r,!1);else{if(Me!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(o=by(n),o!==null){for(t.flags|=128,id(r,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=e,e=t.child;e!==null;)r=e,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e=e.sibling;return Ut(te,te.current&1|2),t.child}n=n.sibling}r.tail!==null&&ge()>Uh&&(t.flags|=128,i=!0,id(r,!1),t.lanes=4194304)}else{if(!i)if(n=by(o),n!==null){if(t.flags|=128,i=!0,e=n.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),id(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!qt)return rn(t),null}else 2*ge()-r.renderingStartTime>Uh&&e!==1073741824&&(t.flags|=128,i=!0,id(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=ge(),t.sibling=null,e=te.current,Ut(te,i?e&1|2:e&1),t):(rn(t),null);case 22:case 23:return cx(),i=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?di&1073741824&&(rn(t),t.subtreeFlags&6&&(t.flags|=8192)):rn(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function kR(n,t){switch(H1(t),t.tag){case 1:return $n(t.type)&&fy(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return Vh(),Gt(Hn),Gt(mn),Z1(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return Q1(t),null;case 13:if(Gt(te),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(B(340));Bh()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Gt(te),null;case 4:return Vh(),null;case 10:return X1(t.type._context),null;case 22:case 23:return cx(),null;case 24:return null;default:return null}}var Wm=!1,fn=!1,_R=typeof WeakSet=="function"?WeakSet:Set,Y=null;function $c(n,t){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){he(n,t,i)}else e.current=null}function ww(n,t,e){try{e()}catch(i){he(n,t,i)}}var uS=!1;function PR(n,t){if(nw=cy,n=uT(),z1(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var o=0,l=-1,c=-1,u=0,h=0,d=n,f=null;e:for(;;){for(var p;d!==e||s!==0&&d.nodeType!==3||(l=o+s),d!==r||i!==0&&d.nodeType!==3||(c=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break e;if(f===e&&++u===s&&(l=o),f===r&&++h===i&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}e=l===-1||c===-1?null:{start:l,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(iw={focusedElem:n,selectionRange:e},cy=!1,Y=t;Y!==null;)if(t=Y,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,Y=n;else for(;Y!==null;){t=Y;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,S=v.memoizedState,m=t.stateNode,y=m.getSnapshotBeforeUpdate(t.elementType===t.type?b:ts(t.type,b),S);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(C){he(t,t.return,C)}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}return v=uS,uS=!1,v}function Hd(n,t,e){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&ww(t,e,r)}s=s.next}while(s!==i)}}function x0(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&n)===n){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}}function bw(n){var t=n.ref;if(t!==null){var e=n.stateNode;switch(n.tag){case 5:n=e;break;default:n=e}typeof t=="function"?t(n):t.current=n}}function ok(n){var t=n.alternate;t!==null&&(n.alternate=null,ok(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[Ys],delete t[lf],delete t[ow],delete t[hR],delete t[dR])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function ak(n){return n.tag===5||n.tag===3||n.tag===4}function hS(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||ak(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function xw(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(n,t):e.insertBefore(n,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(n,e)):(t=e,t.appendChild(n)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=dy));else if(i!==4&&(n=n.child,n!==null))for(xw(n,t,e),n=n.sibling;n!==null;)xw(n,t,e),n=n.sibling}function Aw(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Aw(n,t,e),n=n.sibling;n!==null;)Aw(n,t,e),n=n.sibling}var Ke=null,fs=!1;function co(n,t,e){for(e=e.child;e!==null;)lk(n,t,e),e=e.sibling}function lk(n,t,e){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(f0,e)}catch{}switch(e.tag){case 5:fn||$c(e,t);case 6:var i=Ke,s=fs;Ke=null,co(n,t,e),Ke=i,fs=s,Ke!==null&&(fs?(n=Ke,e=e.stateNode,n.nodeType===8?n.parentNode.removeChild(e):n.removeChild(e)):Ke.removeChild(e.stateNode));break;case 18:Ke!==null&&(fs?(n=Ke,e=e.stateNode,n.nodeType===8?tv(n.parentNode,e):n.nodeType===1&&tv(n,e),nf(n)):tv(Ke,e.stateNode));break;case 4:i=Ke,s=fs,Ke=e.stateNode.containerInfo,fs=!0,co(n,t,e),Ke=i,fs=s;break;case 0:case 11:case 14:case 15:if(!fn&&(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&ww(e,t,o),s=s.next}while(s!==i)}co(n,t,e);break;case 1:if(!fn&&($c(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(l){he(e,t,l)}co(n,t,e);break;case 21:co(n,t,e);break;case 22:e.mode&1?(fn=(i=fn)||e.memoizedState!==null,co(n,t,e),fn=i):co(n,t,e);break;default:co(n,t,e)}}function dS(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var e=n.stateNode;e===null&&(e=n.stateNode=new _R),t.forEach(function(i){var s=BR.bind(null,n,i);e.has(i)||(e.add(i),i.then(s,s))})}}function qi(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var s=e[i];try{var r=n,o=t,l=o;t:for(;l!==null;){switch(l.tag){case 5:Ke=l.stateNode,fs=!1;break t;case 3:Ke=l.stateNode.containerInfo,fs=!0;break t;case 4:Ke=l.stateNode.containerInfo,fs=!0;break t}l=l.return}if(Ke===null)throw Error(B(160));lk(r,o,s),Ke=null,fs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){he(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ck(t,n),t=t.sibling}function ck(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(qi(t,n),xs(n),i&4){try{Hd(3,n,n.return),x0(3,n)}catch(b){he(n,n.return,b)}try{Hd(5,n,n.return)}catch(b){he(n,n.return,b)}}break;case 1:qi(t,n),xs(n),i&512&&e!==null&&$c(e,e.return);break;case 5:if(qi(t,n),xs(n),i&512&&e!==null&&$c(e,e.return),n.flags&32){var s=n.stateNode;try{Zd(s,"")}catch(b){he(n,n.return,b)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=e!==null?e.memoizedProps:r,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&DE(s,r),Gv(l,o);var u=Gv(l,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?FE(s,d):h==="dangerouslySetInnerHTML"?NE(s,d):h==="children"?Zd(s,d):_1(s,h,d,u)}switch(l){case"input":zv(s,r);break;case"textarea":RE(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?iu(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?iu(s,!!r.multiple,r.defaultValue,!0):iu(s,!!r.multiple,r.multiple?[]:"",!1))}s[lf]=r}catch(b){he(n,n.return,b)}}break;case 6:if(qi(t,n),xs(n),i&4){if(n.stateNode===null)throw Error(B(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(b){he(n,n.return,b)}}break;case 3:if(qi(t,n),xs(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{nf(t.containerInfo)}catch(b){he(n,n.return,b)}break;case 4:qi(t,n),xs(n);break;case 13:qi(t,n),xs(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(ax=ge())),i&4&&dS(n);break;case 22:if(h=e!==null&&e.memoizedState!==null,n.mode&1?(fn=(u=fn)||h,qi(t,n),fn=u):qi(t,n),xs(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(Y=n,h=n.child;h!==null;){for(d=Y=h;Y!==null;){switch(f=Y,p=f.child,f.tag){case 0:case 11:case 14:case 15:Hd(4,f,f.return);break;case 1:$c(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,e=f.return;try{t=i,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(b){he(i,e,b)}}break;case 5:$c(f,f.return);break;case 22:if(f.memoizedState!==null){pS(d);continue}}p!==null?(p.return=f,Y=p):pS(d)}h=h.sibling}t:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=IE("display",o))}catch(b){he(n,n.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){he(n,n.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break t;for(;d.sibling===null;){if(d.return===null||d.return===n)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:qi(t,n),xs(n),i&4&&dS(n);break;case 21:break;default:qi(t,n),xs(n)}}function xs(n){var t=n.flags;if(t&2){try{t:{for(var e=n.return;e!==null;){if(ak(e)){var i=e;break t}e=e.return}throw Error(B(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Zd(s,""),i.flags&=-33);var r=hS(n);Aw(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,l=hS(n);xw(n,l,o);break;default:throw Error(B(161))}}catch(c){he(n,n.return,c)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function MR(n,t,e){Y=n,uk(n)}function uk(n,t,e){for(var i=(n.mode&1)!==0;Y!==null;){var s=Y,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Wm;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||fn;l=Wm;var u=fn;if(Wm=o,(fn=c)&&!u)for(Y=s;Y!==null;)o=Y,c=o.child,o.tag===22&&o.memoizedState!==null?mS(s):c!==null?(c.return=o,Y=c):mS(s);for(;r!==null;)Y=r,uk(r),r=r.sibling;Y=s,Wm=l,fn=u}fS(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,Y=r):fS(n)}}function fS(n){for(;Y!==null;){var t=Y;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fn||x0(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!fn)if(e===null)i.componentDidMount();else{var s=t.elementType===t.type?e.memoizedProps:ts(t.type,e.memoizedProps);i.componentDidUpdate(s,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&QA(t,r,i);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}QA(t,o,e)}break;case 5:var l=t.stateNode;if(e===null&&t.flags&4){e=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&nf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}fn||t.flags&512&&bw(t)}catch(f){he(t,t.return,f)}}if(t===n){Y=null;break}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}}function pS(n){for(;Y!==null;){var t=Y;if(t===n){Y=null;break}var e=t.sibling;if(e!==null){e.return=t.return,Y=e;break}Y=t.return}}function mS(n){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{x0(4,t)}catch(c){he(t,e,c)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(c){he(t,s,c)}}var r=t.return;try{bw(t)}catch(c){he(t,r,c)}break;case 5:var o=t.return;try{bw(t)}catch(c){he(t,o,c)}}}catch(c){he(t,t.return,c)}if(t===n){Y=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Y=l;break}Y=t.return}}var DR=Math.ceil,Sy=oo.ReactCurrentDispatcher,rx=oo.ReactCurrentOwner,$i=oo.ReactCurrentBatchConfig,bt=0,ze=null,Ae=null,tn=0,di=0,Wc=_a(0),Me=0,pf=null,pc=0,A0=0,ox=0,$d=null,Vn=null,ax=0,Uh=1/0,ar=null,Cy=!1,Sw=null,ya=null,Gm=!1,ha=null,Ey=0,Wd=0,Cw=null,gg=-1,yg=0;function Tn(){return bt&6?ge():gg!==-1?gg:gg=ge()}function va(n){return n.mode&1?bt&2&&tn!==0?tn&-tn:pR.transition!==null?(yg===0&&(yg=YE()),yg):(n=_t,n!==0||(n=window.event,n=n===void 0?16:eT(n.type)),n):1}function ys(n,t,e,i){if(50<Wd)throw Wd=0,Cw=null,Error(B(185));gm(n,e,i),(!(bt&2)||n!==ze)&&(n===ze&&(!(bt&2)&&(A0|=e),Me===4&&yo(n,tn)),Wn(n,i),e===1&&bt===0&&!(t.mode&1)&&(Uh=ge()+500,v0&&Pa()))}function Wn(n,t){var e=n.callbackNode;pD(n,t);var i=ly(n,n===ze?tn:0);if(i===0)e!==null&&CA(e),n.callbackNode=null,n.callbackPriority=0;else if(t=i&-i,n.callbackPriority!==t){if(e!=null&&CA(e),t===1)n.tag===0?fR(gS.bind(null,n)):bT(gS.bind(null,n)),cR(function(){!(bt&6)&&Pa()}),e=null;else{switch(KE(i)){case 1:e=L1;break;case 4:e=GE;break;case 16:e=ay;break;case 536870912:e=XE;break;default:e=ay}e=vk(e,hk.bind(null,n))}n.callbackPriority=t,n.callbackNode=e}}function hk(n,t){if(gg=-1,yg=0,bt&6)throw Error(B(327));var e=n.callbackNode;if(lu()&&n.callbackNode!==e)return null;var i=ly(n,n===ze?tn:0);if(i===0)return null;if(i&30||i&n.expiredLanes||t)t=Ty(n,i);else{t=i;var s=bt;bt|=2;var r=fk();(ze!==n||tn!==t)&&(ar=null,Uh=ge()+500,ac(n,t));do try{NR();break}catch(l){dk(n,l)}while(!0);G1(),Sy.current=r,bt=s,Ae!==null?t=0:(ze=null,tn=0,t=Me)}if(t!==0){if(t===2&&(s=Qv(n),s!==0&&(i=s,t=Ew(n,s))),t===1)throw e=pf,ac(n,0),yo(n,i),Wn(n,ge()),e;if(t===6)yo(n,i);else{if(s=n.current.alternate,!(i&30)&&!RR(s)&&(t=Ty(n,i),t===2&&(r=Qv(n),r!==0&&(i=r,t=Ew(n,r))),t===1))throw e=pf,ac(n,0),yo(n,i),Wn(n,ge()),e;switch(n.finishedWork=s,n.finishedLanes=i,t){case 0:case 1:throw Error(B(345));case 2:La(n,Vn,ar);break;case 3:if(yo(n,i),(i&130023424)===i&&(t=ax+500-ge(),10<t)){if(ly(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Tn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=rw(La.bind(null,n,Vn,ar),t);break}La(n,Vn,ar);break;case 4:if(yo(n,i),(i&4194240)===i)break;for(t=n.eventTimes,s=-1;0<i;){var o=31-gs(i);r=1<<o,o=t[o],o>s&&(s=o),i&=~r}if(i=s,i=ge()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*DR(i/1960))-i,10<i){n.timeoutHandle=rw(La.bind(null,n,Vn,ar),i);break}La(n,Vn,ar);break;case 5:La(n,Vn,ar);break;default:throw Error(B(329))}}}return Wn(n,ge()),n.callbackNode===e?hk.bind(null,n):null}function Ew(n,t){var e=$d;return n.current.memoizedState.isDehydrated&&(ac(n,t).flags|=256),n=Ty(n,t),n!==2&&(t=Vn,Vn=e,t!==null&&Tw(t)),n}function Tw(n){Vn===null?Vn=n:Vn.push.apply(Vn,n)}function RR(n){for(var t=n;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var i=0;i<e.length;i++){var s=e[i],r=s.getSnapshot;s=s.value;try{if(!vs(r(),s))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function yo(n,t){for(t&=~ox,t&=~A0,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var e=31-gs(t),i=1<<e;n[e]=-1,t&=~i}}function gS(n){if(bt&6)throw Error(B(327));lu();var t=ly(n,0);if(!(t&1))return Wn(n,ge()),null;var e=Ty(n,t);if(n.tag!==0&&e===2){var i=Qv(n);i!==0&&(t=i,e=Ew(n,i))}if(e===1)throw e=pf,ac(n,0),yo(n,t),Wn(n,ge()),e;if(e===6)throw Error(B(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,La(n,Vn,ar),Wn(n,ge()),null}function lx(n,t){var e=bt;bt|=1;try{return n(t)}finally{bt=e,bt===0&&(Uh=ge()+500,v0&&Pa())}}function mc(n){ha!==null&&ha.tag===0&&!(bt&6)&&lu();var t=bt;bt|=1;var e=$i.transition,i=_t;try{if($i.transition=null,_t=1,n)return n()}finally{_t=i,$i.transition=e,bt=t,!(bt&6)&&Pa()}}function cx(){di=Wc.current,Gt(Wc)}function ac(n,t){n.finishedWork=null,n.finishedLanes=0;var e=n.timeoutHandle;if(e!==-1&&(n.timeoutHandle=-1,lR(e)),Ae!==null)for(e=Ae.return;e!==null;){var i=e;switch(H1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&fy();break;case 3:Vh(),Gt(Hn),Gt(mn),Z1();break;case 5:Q1(i);break;case 4:Vh();break;case 13:Gt(te);break;case 19:Gt(te);break;case 10:X1(i.type._context);break;case 22:case 23:cx()}e=e.return}if(ze=n,Ae=n=wa(n.current,null),tn=di=t,Me=0,pf=null,ox=A0=pc=0,Vn=$d=null,Ua!==null){for(t=0;t<Ua.length;t++)if(e=Ua[t],i=e.interleaved,i!==null){e.interleaved=null;var s=i.next,r=e.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}e.pending=i}Ua=null}return n}function dk(n,t){do{var e=Ae;try{if(G1(),fg.current=Ay,xy){for(var i=ne.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}xy=!1}if(fc=0,Ve=Pe=ne=null,Ud=!1,hf=0,rx.current=null,e===null||e.return===null){Me=1,pf=t,Ae=null;break}t:{var r=n,o=e.return,l=e,c=t;if(t=tn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=iS(o);if(p!==null){p.flags&=-257,sS(p,o,l,r,t),p.mode&1&&nS(r,u,t),t=p,c=u;var v=t.updateQueue;if(v===null){var b=new Set;b.add(c),t.updateQueue=b}else v.add(c);break t}else{if(!(t&1)){nS(r,u,t),ux();break t}c=Error(B(426))}}else if(qt&&l.mode&1){var S=iS(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),sS(S,o,l,r,t),$1(zh(c,l));break t}}r=c=zh(c,l),Me!==4&&(Me=2),$d===null?$d=[r]:$d.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var m=KT(r,c,t);qA(r,m);break t;case 1:l=c;var y=r.type,w=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ya===null||!ya.has(w)))){r.flags|=65536,t&=-t,r.lanes|=t;var C=qT(r,l,t);qA(r,C);break t}}r=r.return}while(r!==null)}mk(e)}catch(E){t=E,Ae===e&&e!==null&&(Ae=e=e.return);continue}break}while(!0)}function fk(){var n=Sy.current;return Sy.current=Ay,n===null?Ay:n}function ux(){(Me===0||Me===3||Me===2)&&(Me=4),ze===null||!(pc&268435455)&&!(A0&268435455)||yo(ze,tn)}function Ty(n,t){var e=bt;bt|=2;var i=fk();(ze!==n||tn!==t)&&(ar=null,ac(n,t));do try{LR();break}catch(s){dk(n,s)}while(!0);if(G1(),bt=e,Sy.current=i,Ae!==null)throw Error(B(261));return ze=null,tn=0,Me}function LR(){for(;Ae!==null;)pk(Ae)}function NR(){for(;Ae!==null&&!rD();)pk(Ae)}function pk(n){var t=yk(n.alternate,n,di);n.memoizedProps=n.pendingProps,t===null?mk(n):Ae=t,rx.current=null}function mk(n){var t=n;do{var e=t.alternate;if(n=t.return,t.flags&32768){if(e=kR(e,t),e!==null){e.flags&=32767,Ae=e;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Me=6,Ae=null;return}}else if(e=TR(e,t,di),e!==null){Ae=e;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=n}while(t!==null);Me===0&&(Me=5)}function La(n,t,e){var i=_t,s=$i.transition;try{$i.transition=null,_t=1,IR(n,t,e,i)}finally{$i.transition=s,_t=i}return null}function IR(n,t,e,i){do lu();while(ha!==null);if(bt&6)throw Error(B(327));e=n.finishedWork;var s=n.finishedLanes;if(e===null)return null;if(n.finishedWork=null,n.finishedLanes=0,e===n.current)throw Error(B(177));n.callbackNode=null,n.callbackPriority=0;var r=e.lanes|e.childLanes;if(mD(n,r),n===ze&&(Ae=ze=null,tn=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Gm||(Gm=!0,vk(ay,function(){return lu(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=$i.transition,$i.transition=null;var o=_t;_t=1;var l=bt;bt|=4,rx.current=null,PR(n,e),ck(e,n),eR(iw),cy=!!nw,iw=nw=null,n.current=e,MR(e),oD(),bt=l,_t=o,$i.transition=r}else n.current=e;if(Gm&&(Gm=!1,ha=n,Ey=s),r=n.pendingLanes,r===0&&(ya=null),cD(e.stateNode),Wn(n,ge()),t!==null)for(i=n.onRecoverableError,e=0;e<t.length;e++)s=t[e],i(s.value,{componentStack:s.stack,digest:s.digest});if(Cy)throw Cy=!1,n=Sw,Sw=null,n;return Ey&1&&n.tag!==0&&lu(),r=n.pendingLanes,r&1?n===Cw?Wd++:(Wd=0,Cw=n):Wd=0,Pa(),null}function lu(){if(ha!==null){var n=KE(Ey),t=$i.transition,e=_t;try{if($i.transition=null,_t=16>n?16:n,ha===null)var i=!1;else{if(n=ha,ha=null,Ey=0,bt&6)throw Error(B(331));var s=bt;for(bt|=4,Y=n.current;Y!==null;){var r=Y,o=r.child;if(Y.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Y=u;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:Hd(8,h,r)}var d=h.child;if(d!==null)d.return=h,Y=d;else for(;Y!==null;){h=Y;var f=h.sibling,p=h.return;if(ok(h),h===u){Y=null;break}if(f!==null){f.return=p,Y=f;break}Y=p}}}var v=r.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}Y=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,Y=o;else t:for(;Y!==null;){if(r=Y,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Hd(9,r,r.return)}var m=r.sibling;if(m!==null){m.return=r.return,Y=m;break t}Y=r.return}}var y=n.current;for(Y=y;Y!==null;){o=Y;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Y=w;else t:for(o=y;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:x0(9,l)}}catch(E){he(l,l.return,E)}if(l===o){Y=null;break t}var C=l.sibling;if(C!==null){C.return=l.return,Y=C;break t}Y=l.return}}if(bt=s,Pa(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(f0,n)}catch{}i=!0}return i}finally{_t=e,$i.transition=t}}return!1}function yS(n,t,e){t=zh(e,t),t=KT(n,t,1),n=ga(n,t,1),t=Tn(),n!==null&&(gm(n,1,t),Wn(n,t))}function he(n,t,e){if(n.tag===3)yS(n,n,e);else for(;t!==null;){if(t.tag===3){yS(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ya===null||!ya.has(i))){n=zh(e,n),n=qT(t,n,1),t=ga(t,n,1),n=Tn(),t!==null&&(gm(t,1,n),Wn(t,n));break}}t=t.return}}function FR(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),t=Tn(),n.pingedLanes|=n.suspendedLanes&e,ze===n&&(tn&e)===e&&(Me===4||Me===3&&(tn&130023424)===tn&&500>ge()-ax?ac(n,0):ox|=e),Wn(n,t)}function gk(n,t){t===0&&(n.mode&1?(t=Fm,Fm<<=1,!(Fm&130023424)&&(Fm=4194304)):t=1);var e=Tn();n=to(n,t),n!==null&&(gm(n,t,e),Wn(n,e))}function OR(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),gk(n,e)}function BR(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(e=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(B(314))}i!==null&&i.delete(t),gk(n,e)}var yk;yk=function(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps||Hn.current)zn=!0;else{if(!(n.lanes&e)&&!(t.flags&128))return zn=!1,ER(n,t,e);zn=!!(n.flags&131072)}else zn=!1,qt&&t.flags&1048576&&xT(t,gy,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;mg(n,t),n=t.pendingProps;var s=Oh(t,mn.current);au(t,e),s=tx(null,t,i,n,s,e);var r=ex();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$n(i)?(r=!0,py(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,K1(t),s.updater=b0,t.stateNode=s,s._reactInternals=t,dw(t,i,n,e),t=mw(null,t,i,!0,r,e)):(t.tag=0,qt&&r&&U1(t),Sn(null,t,s,e),t=t.child),t;case 16:i=t.elementType;t:{switch(mg(n,t),n=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=VR(i),n=ts(i,n),s){case 0:t=pw(null,t,i,n,e);break t;case 1:t=aS(null,t,i,n,e);break t;case 11:t=rS(null,t,i,n,e);break t;case 14:t=oS(null,t,i,ts(i.type,n),e);break t}throw Error(B(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ts(i,s),pw(n,t,i,s,e);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ts(i,s),aS(n,t,i,s,e);case 3:t:{if(tk(t),n===null)throw Error(B(387));i=t.pendingProps,r=t.memoizedState,s=r.element,kT(n,t),wy(t,i,null,e);var o=t.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=zh(Error(B(423)),t),t=lS(n,t,i,e,s);break t}else if(i!==s){s=zh(Error(B(424)),t),t=lS(n,t,i,e,s);break t}else for(mi=ma(t.stateNode.containerInfo.firstChild),gi=t,qt=!0,ps=null,e=ET(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(Bh(),i===s){t=eo(n,t,e);break t}Sn(n,t,i,e)}t=t.child}return t;case 5:return _T(t),n===null&&cw(t),i=t.type,s=t.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,sw(i,s)?o=null:r!==null&&sw(i,r)&&(t.flags|=32),JT(n,t),Sn(n,t,o,e),t.child;case 6:return n===null&&cw(t),null;case 13:return ek(n,t,e);case 4:return q1(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=jh(t,null,i,e):Sn(n,t,i,e),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ts(i,s),rS(n,t,i,s,e);case 7:return Sn(n,t,t.pendingProps,e),t.child;case 8:return Sn(n,t,t.pendingProps.children,e),t.child;case 12:return Sn(n,t,t.pendingProps.children,e),t.child;case 10:t:{if(i=t.type._context,s=t.pendingProps,r=t.memoizedProps,o=s.value,Ut(yy,i._currentValue),i._currentValue=o,r!==null)if(vs(r.value,o)){if(r.children===s.children&&!Hn.current){t=eo(n,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(r.tag===1){c=Yr(-1,e&-e),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=e,c=r.alternate,c!==null&&(c.lanes|=e),uw(r.return,e,t),l.lanes|=e;break}c=c.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(B(341));o.lanes|=e,l=o.alternate,l!==null&&(l.lanes|=e),uw(o,e,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Sn(n,t,s.children,e),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,au(t,e),s=Xi(s),i=i(s),t.flags|=1,Sn(n,t,i,e),t.child;case 14:return i=t.type,s=ts(i,t.pendingProps),s=ts(i.type,s),oS(n,t,i,s,e);case 15:return QT(n,t,t.type,t.pendingProps,e);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:ts(i,s),mg(n,t),t.tag=1,$n(i)?(n=!0,py(t)):n=!1,au(t,e),YT(t,i,s),dw(t,i,s,e),mw(null,t,i,!0,n,e);case 19:return nk(n,t,e);case 22:return ZT(n,t,e)}throw Error(B(156,t.tag))};function vk(n,t){return WE(n,t)}function jR(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ui(n,t,e,i){return new jR(n,t,e,i)}function hx(n){return n=n.prototype,!(!n||!n.isReactComponent)}function VR(n){if(typeof n=="function")return hx(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M1)return 11;if(n===D1)return 14}return 2}function wa(n,t){var e=n.alternate;return e===null?(e=Ui(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&14680064,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e}function vg(n,t,e,i,s,r){var o=2;if(i=n,typeof n=="function")hx(n)&&(o=1);else if(typeof n=="string")o=5;else t:switch(n){case Ic:return lc(e.children,s,r,t);case P1:o=8,s|=8;break;case Fv:return n=Ui(12,e,t,s|2),n.elementType=Fv,n.lanes=r,n;case Ov:return n=Ui(13,e,t,s),n.elementType=Ov,n.lanes=r,n;case Bv:return n=Ui(19,e,t,s),n.elementType=Bv,n.lanes=r,n;case _E:return S0(e,s,r,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case TE:o=10;break t;case kE:o=9;break t;case M1:o=11;break t;case D1:o=14;break t;case po:o=16,i=null;break t}throw Error(B(130,n==null?n:typeof n,""))}return t=Ui(o,e,t,s),t.elementType=n,t.type=i,t.lanes=r,t}function lc(n,t,e,i){return n=Ui(7,n,i,t),n.lanes=e,n}function S0(n,t,e,i){return n=Ui(22,n,i,t),n.elementType=_E,n.lanes=e,n.stateNode={isHidden:!1},n}function lv(n,t,e){return n=Ui(6,n,null,t),n.lanes=e,n}function cv(n,t,e){return t=Ui(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function zR(n,t,e,i,s){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=H0(0),this.expirationTimes=H0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H0(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dx(n,t,e,i,s,r,o,l,c){return n=new zR(n,t,e,l,c),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Ui(3,null,null,t),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},K1(r),n}function UR(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nc,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}function wk(n){if(!n)return xa;n=n._reactInternals;t:{if(bc(n)!==n||n.tag!==1)throw Error(B(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if($n(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(B(171))}if(n.tag===1){var e=n.type;if($n(e))return wT(n,e,t)}return t}function bk(n,t,e,i,s,r,o,l,c){return n=dx(e,i,!0,n,s,r,o,l,c),n.context=wk(null),e=n.current,i=Tn(),s=va(e),r=Yr(i,s),r.callback=t??null,ga(e,r,s),n.current.lanes=s,gm(n,s,i),Wn(n,i),n}function C0(n,t,e,i){var s=t.current,r=Tn(),o=va(s);return e=wk(e),t.context===null?t.context=e:t.pendingContext=e,t=Yr(r,o),t.payload={element:n},i=i===void 0?null:i,i!==null&&(t.callback=i),n=ga(s,t,o),n!==null&&(ys(n,s,o,r),dg(n,s,o)),o}function ky(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function vS(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function fx(n,t){vS(n,t),(n=n.alternate)&&vS(n,t)}function HR(){return null}var xk=typeof reportError=="function"?reportError:function(n){console.error(n)};function px(n){this._internalRoot=n}E0.prototype.render=px.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(B(409));C0(n,t,null,null)};E0.prototype.unmount=px.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;mc(function(){C0(null,n,null,null)}),t[Jr]=null}};function E0(n){this._internalRoot=n}E0.prototype.unstable_scheduleHydration=function(n){if(n){var t=ZE();n={blockedOn:null,target:n,priority:t};for(var e=0;e<go.length&&t!==0&&t<go[e].priority;e++);go.splice(e,0,n),e===0&&tT(n)}};function mx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function T0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function wS(){}function $R(n,t,e,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=ky(o);r.call(u)}}var o=bk(t,i,n,0,null,!1,!1,"",wS);return n._reactRootContainer=o,n[Jr]=o.current,of(n.nodeType===8?n.parentNode:n),mc(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var u=ky(c);l.call(u)}}var c=dx(n,0,!1,null,null,!1,!1,"",wS);return n._reactRootContainer=c,n[Jr]=c.current,of(n.nodeType===8?n.parentNode:n),mc(function(){C0(t,c,e,i)}),c}function k0(n,t,e,i,s){var r=e._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var l=s;s=function(){var c=ky(o);l.call(c)}}C0(t,o,n,s)}else o=$R(e,t,n,s,i);return ky(o)}qE=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var e=fd(t.pendingLanes);e!==0&&(N1(t,e|1),Wn(t,ge()),!(bt&6)&&(Uh=ge()+500,Pa()))}break;case 13:mc(function(){var i=to(n,1);if(i!==null){var s=Tn();ys(i,n,1,s)}}),fx(n,1)}};I1=function(n){if(n.tag===13){var t=to(n,134217728);if(t!==null){var e=Tn();ys(t,n,134217728,e)}fx(n,134217728)}};QE=function(n){if(n.tag===13){var t=va(n),e=to(n,t);if(e!==null){var i=Tn();ys(e,n,t,i)}fx(n,t)}};ZE=function(){return _t};JE=function(n,t){var e=_t;try{return _t=n,t()}finally{_t=e}};Yv=function(n,t,e){switch(t){case"input":if(zv(n,e),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var s=y0(i);if(!s)throw Error(B(90));ME(i),zv(i,s)}}}break;case"textarea":RE(n,e);break;case"select":t=e.value,t!=null&&iu(n,!!e.multiple,t,!1)}};jE=lx;VE=mc;var WR={usingClientEntryPoint:!1,Events:[vm,jc,y0,OE,BE,lx]},sd={findFiberByHostInstance:za,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GR={bundleType:sd.bundleType,version:sd.version,rendererPackageName:sd.rendererPackageName,rendererConfig:sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=HE(n),n===null?null:n.stateNode},findFiberByHostInstance:sd.findFiberByHostInstance||HR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xm.isDisabled&&Xm.supportsFiber)try{f0=Xm.inject(GR),qs=Xm}catch{}}wi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WR;wi.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mx(t))throw Error(B(200));return UR(n,t,null,e)};wi.createRoot=function(n,t){if(!mx(n))throw Error(B(299));var e=!1,i="",s=xk;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=dx(n,1,!1,null,null,e,!1,i,s),n[Jr]=t.current,of(n.nodeType===8?n.parentNode:n),new px(t)};wi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(B(188)):(n=Object.keys(n).join(","),Error(B(268,n)));return n=HE(t),n=n===null?null:n.stateNode,n};wi.flushSync=function(n){return mc(n)};wi.hydrate=function(n,t,e){if(!T0(t))throw Error(B(200));return k0(null,n,t,!0,e)};wi.hydrateRoot=function(n,t,e){if(!mx(n))throw Error(B(405));var i=e!=null&&e.hydratedSources||null,s=!1,r="",o=xk;if(e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=bk(t,null,n,1,e??null,s,!1,r,o),n[Jr]=t.current,of(n),i)for(n=0;n<i.length;n++)e=i[n],s=e._getVersion,s=s(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,s]:t.mutableSourceEagerHydrationData.push(e,s);return new E0(t)};wi.render=function(n,t,e){if(!T0(t))throw Error(B(200));return k0(null,n,t,!1,e)};wi.unmountComponentAtNode=function(n){if(!T0(n))throw Error(B(40));return n._reactRootContainer?(mc(function(){k0(null,null,n,!1,function(){n._reactRootContainer=null,n[Jr]=null})}),!0):!1};wi.unstable_batchedUpdates=lx;wi.unstable_renderSubtreeIntoContainer=function(n,t,e,i){if(!T0(e))throw Error(B(200));if(n==null||n._reactInternals===void 0)throw Error(B(38));return k0(n,t,e,!1,i)};wi.version="18.3.1-next-f1338f8080-20240426";function Ak(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ak)}catch(n){console.error(n)}}Ak(),AE.exports=wi;var XR=AE.exports,Sk,bS=XR;Sk=bS.createRoot,bS.hydrateRoot;var Ck={exports:{}};(function(n,t){(function(e,i){n.exports=i(z)})(typeof self<"u"?self:bM,function(e){return function(){var i={155:function(m){m.exports=e}},s={};function r(m){var y=s[m];if(y!==void 0)return y.exports;var w=s[m]={exports:{}};return i[m](w,w.exports,r),w.exports}r.d=function(m,y){for(var w in y)r.o(y,w)&&!r.o(m,w)&&Object.defineProperty(m,w,{enumerable:!0,get:y[w]})},r.o=function(m,y){return Object.prototype.hasOwnProperty.call(m,y)},r.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var o={};r.r(o),r.d(o,{useReactToPrint:function(){return S}});var l=r(155);function c({level:m="error",messages:y,suppressErrors:w=!1}){w||(m==="error"?console.error(y):m==="warning"?console.warn(y):console.debug(y))}function u(m,y){if(y||!m){const w=document.getElementById("printWindow");w&&document.body.removeChild(w)}}function h(m){return m instanceof Error?m:new Error("Unknown Error")}function d(m,y){const{documentTitle:w,onAfterPrint:C,onPrintError:E,preserveAfterPrint:k,print:_,suppressErrors:P}=y;setTimeout(()=>{var D,R;if(m.contentWindow){let I=function(){C==null||C(),u(k)};if(m.contentWindow.focus(),_)_(m).then(I).catch(V=>{E?E("print",h(V)):c({messages:["An error was thrown by the specified `print` function"],suppressErrors:P})});else{if(m.contentWindow.print){const V=(R=(D=m.contentDocument)===null||D===void 0?void 0:D.title)!==null&&R!==void 0?R:"",Q=m.ownerDocument.title;w&&(m.ownerDocument.title=w,m.contentDocument&&(m.contentDocument.title=w)),m.contentWindow.print(),w&&(m.ownerDocument.title=Q,m.contentDocument&&(m.contentDocument.title=V))}else c({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:P});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(V=>{var Q,q;return((q=(Q=navigator.userAgent)!==null&&Q!==void 0?Q:navigator.vendor)!==null&&q!==void 0?q:"opera"in window&&window.opera).match(V)})?setTimeout(I,500):I()}}else c({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:P})},500)}function f(m){const y=[],w=document.createTreeWalker(m,NodeFilter.SHOW_ELEMENT,null);let C=w.nextNode();for(;C;)y.push(C),C=w.nextNode();return y}function p(m,y,w){const C=f(m),E=f(y);if(C.length===E.length)for(let k=0;k<C.length;k++){const _=C[k],P=E[k],D=_.shadowRoot;if(D!==null){const R=P.attachShadow({mode:D.mode});R.innerHTML=D.innerHTML,p(D,R,w)}}else c({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",m,y],suppressErrors:w})}const v=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function b(m,y,w,C){var E,k,_,P,D;const{contentNode:R,clonedContentNode:I,clonedImgNodes:V,clonedVideoNodes:Q,numResourcesToLoad:q,originalCanvasNodes:rt}=w,{bodyClass:G,fonts:j,ignoreGlobalStyles:N,pageStyle:U,nonce:$,suppressErrors:et,copyShadowRoots:nt}=C;m.onload=null;const M=(E=m.contentDocument)!==null&&E!==void 0?E:(k=m.contentWindow)===null||k===void 0?void 0:k.document;if(M){const L=M.body.appendChild(I);nt&&p(R,L,!!et),j&&(!((_=m.contentDocument)===null||_===void 0)&&_.fonts&&(!((P=m.contentWindow)===null||P===void 0)&&P.FontFace)?j.forEach(pt=>{const ot=new FontFace(pt.family,pt.source,{weight:pt.weight,style:pt.style});m.contentDocument.fonts.add(ot),ot.loaded.then(()=>{y(ot)}).catch(ye=>{y(ot,["Failed loading the font:",ot,"Load error:",h(ye)])})}):(j.forEach(pt=>{y(pt)}),c({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:et})));const F=U??v,tt=M.createElement("style");$&&(tt.setAttribute("nonce",$),M.head.setAttribute("nonce",$)),tt.appendChild(M.createTextNode(F)),M.head.appendChild(tt),G&&M.body.classList.add(...G.split(" "));const Z=M.querySelectorAll("canvas");for(let pt=0;pt<rt.length;++pt){const ot=rt[pt],ye=Z[pt];if(ye===void 0){c({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",ot],suppressErrors:et});continue}const St=ye.getContext("2d");St&&St.drawImage(ot,0,0)}for(let pt=0;pt<V.length;pt++){const ot=V[pt],ye=ot.getAttribute("src");if(ye){const St=new Image;St.onload=()=>{y(ot)},St.onerror=(Re,xi,lo,Ai,nr)=>{y(ot,["Error loading <img>",ot,"Error",nr])},St.src=ye}else y(ot,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',ot])}for(let pt=0;pt<Q.length;pt++){const ot=Q[pt];ot.preload="auto";const ye=ot.getAttribute("poster");if(ye){const St=new Image;St.onload=()=>{y(ot)},St.onerror=(Re,xi,lo,Ai,nr)=>{y(ot,["Error loading video poster",ye,"for video",ot,"Error:",nr])},St.src=ye}else ot.readyState>=2?y(ot):ot.src?(ot.onloadeddata=()=>{y(ot)},ot.onerror=(St,Re,xi,lo,Ai)=>{y(ot,["Error loading video",ot,"Error",Ai])},ot.onstalled=()=>{y(ot,["Loading video stalled, skipping",ot])}):y(ot,["Error loading video, `src` is empty",ot])}const Pt="select",ao=R.querySelectorAll(Pt),bs=M.querySelectorAll(Pt);for(let pt=0;pt<ao.length;pt++)bs[pt].value=ao[pt].value;if(!N){const pt=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let ot=0,ye=pt.length;ot<ye;++ot){const St=pt[ot];if(St.tagName.toLowerCase()==="style"){const Re=M.createElement(St.tagName),xi=St.sheet;if(xi){let lo="";try{const Ai=xi.cssRules.length;for(let nr=0;nr<Ai;++nr)typeof xi.cssRules[nr].cssText=="string"&&(lo+=`${xi.cssRules[nr].cssText}\r
`)}catch(Ai){c({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",St,`Original error: ${h(Ai).message}`],level:"warning"})}Re.setAttribute("id",`react-to-print-${ot}`),$&&Re.setAttribute("nonce",$),Re.appendChild(M.createTextNode(lo)),M.head.appendChild(Re)}}else if(St.getAttribute("href"))if(St.hasAttribute("disabled"))c({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",St],level:"warning"}),y(St);else{const Re=M.createElement(St.tagName);for(let xi=0,lo=St.attributes.length;xi<lo;++xi){const Ai=St.attributes[xi];Ai&&Re.setAttribute(Ai.nodeName,(D=Ai.nodeValue)!==null&&D!==void 0?D:"")}Re.onload=()=>{y(Re)},Re.onerror=(xi,lo,Ai,nr,yM)=>{y(Re,["Failed to load",Re,"Error:",yM])},$&&Re.setAttribute("nonce",$),M.head.appendChild(Re)}else c({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",St],level:"warning"}),y(St)}}}q===0&&d(m,C)}function S({bodyClass:m,contentRef:y,copyShadowRoots:w,documentTitle:C,fonts:E,ignoreGlobalStyles:k,nonce:_,onAfterPrint:P,onBeforePrint:D,onPrintError:R,pageStyle:I,preserveAfterPrint:V,print:Q,suppressErrors:q}){return(0,l.useCallback)(rt=>{function G(){const j={bodyClass:m,contentRef:y,copyShadowRoots:w,documentTitle:C,fonts:E,ignoreGlobalStyles:k,nonce:_,onAfterPrint:P,onBeforePrint:D,onPrintError:R,pageStyle:I,preserveAfterPrint:V,print:Q,suppressErrors:q},N=function(){const et=document.createElement("iframe");return et.width=`${document.documentElement.clientWidth}px`,et.height=`${document.documentElement.clientHeight}px`,et.style.position="absolute",et.style.top=`-${document.documentElement.clientHeight+100}px`,et.style.left=`-${document.documentElement.clientWidth+100}px`,et.id="printWindow",et.srcdoc="<!DOCTYPE html>",et}(),U=function(et,nt){const{contentRef:M,fonts:L,ignoreGlobalStyles:F,suppressErrors:tt}=nt,Z=function({contentRef:ye,optionalContent:St,suppressErrors:Re}){return St&&typeof St=="function"?(ye&&c({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),St()):ye?ye.current:void c({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:Re})}({contentRef:M,optionalContent:et,suppressErrors:tt});if(!Z)return;const Pt=Z.cloneNode(!0),ao=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),bs=Pt.querySelectorAll("img"),pt=Pt.querySelectorAll("video"),ot=L?L.length:0;return{contentNode:Z,clonedContentNode:Pt,clonedImgNodes:bs,clonedVideoNodes:pt,numResourcesToLoad:(F?0:ao.length)+bs.length+pt.length+ot,originalCanvasNodes:Z.querySelectorAll("canvas")}}(rt,j);if(!U)return void c({messages:["There is nothing to print"],suppressErrors:q});const $=function(et,nt,M){const{suppressErrors:L}=et,F=[],tt=[];return function(Z,Pt){F.includes(Z)?c({level:"debug",messages:["Tried to mark a resource that has already been handled",Z],suppressErrors:L}):(Pt?(c({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...Pt],suppressErrors:L}),tt.push(Z)):F.push(Z),F.length+tt.length===nt&&d(M,et))}}(j,U.numResourcesToLoad,N);(function(et,nt,M,L){et.onload=()=>{b(et,nt,M,L)},document.body.appendChild(et)})(N,$,U,j)}u(V,!0),D?D().then(()=>{G()}).catch(j=>{R==null||R("onBeforePrint",h(j))}):G()},[m,y,w,C,E,k,_,P,D,R,I,V,Q,q])}return o}()})})(Ck);var YR=Ck.exports;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ue=(n,t)=>{const e=z.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>z.createElement("svg",{ref:h,...KR,width:s,height:s,stroke:i,strokeWidth:o?Number(r)*24/Number(s):r,className:["lucide",`lucide-${qR(n)}`,l].join(" "),...u},[...t.map(([d,f])=>z.createElement(d,f)),...Array.isArray(c)?c:[c]]));return e.displayName=`${n}`,e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=Ue("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=Ue("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=Ue("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=Ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=Ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=Ue("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=Ue("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=Ue("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=Ue("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=Ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=Ue("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=Ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=Ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=Ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=Ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=Ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),wg={personalInfo:{fullName:"Zied Sayadi",professionalTitle:"Dveloppeur Full-Stack web/mobile",avatarUrl:"/src/images/sd.png"},profile:"Dveloppeur Web & Mobile avec 4 ans d'exprience en dveloppement front-end et back-end. Spcialis en React, Node.js, Drupal et Symfony, j'ai contribu au dveloppement de solutions digitales pour des entreprises comme Thales.",contact:{email:"zieed.sayadi@gmail.com",phone:"+216 21 837 489",location:"Tunis",github:"https://github.com/ziedsayadi1992",linkedin:"linkedin.com/in/zied-sayadi"},skills:["Conception technique","Dveloppement des API, Back-End et Front-End","Rsoudre les problmes techniques est fonctionnelle","Intgration des nouveaux packages","Intgration et dploiement continue","Optimisation du code avec les bonnes pratiques et les bonnes packages"],technologies:[{id:"tech-1",title:"Langages & Standards",items:"PHP 7, JavaScript, TypeScript, HTML, CSS, SASS, JSON, UML"},{id:"tech-2",title:"Frameworks & Bibliothques",items:"Symfony, Node.js, Express.js, React.js, Redux, React Native, PrestaShop, Drupal"},{id:"tech-3",title:"Tests & Qualit",items:"PhpUnit"},{id:"tech-4",title:"Bases de Donnes",items:"MySQL, MariaDB, SQL Server, MongoDB, Redis"},{id:"tech-5",title:"DevOps & Hbergement",items:"Docker, Docker-Compose, OVH, CI/CD"},{id:"tech-6",title:"Architecture & Protocoles",items:"MVC, REST, SOAP"}],experiences:[{id:"1",jobTitle:"Dveloppeur Web & Mobile",company:"Matuile Pro (Paris, France)",missions:["Stack : CodeIgniter (PHP), React Native (Redux), OneSignal, OVH/CDN","Conception des modles de donnes (tuiles, utilisateurs, services) et architecture applicative.","Dveloppement du back-end avec CodeIgniter : API REST, gestion des rservations et des accs.","Dveloppement mobile en React Native (sans Expo) avec Redux pour la gestion d'tat global.","Mise en place de la messagerie (emails, SMS, push notifications via OneSignal).","Dploiement sur OVH avec optimisation des performances via CDN."]},{id:"2",jobTitle:"Dveloppeur Symfony",company:"Macarto des Risques (AMRAE & MEDEF 79  France)",missions:["Stack : Symfony 5, Twig, EasyAdmin, DataTables, Leaflet.js","Dveloppement des formulaires de cartographie des risques et gnration de rapports PDF (radar, analyses).","Gestion multi-rles utilisateurs (socits & administrateurs).","Personnalisation du tableau de bord EasyAdmin pour le suivi des cartographies.","Intgration de DataTables pour le tri, recherche et export des donnes.","Ajout de visualisations (diagrammes, cartes gographiques via Leaflet.js)."]},{id:"3",jobTitle:"Dveloppeur Drupal",company:"Cyber Solutions by Thales (CDS)",missions:["Stack : Drupal 10, MVC, Webform, JSON:API Views, LazyLoad, SEO modules","Cration et intgration du thme personnalis Drupal 10 avec architecture MVC.","Intgration de modules : Webform (formulaires avancs), SEO, Feeds, JSON:API Views, LazyLoad, AddToAny.","Dveloppement de modules custom adapts aux besoins spcifiques.","Optimisation du portail : performances, caching, lazy loading, CDN.","Maintenance et corrections pour un site vitrine international en cyberscurit."]},{id:"4",jobTitle:"Dveloppeur Frontend",company:"Kepler Travel (Paris, France)",missions:["Stack : React.js, TypeScript, Node.js","Conception du frontend avec React & TypeScript (composants rutilisables, formulaires avancs).","Intgration de React Hook Form + Controller pour la gestion fiable des rservations et devis.","Dveloppement de custom hooks pour centraliser le fetch et rduire les appels rseau.","Optimisation des performances avec useMemo, useCallback et rendu conditionnel.","Mise en place de vues dynamiques (catalogue, filtres, dtail voyage, rservation en ligne)."]}],languages:[{name:"Franais",flag:"",level:"Courant (C1)"},{name:"Arabe",flag:"",level:"Langue maternelle"},{name:"Anglais",flag:"",level:"Courant (C1)"}],certifications:[{name:"Bootcamp Full-Stack-JS",issuer:"GoMyCode"},{name:"Cration d'entreprise et formation d'entrepreneurs (CEFE)",issuer:"CEFE"}],customSections:[],sectionOrder:["personal","profile","skills","technologies","experiences","certifications","languages"],sectionTitles:{profile:"Profil Professionnel",skills:"Domaines de Comptences",technologies:"Environnements Techniques",experiences:"Expriences Professionnelles",certifications:"Certifications",languages:"Langues"}},gx=pA.forwardRef(({data:n,activeSection:t},e)=>{z.useEffect(()=>{if(!t)return;const f=document.getElementById("preview-"+t);f&&f.scrollIntoView({behavior:"smooth",block:"start"})},[t]);const i=()=>T.jsxs("header",{className:"header text-center mb-8",id:"preview-personal",children:[n.personalInfo.avatarUrl&&T.jsx("div",{className:"mb-6",children:T.jsx("img",{src:n.personalInfo.avatarUrl,alt:`${n.personalInfo.fullName} - Photo`,className:"avatar w-32 h-32 rounded-full mx-auto border-2 border-gray-400 shadow-lg object-cover"})}),T.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:n.personalInfo.fullName}),T.jsx("h2",{className:"text-xl text-gray-800 font-medium mb-6",children:n.personalInfo.professionalTitle}),T.jsxs("div",{className:"contact-info flex flex-wrap justify-center gap-6 text-sm text-gray-600",children:[n.contact.email&&T.jsxs("div",{className:"contact-item flex items-center gap-2",children:[T.jsx(sL,{size:16,className:"text-gray-800"}),T.jsx("span",{children:n.contact.email})]}),n.contact.phone&&T.jsxs("div",{className:"contact-item flex items-center gap-2",children:[T.jsx(oL,{size:16,className:"text-gray-800"}),T.jsx("span",{children:n.contact.phone})]}),n.contact.location&&T.jsxs("div",{className:"contact-item flex items-center gap-2",children:[T.jsx(rL,{size:16,className:"text-gray-800"}),T.jsx("span",{children:n.contact.location})]}),n.contact.github&&T.jsxs("div",{className:"contact-item flex items-center gap-2",children:[T.jsx(nL,{size:16,className:"text-gray-800"}),T.jsx("span",{children:n.contact.github})]}),n.contact.linkedin&&T.jsxs("div",{className:"contact-item flex items-center gap-2",children:[T.jsx(iL,{size:16,className:"text-gray-800"}),T.jsx("span",{children:n.contact.linkedin})]})]})]}),s=()=>n.profile?T.jsxs("section",{id:"preview-profile",children:[T.jsxs("h3",{className:"section-title flex items-center gap-3 text-xl font-bold text-gray-800 mb-4 border-b-2 border-gray-800 pb-2",children:[T.jsx(eL,{size:22}),n.sectionTitles.profile]}),T.jsx("div",{className:"profile-content bg-gray-50 border-l-4 border-gray-800 pl-6 py-4 rounded-r-lg",children:T.jsx("p",{className:"text-gray-700 leading-relaxed text-justify",children:n.profile})})]}):null,r=()=>!n.skills||n.skills.length===0?null:T.jsxs("section",{id:"preview-skills",children:[T.jsxs("h3",{className:"section-title flex items-center gap-3 text-xl font-bold text-gray-800 mb-4 border-b-2 border-gray-800 pb-2",children:[T.jsx(AS,{size:22}),n.sectionTitles.skills]}),T.jsx("div",{className:"space-y-3",children:n.skills.map((f,p)=>T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full mt-2 flex-shrink-0"}),T.jsx("span",{className:"text-gray-700",children:f})]},p))})]}),o=()=>!n.technologies||n.technologies.length===0?null:T.jsxs("section",{id:"preview-technologies",children:[T.jsxs("h3",{className:"section-title flex items-center gap-3 text-xl font-bold text-gray-800 mb-4 border-b-2 border-gray-800 pb-2",children:[T.jsx(ZR,{size:22}),n.sectionTitles.technologies]}),T.jsx("div",{className:"tech-categories space-y-6",children:n.technologies.map(f=>T.jsxs("div",{className:"tech-category",children:[T.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-3 border-l-4 border-gray-800 pl-3",children:f.title}),T.jsx("div",{className:"tech-items",children:T.jsx("p",{className:"text-gray-700 leading-relaxed",children:f.items.split(",").map((p,v)=>T.jsxs(pA.Fragment,{children:[p.trim(),v<f.items.split(",").length-1&&", "]},v))})})]},f.id))})]}),l=()=>!n.experiences||n.experiences.length===0?null:T.jsxs("section",{id:"preview-experiences",className:"print:break-before-page",children:[T.jsxs("h3",{className:"section-title flex items-center gap-3 text-xl font-bold text-gray-800 mb-4 border-b-2 border-gray-800 pb-2",children:[T.jsx(QR,{size:22}),n.sectionTitles.experiences]}),T.jsx("div",{className:"space-y-6",children:n.experiences.map(f=>T.jsxs("div",{className:"experience-item border-l-4 border-gray-800 pl-6 relative",children:[T.jsx("h4",{className:"job-title text-lg font-bold text-gray-800 mb-1",children:f.jobTitle}),T.jsx("p",{className:"company-name text-gray-600 italic mb-3 font-medium",children:f.company}),T.jsx("ul",{className:"mission-list space-y-2",children:f.missions.map((p,v)=>{var b;return T.jsx("li",{className:"mission-item",children:p.startsWith("Stack :")?T.jsxs("div",{className:"stack-info bg-gray-50 border-l-4 border-gray-300 pl-4 py-2 mb-3 rounded-r-md",children:[T.jsxs("span",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:[p.split(":")[0],":"]}),T.jsx("span",{className:"text-gray-700 ml-2",children:(b=p.split(":")[1])==null?void 0:b.trim()})]}):T.jsxs("div",{className:"flex items-start gap-3",children:[T.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full mt-2 flex-shrink-0"}),T.jsx("span",{className:"text-gray-700",children:p})]})},v)})})]},f.id))})]}),c=()=>!n.certifications||n.certifications.length===0?null:T.jsxs("section",{id:"preview-certifications",children:[T.jsxs("h3",{className:"section-title flex items-center gap-3 text-xl font-bold text-gray-800 mb-4 border-b-2 border-gray-800 pb-2",children:[T.jsx(xS,{size:22}),n.sectionTitles.certifications]}),T.jsx("div",{className:"space-y-3",children:n.certifications.map((f,p)=>T.jsxs("div",{className:"cert-item flex items-start gap-3",children:[T.jsx(xS,{size:16,className:"text-gray-800 mt-1 flex-shrink-0"}),T.jsxs("div",{children:[T.jsx("p",{className:"font-medium text-gray-800",children:f.name}),T.jsx("p",{className:"text-sm text-gray-600",children:f.issuer})]})]},p))})]}),u=()=>!n.languages||n.languages.length===0?null:T.jsxs("section",{id:"preview-languages",children:[T.jsxs("h3",{className:"section-title flex items-center gap-3 text-xl font-bold text-gray-800 mb-4 border-b-2 border-gray-800 pb-2",children:[T.jsx(Ek,{size:22}),n.sectionTitles.languages]}),T.jsx("div",{className:"space-y-3",children:n.languages.map((f,p)=>T.jsxs("div",{className:"language-item flex items-center gap-3",children:[f.flag&&T.jsx("span",{className:"text-2xl",children:f.flag}),T.jsxs("div",{children:[T.jsx("span",{className:"font-medium text-gray-800",children:f.name}),T.jsxs("span",{className:"text-gray-600 ml-2",children:["- ",f.level]})]})]},p))})]}),h=f=>T.jsxs("section",{id:`preview-${f.id}`,children:[T.jsxs("h3",{className:"section-title flex items-center gap-3 text-xl font-bold text-gray-800 mb-4 border-b-2 border-gray-800 pb-2",children:[T.jsx(AS,{size:22}),f.title]}),f.subtitle&&T.jsx("p",{className:"text-gray-600 italic mb-3",children:f.subtitle}),T.jsx("div",{className:"space-y-3",children:f.blocks.map((p,v)=>T.jsx("div",{className:"text-gray-700 leading-relaxed",children:p},v))})]},f.id),d={personal:i,profile:s,skills:r,technologies:o,experiences:l,certifications:c,languages:u};return T.jsxs("div",{ref:e,className:"cv-container max-w-4xl mx-auto bg-white shadow-2xl relative z-10 print:shadow-none print:max-w-none print:m-0",style:{minHeight:"29.7cm",width:"21cm",margin:"2rem auto",padding:"2rem"},children:[T.jsx("div",{className:"page-number print:block hidden"}),T.jsx("div",{className:"space-y-8",children:n.sectionOrder&&n.sectionOrder.length>0?n.sectionOrder.map((f,p)=>{var b;if(f.startsWith("custom-")){const S=(b=n.customSections)==null?void 0:b.find(m=>m.id===f);return S?T.jsx("div",{children:h(S)},f):null}const v=d[f];return v?T.jsx("div",{children:v()},f):null}):T.jsxs(T.Fragment,{children:[i(),s(),r(),o(),l(),c(),u()]})})]})});gx.displayName="PrintableCVContent";const uv={Franais:{edit:"diter",save:"Sauvegarder",reset:"Rinitialiser",uploadPdf:"Importer PDF",newCv:"Nouveau CV",selectLanguage:"Langue",preview:"Aperu",exportPdf:"PDF",editor:"diteur de CV",personalInfo:"Informations Personnelles",profile:"Profil Professionnel",contact:"Contact",skills:"Comptences",technologies:"Technologies",experiences:"Expriences",languages:"Langues",certifications:"Certifications",addSkill:"Ajouter",addExperience:"Ajouter",addLanguage:"Ajouter",addCertification:"Ajouter",addTechCategory:"Ajouter Catgorie",addMission:"Mission",fullName:"Nom Complet",professionalTitle:"Titre Professionnel",email:"Email",phone:"Tlphone",location:"Localisation",github:"GitHub",linkedin:"LinkedIn",jobTitle:"Titre du Poste",company:"Entreprise",missions:"Missions",name:"Nom",flag:"Drapeau",level:"Niveau",issuer:"Organisme",categoryTitle:"Titre de la catgorie",items:"lments (spars par des virgules)",uploadImage:"Importer votre image portfeuil",maxFileSize:"Max 5 Mo. Formats accepts : JPG, PNG, GIF.",customSection:"Section Personnalise",addCustomSection:"Section Personnalise",sectionTitle:"Titre de la Section",subtitle:"Sous-titre (optionnel)",content:"Contenu",addBlock:"Bloc",removeSection:"Supprimer Section",translating:"Traduction en cours..."},English:{edit:"Edit",save:"Save",reset:"Reset",uploadPdf:"Import PDF",newCv:"New CV",selectLanguage:"Language",preview:"Preview",exportPdf:"PDF",editor:"CV Editor",personalInfo:"Personal Information",profile:"Professional Profile",contact:"Contact",skills:"Skills",technologies:"Technologies",experiences:"Experiences",languages:"Languages",certifications:"Certifications",addSkill:"Add",addExperience:"Add",addLanguage:"Add",addCertification:"Add",addTechCategory:"Add Category",addMission:"Mission",fullName:"Full Name",professionalTitle:"Professional Title",email:"Email",phone:"Phone",location:"Location",github:"GitHub",linkedin:"LinkedIn",jobTitle:"Job Title",company:"Company",missions:"Missions",name:"Name",flag:"Flag",level:"Level",issuer:"Issuer",categoryTitle:"Category Title",items:"Items (comma separated)",uploadImage:"Upload your profile picture",maxFileSize:"Max 5 MB. Accepted formats: JPG, PNG, GIF.",customSection:"Custom Section",addCustomSection:"Custom Section",sectionTitle:"Section Title",subtitle:"Subtitle (optional)",content:"Content",addBlock:"Block",removeSection:"Remove Section",translating:"Translating..."},Arabic:{edit:"",save:"",reset:" ",uploadPdf:" PDF",newCv:"  ",selectLanguage:"",preview:"",exportPdf:"PDF",editor:"  ",personalInfo:" ",profile:" ",contact:"",skills:"",technologies:"",experiences:"",languages:"",certifications:"",addSkill:"",addExperience:"",addLanguage:"",addCertification:"",addTechCategory:" ",addMission:"",fullName:" ",professionalTitle:" ",email:" ",phone:"",location:"",github:"GitHub",linkedin:"LinkedIn",jobTitle:" ",company:"",missions:"",name:"",flag:"",level:"",issuer:" ",categoryTitle:" ",items:" ( )",uploadImage:"  ",maxFileSize:"  5 .  : JPG PNG GIF.",customSection:" ",addCustomSection:" ",sectionTitle:" ",subtitle:"  ()",content:"",addBlock:"",removeSection:" ",translating:" ..."},German:{edit:"Bearbeiten",save:"Speichern",reset:"Zurcksetzen",uploadPdf:"PDF importieren",newCv:"Neuer Lebenslauf",selectLanguage:"Sprache",preview:"Vorschau",exportPdf:"PDF",editor:"Lebenslauf-Editor",personalInfo:"Persnliche Informationen",profile:"Berufsprofil",contact:"Kontakt",skills:"Fhigkeiten",technologies:"Technologien",experiences:"Erfahrungen",languages:"Sprachen",certifications:"Zertifizierungen",addSkill:"Hinzufgen",addExperience:"Hinzufgen",addLanguage:"Hinzufgen",addCertification:"Hinzufgen",addTechCategory:"Kategorie hinzufgen",addMission:"Mission",fullName:"Vollstndiger Name",professionalTitle:"Berufsbezeichnung",email:"E-Mail",phone:"Telefon",location:"Standort",github:"GitHub",linkedin:"LinkedIn",jobTitle:"Stellenbezeichnung",company:"Unternehmen",missions:"Aufgaben",name:"Name",flag:"Flagge",level:"Niveau",issuer:"Aussteller",categoryTitle:"Kategorietitel",items:"Elemente (kommagetrennt)",uploadImage:"Profilbild hochladen",maxFileSize:"Max. 5 MB. Akzeptierte Formate: JPG, PNG, GIF.",customSection:"Benutzerdefinierter Abschnitt",addCustomSection:"Benutzerdefinierter Abschnitt",sectionTitle:"Abschnittstitel",subtitle:"Untertitel (optional)",content:"Inhalt",addBlock:"Block",removeSection:"Abschnitt entfernen",translating:"Wird bersetzt..."},Spanish:{edit:"Editar",save:"Guardar",reset:"Restablecer",uploadPdf:"Importar PDF",newCv:"Nuevo CV",selectLanguage:"Idioma",preview:"Vista previa",exportPdf:"PDF",editor:"Editor de CV",personalInfo:"Informacin Personal",profile:"Perfil Profesional",contact:"Contacto",skills:"Habilidades",technologies:"Tecnologas",experiences:"Experiencias",languages:"Idiomas",certifications:"Certificaciones",addSkill:"Agregar",addExperience:"Agregar",addLanguage:"Agregar",addCertification:"Agregar",addTechCategory:"Agregar Categora",addMission:"Misin",fullName:"Nombre Completo",professionalTitle:"Ttulo Profesional",email:"Correo electrnico",phone:"Telfono",location:"Ubicacin",github:"GitHub",linkedin:"LinkedIn",jobTitle:"Ttulo del Puesto",company:"Empresa",missions:"Misiones",name:"Nombre",flag:"Bandera",level:"Nivel",issuer:"Emisor",categoryTitle:"Ttulo de la Categora",items:"Elementos (separados por comas)",uploadImage:"Subir tu foto de perfil",maxFileSize:"Mx. 5 MB. Formatos aceptados: JPG, PNG, GIF.",customSection:"Seccin Personalizada",addCustomSection:"Seccin Personalizada",sectionTitle:"Ttulo de la Seccin",subtitle:"Subttulo (opcional)",content:"Contenido",addBlock:"Bloque",removeSection:"Eliminar Seccin",translating:"Traduciendo..."}},Tk=z.createContext(void 0),cL=({children:n})=>{const[t,e]=z.useState("Franais"),[i,s]=z.useState(null),[r,o]=z.useState(!1),[l,c]=z.useState(0),[u,h]=z.useState(uv.Franais);z.useEffect(()=>{h(uv[t]||uv.Franais)},[t]);const d=p=>{e(p),c(0)},f=p=>u[p]||p;return T.jsx(Tk.Provider,{value:{currentLanguage:t,setLanguage:d,t:f,translatedCV:i,setTranslatedCV:s,isTranslating:r,setIsTranslating:o,translationProgress:l,setTranslationProgress:c},children:n})},yx=()=>{const n=z.useContext(Tk);if(!n)throw new Error("useLanguage must be used within a LanguageProvider");return n};function uL(n){let t=n.trim();t=t.replace(/,\s*}/g,"}"),t=t.replace(/,\s*]/g,"]"),t=t.replace(/}\s*{/g,"},{"),t=t.replace(/]\s*\[/g,"],["),!t.startsWith("{")&&!t.startsWith("[")&&(t="{"+t),!t.endsWith("}")&&!t.endsWith("]")&&(t=t+"}");const e=(t.match(/{/g)||[]).length,i=(t.match(/}/g)||[]).length,s=(t.match(/\[/g)||[]).length,r=(t.match(/]/g)||[]).length;return e>i&&(t+="}".repeat(e-i)),s>r&&(t+="]".repeat(s-r)),t}function kk(n){let t=uL(n);try{return JSON.parse(t)}catch(e){throw new Error(`Failed to rebuild JSON: ${e}`)}}const hL=()=>{const[n,t]=z.useState(!1),[e,i]=z.useState({current:0,total:0,percentage:0}),[s,r]=z.useState(null);return{translateFast:async(c,u)=>{t(!0),r(null),i({current:0,total:0,percentage:0});try{const h=await fetch("http://localhost:4000/api/translate-fast",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetLang:c,data:u})});if(!h.ok)throw new Error(`Translation failed: ${h.status}`);const d=await h.json();return i({current:1,total:1,percentage:100}),d}catch(h){throw r(h.message),h}finally{t(!1)}},translateStream:(c,u,h,d)=>{t(!0),r(null);let f="",p=!1;const v=new AbortController;return fetch("http://localhost:4000/api/translate-stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetLang:c,data:u}),signal:v.signal}).then(async b=>{if(!b.ok)throw new Error(`Stream failed: ${b.status}`);const S=b.body.getReader(),m=new TextDecoder;let y="";for(;!p;){const{value:w,done:C}=await S.read();if(C)break;y+=m.decode(w,{stream:!0});const E=y.split(`

`);y=E.pop()||"";for(const k of E){if(k.startsWith("event: start")){const _=k.split("data: ")[1],{chunks:P}=JSON.parse(_);i({current:0,total:P,percentage:0})}if(k.startsWith("event: chunk")){const _=k.split("data: ")[1],{text:P,progress:D}=JSON.parse(_);f+=P,h(f),i(R=>({...R,current:R.current+1,percentage:D||Math.round((R.current+1)/R.total*100)}))}if(k.startsWith("event: done"))try{const _=kk(f);d(_),i({current:1,total:1,percentage:100})}catch(_){throw r("Failed to parse translated JSON"),_}if(k.startsWith("event: error")){const _=k.split("data: ")[1],{error:P}=JSON.parse(_);throw r(P),new Error(P)}}}}).catch(b=>{p||(r(b.message),console.error("Translation stream error:",b))}).finally(()=>{p||t(!1)}),()=>{p=!0,v.abort(),t(!1)}},isTranslating:n,progress:e,error:s}},_k=z.createContext({});function dL(n){const t=z.useRef(null);return t.current===null&&(t.current=n()),t.current}const vx=typeof window<"u",fL=vx?z.useLayoutEffect:z.useEffect,wx=z.createContext(null);function bx(n,t){n.indexOf(t)===-1&&n.push(t)}function xx(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const no=(n,t,e)=>e>t?t:e<n?n:e;let _y=()=>{};const io={},Pk=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function Mk(n){return typeof n=="object"&&n!==null}const Dk=n=>/^0[^.\s]+$/u.test(n);function Ax(n){let t;return()=>(t===void 0&&(t=n()),t)}const Wi=n=>n,pL=(n,t)=>e=>t(n(e)),bm=(...n)=>n.reduce(pL),mf=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i};class Sx{constructor(){this.subscriptions=[]}add(t){return bx(this.subscriptions,t),()=>xx(this.subscriptions,t)}notify(t,e,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Zs=n=>n*1e3,Hi=n=>n/1e3;function Rk(n,t){return t?n*(1e3/t):0}const Lk=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,mL=1e-7,gL=12;function yL(n,t,e,i,s){let r,o,l=0;do o=t+(e-t)/2,r=Lk(o,i,s)-n,r>0?e=o:t=o;while(Math.abs(r)>mL&&++l<gL);return o}function xm(n,t,e,i){if(n===t&&e===i)return Wi;const s=r=>yL(r,0,1,n,e);return r=>r===0||r===1?r:Lk(s(r),t,i)}const Nk=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,Ik=n=>t=>1-n(1-t),Fk=xm(.33,1.53,.69,.99),Cx=Ik(Fk),Ok=Nk(Cx),Bk=n=>(n*=2)<1?.5*Cx(n):.5*(2-Math.pow(2,-10*(n-1))),Ex=n=>1-Math.sin(Math.acos(n)),jk=Ik(Ex),Vk=Nk(Ex),vL=xm(.42,0,1,1),wL=xm(0,0,.58,1),zk=xm(.42,0,.58,1),bL=n=>Array.isArray(n)&&typeof n[0]!="number",Uk=n=>Array.isArray(n)&&typeof n[0]=="number",CS={linear:Wi,easeIn:vL,easeInOut:zk,easeOut:wL,circIn:Ex,circInOut:Vk,circOut:jk,backIn:Cx,backInOut:Ok,backOut:Fk,anticipate:Bk},xL=n=>typeof n=="string",ES=n=>{if(Uk(n)){_y(n.length===4);const[t,e,i,s]=n;return xm(t,e,i,s)}else if(xL(n))return _y(CS[n]!==void 0),CS[n];return n},Ym=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],TS={value:null,addProjectionMetrics:null};function AL(n,t){let e=new Set,i=new Set,s=!1,r=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(d){o.has(d)&&(h.schedule(d),n()),c++,d(l)}const h={schedule:(d,f=!1,p=!1)=>{const b=p&&s?e:i;return f&&o.add(d),b.has(d)||b.add(d),d},cancel:d=>{i.delete(d),o.delete(d)},process:d=>{if(l=d,s){r=!0;return}s=!0,[e,i]=[i,e],e.forEach(u),t&&TS.value&&TS.value.frameloop[t].push(c),c=0,e.clear(),s=!1,r&&(r=!1,h.process(d))}};return h}const SL=40;function Hk(n,t){let e=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,o=Ym.reduce((w,C)=>(w[C]=AL(r,t?C:void 0),w),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:h,update:d,preRender:f,render:p,postRender:v}=o,b=()=>{const w=io.useManualTiming?s.timestamp:performance.now();e=!1,io.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(w-s.timestamp,SL),1)),s.timestamp=w,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),h.process(s),d.process(s),f.process(s),p.process(s),v.process(s),s.isProcessing=!1,e&&t&&(i=!1,n(b))},S=()=>{e=!0,i=!0,s.isProcessing||n(b)};return{schedule:Ym.reduce((w,C)=>{const E=o[C];return w[C]=(k,_=!1,P=!1)=>(e||S(),E.schedule(k,_,P)),w},{}),cancel:w=>{for(let C=0;C<Ym.length;C++)o[Ym[C]].cancel(w)},state:s,steps:o}}const{schedule:Qt,cancel:Aa,state:qe,steps:hv}=Hk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wi,!0);let bg;function CL(){bg=void 0}const Un={now:()=>(bg===void 0&&Un.set(qe.isProcessing||io.useManualTiming?qe.timestamp:performance.now()),bg),set:n=>{bg=n,queueMicrotask(CL)}},$k=n=>t=>typeof t=="string"&&t.startsWith(n),Tx=$k("--"),EL=$k("var(--"),kx=n=>EL(n)?TL.test(n.split("/*")[0].trim()):!1,TL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Yh={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},gf={...Yh,transform:n=>no(0,1,n)},Km={...Yh,default:1},Gd=n=>Math.round(n*1e5)/1e5,_x=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function kL(n){return n==null}const _L=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Px=(n,t)=>e=>!!(typeof e=="string"&&_L.test(e)&&e.startsWith(n)||t&&!kL(e)&&Object.prototype.hasOwnProperty.call(e,t)),Wk=(n,t,e)=>i=>{if(typeof i!="string")return i;const[s,r,o,l]=i.match(_x);return{[n]:parseFloat(s),[t]:parseFloat(r),[e]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},PL=n=>no(0,255,n),dv={...Yh,transform:n=>Math.round(PL(n))},$a={test:Px("rgb","red"),parse:Wk("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+dv.transform(n)+", "+dv.transform(t)+", "+dv.transform(e)+", "+Gd(gf.transform(i))+")"};function ML(n){let t="",e="",i="",s="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),t+=t,e+=e,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const kw={test:Px("#"),parse:ML,transform:$a.transform},Am=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),ho=Am("deg"),Js=Am("%"),st=Am("px"),DL=Am("vh"),RL=Am("vw"),kS={...Js,parse:n=>Js.parse(n)/100,transform:n=>Js.transform(n*100)},Gc={test:Px("hsl","hue"),parse:Wk("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+Js.transform(Gd(t))+", "+Js.transform(Gd(e))+", "+Gd(gf.transform(i))+")"},xe={test:n=>$a.test(n)||kw.test(n)||Gc.test(n),parse:n=>$a.test(n)?$a.parse(n):Gc.test(n)?Gc.parse(n):kw.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?$a.transform(n):Gc.transform(n),getAnimatableNone:n=>{const t=xe.parse(n);return t.alpha=0,xe.transform(t)}},LL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function NL(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(_x))==null?void 0:t.length)||0)+(((e=n.match(LL))==null?void 0:e.length)||0)>0}const Gk="number",Xk="color",IL="var",FL="var(",_S="${}",OL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yf(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},s=[];let r=0;const l=t.replace(OL,c=>(xe.test(c)?(i.color.push(r),s.push(Xk),e.push(xe.parse(c))):c.startsWith(FL)?(i.var.push(r),s.push(IL),e.push(c)):(i.number.push(r),s.push(Gk),e.push(parseFloat(c))),++r,_S)).split(_S);return{values:e,split:l,indexes:i,types:s}}function Yk(n){return yf(n).values}function Kk(n){const{split:t,types:e}=yf(n),i=t.length;return s=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],s[o]!==void 0){const l=e[o];l===Gk?r+=Gd(s[o]):l===Xk?r+=xe.transform(s[o]):r+=s[o]}return r}}const BL=n=>typeof n=="number"?0:xe.test(n)?xe.getAnimatableNone(n):n;function jL(n){const t=Yk(n);return Kk(n)(t.map(BL))}const Sa={test:NL,parse:Yk,createTransformer:Kk,getAnimatableNone:jL};function fv(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function VL({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let s=0,r=0,o=0;if(!t)s=r=o=e;else{const l=e<.5?e*(1+t):e+t-e*t,c=2*e-l;s=fv(c,l,n+1/3),r=fv(c,l,n),o=fv(c,l,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}function Py(n,t){return e=>e>0?t:n}const ee=(n,t,e)=>n+(t-n)*e,pv=(n,t,e)=>{const i=n*n,s=e*(t*t-i)+i;return s<0?0:Math.sqrt(s)},zL=[kw,$a,Gc],UL=n=>zL.find(t=>t.test(n));function PS(n){const t=UL(n);if(!t)return!1;let e=t.parse(n);return t===Gc&&(e=VL(e)),e}const MS=(n,t)=>{const e=PS(n),i=PS(t);if(!e||!i)return Py(n,t);const s={...e};return r=>(s.red=pv(e.red,i.red,r),s.green=pv(e.green,i.green,r),s.blue=pv(e.blue,i.blue,r),s.alpha=ee(e.alpha,i.alpha,r),$a.transform(s))},_w=new Set(["none","hidden"]);function HL(n,t){return _w.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function $L(n,t){return e=>ee(n,t,e)}function Mx(n){return typeof n=="number"?$L:typeof n=="string"?kx(n)?Py:xe.test(n)?MS:XL:Array.isArray(n)?qk:typeof n=="object"?xe.test(n)?MS:WL:Py}function qk(n,t){const e=[...n],i=e.length,s=n.map((r,o)=>Mx(r)(r,t[o]));return r=>{for(let o=0;o<i;o++)e[o]=s[o](r);return e}}function WL(n,t){const e={...n,...t},i={};for(const s in e)n[s]!==void 0&&t[s]!==void 0&&(i[s]=Mx(n[s])(n[s],t[s]));return s=>{for(const r in i)e[r]=i[r](s);return e}}function GL(n,t){const e=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const r=t.types[s],o=n.indexes[r][i[r]],l=n.values[o]??0;e[s]=l,i[r]++}return e}const XL=(n,t)=>{const e=Sa.createTransformer(t),i=yf(n),s=yf(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?_w.has(n)&&!s.values.length||_w.has(t)&&!i.values.length?HL(n,t):bm(qk(GL(i,s),s.values),e):Py(n,t)};function Qk(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?ee(n,t,e):Mx(n)(n,t)}const YL=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>Qt.update(t,e),stop:()=>Aa(t),now:()=>qe.isProcessing?qe.timestamp:Un.now()}},Zk=(n,t,e=10)=>{let i="";const s=Math.max(Math.round(t/e),2);for(let r=0;r<s;r++)i+=Math.round(n(r/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},My=2e4;function Dx(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<My;)t+=e,i=n.next(t);return t>=My?1/0:t}function KL(n,t=100,e){const i=e({...n,keyframes:[0,t]}),s=Math.min(Dx(i),My);return{type:"keyframes",ease:r=>i.next(s*r).value/t,duration:Hi(s)}}const qL=5;function Jk(n,t,e){const i=Math.max(t-qL,0);return Rk(e-n(i),t-i)}const ce={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mv=.001;function QL({duration:n=ce.duration,bounce:t=ce.bounce,velocity:e=ce.velocity,mass:i=ce.mass}){let s,r,o=1-t;o=no(ce.minDamping,ce.maxDamping,o),n=no(ce.minDuration,ce.maxDuration,Hi(n)),o<1?(s=u=>{const h=u*o,d=h*n,f=h-e,p=Pw(u,o),v=Math.exp(-d);return mv-f/p*v},r=u=>{const d=u*o*n,f=d*e+e,p=Math.pow(o,2)*Math.pow(u,2)*n,v=Math.exp(-d),b=Pw(Math.pow(u,2),o);return(-s(u)+mv>0?-1:1)*((f-p)*v)/b}):(s=u=>{const h=Math.exp(-u*n),d=(u-e)*n+1;return-mv+h*d},r=u=>{const h=Math.exp(-u*n),d=(e-u)*(n*n);return h*d});const l=5/n,c=JL(s,r,l);if(n=Zs(n),isNaN(c))return{stiffness:ce.stiffness,damping:ce.damping,duration:n};{const u=Math.pow(c,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const ZL=12;function JL(n,t,e){let i=e;for(let s=1;s<ZL;s++)i=i-n(i)/t(i);return i}function Pw(n,t){return n*Math.sqrt(1-t*t)}const tN=["duration","bounce"],eN=["stiffness","damping","mass"];function DS(n,t){return t.some(e=>n[e]!==void 0)}function nN(n){let t={velocity:ce.velocity,stiffness:ce.stiffness,damping:ce.damping,mass:ce.mass,isResolvedFromDuration:!1,...n};if(!DS(n,eN)&&DS(n,tN))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),s=i*i,r=2*no(.05,1,1-(n.bounce||0))*Math.sqrt(s);t={...t,mass:ce.mass,stiffness:s,damping:r}}else{const e=QL(n);t={...t,...e,mass:ce.mass},t.isResolvedFromDuration=!0}return t}function Dy(n=ce.visualDuration,t=ce.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:s}=e;const r=e.keyframes[0],o=e.keyframes[e.keyframes.length-1],l={done:!1,value:r},{stiffness:c,damping:u,mass:h,duration:d,velocity:f,isResolvedFromDuration:p}=nN({...e,velocity:-Hi(e.velocity||0)}),v=f||0,b=u/(2*Math.sqrt(c*h)),S=o-r,m=Hi(Math.sqrt(c/h)),y=Math.abs(S)<5;i||(i=y?ce.restSpeed.granular:ce.restSpeed.default),s||(s=y?ce.restDelta.granular:ce.restDelta.default);let w;if(b<1){const E=Pw(m,b);w=k=>{const _=Math.exp(-b*m*k);return o-_*((v+b*m*S)/E*Math.sin(E*k)+S*Math.cos(E*k))}}else if(b===1)w=E=>o-Math.exp(-m*E)*(S+(v+m*S)*E);else{const E=m*Math.sqrt(b*b-1);w=k=>{const _=Math.exp(-b*m*k),P=Math.min(E*k,300);return o-_*((v+b*m*S)*Math.sinh(P)+E*S*Math.cosh(P))/E}}const C={calculatedDuration:p&&d||null,next:E=>{const k=w(E);if(p)l.done=E>=d;else{let _=E===0?v:0;b<1&&(_=E===0?Zs(v):Jk(w,E,k));const P=Math.abs(_)<=i,D=Math.abs(o-k)<=s;l.done=P&&D}return l.value=l.done?o:k,l},toString:()=>{const E=Math.min(Dx(C),My),k=Zk(_=>C.next(E*_).value,E,30);return E+"ms "+k},toTransition:()=>{}};return C}Dy.applyToOptions=n=>{const t=KL(n,100,Dy);return n.ease=t.ease,n.duration=Zs(t.duration),n.type="keyframes",n};function Mw({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:h}){const d=n[0],f={done:!1,value:d},p=P=>l!==void 0&&P<l||c!==void 0&&P>c,v=P=>l===void 0?c:c===void 0||Math.abs(l-P)<Math.abs(c-P)?l:c;let b=e*t;const S=d+b,m=o===void 0?S:o(S);m!==S&&(b=m-d);const y=P=>-b*Math.exp(-P/i),w=P=>m+y(P),C=P=>{const D=y(P),R=w(P);f.done=Math.abs(D)<=u,f.value=f.done?m:R};let E,k;const _=P=>{p(f.value)&&(E=P,k=Dy({keyframes:[f.value,v(f.value)],velocity:Jk(w,P,f.value),damping:s,stiffness:r,restDelta:u,restSpeed:h}))};return _(0),{calculatedDuration:null,next:P=>{let D=!1;return!k&&E===void 0&&(D=!0,C(P),_(P)),E!==void 0&&P>=E?k.next(P-E):(!D&&C(P),f)}}}function iN(n,t,e){const i=[],s=e||io.mix||Qk,r=n.length-1;for(let o=0;o<r;o++){let l=s(n[o],n[o+1]);if(t){const c=Array.isArray(t)?t[o]||Wi:t;l=bm(c,l)}i.push(l)}return i}function sN(n,t,{clamp:e=!0,ease:i,mixer:s}={}){const r=n.length;if(_y(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const o=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),t=[...t].reverse());const l=iN(t,i,s),c=l.length,u=h=>{if(o&&h<n[0])return t[0];let d=0;if(c>1)for(;d<n.length-2&&!(h<n[d+1]);d++);const f=mf(n[d],n[d+1],h);return l[d](f)};return e?h=>u(no(n[0],n[r-1],h)):u}function rN(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const s=mf(0,t,i);n.push(ee(e,1,s))}}function oN(n){const t=[0];return rN(t,n.length-1),t}function aN(n,t){return n.map(e=>e*t)}function lN(n,t){return n.map(()=>t||zk).splice(0,n.length-1)}function Xd({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const s=bL(i)?i.map(ES):ES(i),r={done:!1,value:t[0]},o=aN(e&&e.length===t.length?e:oN(t),n),l=sN(o,t,{ease:Array.isArray(s)?s:lN(t,s)});return{calculatedDuration:n,next:c=>(r.value=l(c),r.done=c>=n,r)}}const cN=n=>n!==null;function Rx(n,{repeat:t,repeatType:e="loop"},i,s=1){const r=n.filter(cN),l=s<0||t&&e!=="loop"&&t%2===1?0:r.length-1;return!l||i===void 0?r[l]:i}const uN={decay:Mw,inertia:Mw,tween:Xd,keyframes:Xd,spring:Dy};function t_(n){typeof n.type=="string"&&(n.type=uN[n.type])}class Lx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const hN=n=>n/100;class Nx extends Lx{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:e}=this.options;e&&e.updatedAt!==Un.now()&&this.tick(Un.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;t_(t);const{type:e=Xd,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:o=0}=t;let{keyframes:l}=t;const c=e||Xd;c!==Xd&&typeof l[0]!="number"&&(this.mixKeyframes=bm(hN,Qk(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});r==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Dx(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=u}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return i.next(0);const{delay:u=0,keyframes:h,repeat:d,repeatType:f,repeatDelay:p,type:v,onUpdate:b,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const m=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?m<0:m>s;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let w=this.currentTime,C=i;if(d){const P=Math.min(this.currentTime,s)/l;let D=Math.floor(P),R=P%1;!R&&P>=1&&(R=1),R===1&&D--,D=Math.min(D,d+1),!!(D%2)&&(f==="reverse"?(R=1-R,p&&(R-=p/l)):f==="mirror"&&(C=o)),w=no(0,1,R)*l}const E=y?{done:!1,value:h[0]}:C.next(w);r&&(E.value=r(E.value));let{done:k}=E;!y&&c!==null&&(k=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return _&&v!==Mw&&(E.value=Rx(h,this.options,S,this.speed)),b&&b(E.value),_&&this.finish(),E}then(t,e){return this.finished.then(t,e)}get duration(){return Hi(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Hi(t)}get time(){return Hi(this.currentTime)}set time(t){var e;t=Zs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Un.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Hi(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:t=YL,startTime:e}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=e??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Un.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function dN(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const Wa=n=>n*180/Math.PI,Dw=n=>{const t=Wa(Math.atan2(n[1],n[0]));return Rw(t)},fN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Dw,rotateZ:Dw,skewX:n=>Wa(Math.atan(n[1])),skewY:n=>Wa(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Rw=n=>(n=n%360,n<0&&(n+=360),n),RS=Dw,LS=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),NS=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),pN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:LS,scaleY:NS,scale:n=>(LS(n)+NS(n))/2,rotateX:n=>Rw(Wa(Math.atan2(n[6],n[5]))),rotateY:n=>Rw(Wa(Math.atan2(-n[2],n[0]))),rotateZ:RS,rotate:RS,skewX:n=>Wa(Math.atan(n[4])),skewY:n=>Wa(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Lw(n){return n.includes("scale")?1:0}function Nw(n,t){if(!n||n==="none")return Lw(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(e)i=pN,s=e;else{const l=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=fN,s=l}if(!s)return Lw(t);const r=i[t],o=s[1].split(",").map(gN);return typeof r=="function"?r(o):o[r]}const mN=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return Nw(e,t)};function gN(n){return parseFloat(n.trim())}const Kh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qh=new Set(Kh),IS=n=>n===Yh||n===st,yN=new Set(["x","y","z"]),vN=Kh.filter(n=>!yN.has(n));function wN(n){const t=[];return vN.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const cc={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>Nw(t,"x"),y:(n,{transform:t})=>Nw(t,"y")};cc.translateX=cc.x;cc.translateY=cc.y;const uc=new Set;let Iw=!1,Fw=!1,Ow=!1;function e_(){if(Fw){const n=Array.from(uc).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const s=wN(i);s.length&&(e.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const s=e.get(i);s&&s.forEach(([r,o])=>{var l;(l=i.getValue(r))==null||l.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Fw=!1,Iw=!1,uc.forEach(n=>n.complete(Ow)),uc.clear()}function n_(){uc.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Fw=!0)})}function bN(){Ow=!0,n_(),e_(),Ow=!1}class Ix{constructor(t,e,i,s,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=s,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(uc.add(this),Iw||(Iw=!0,Qt.read(n_),Qt.resolveKeyframes(e_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:s}=this;if(t[0]===null){const r=s==null?void 0:s.get(),o=t[t.length-1];if(r!==void 0)t[0]=r;else if(i&&e){const l=i.readValue(e,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),s&&r===void 0&&s.set(t[0])}dN(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),uc.delete(this)}cancel(){this.state==="scheduled"&&(uc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const xN=n=>n.startsWith("--");function AN(n,t,e){xN(t)?n.style.setProperty(t,e):n.style[t]=e}const SN=Ax(()=>window.ScrollTimeline!==void 0),CN={};function EN(n,t){const e=Ax(n);return()=>CN[t]??e()}const i_=EN(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),md=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,FS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:md([0,.65,.55,1]),circOut:md([.55,0,1,.45]),backIn:md([.31,.01,.66,-.59]),backOut:md([.33,1.53,.69,.99])};function s_(n,t){if(n)return typeof n=="function"?i_()?Zk(n,t):"ease-out":Uk(n)?md(n):Array.isArray(n)?n.map(e=>s_(e,t)||FS.easeOut):FS[n]}function TN(n,t,e,{delay:i=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const h={[t]:e};c&&(h.offset=c);const d=s_(l,s);Array.isArray(d)&&(h.easing=d);const f={delay:i,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),n.animate(h,f)}function r_(n){return typeof n=="function"&&"applyToOptions"in n}function kN({type:n,...t}){return r_(n)&&i_()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class _N extends Lx{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:i,keyframes:s,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=t,_y(typeof t.type!="string");const u=kN(t);this.animation=TN(e,i,s,u,r),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const h=Rx(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):AN(e,i,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,i;const t=((i=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:i.call(e).duration)||0;return Hi(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Hi(t)}get time(){return Hi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Zs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&SN()?(this.animation.timeline=t,Wi):e(this)}}const o_={anticipate:Bk,backInOut:Ok,circInOut:Vk};function PN(n){return n in o_}function MN(n){typeof n.ease=="string"&&PN(n.ease)&&(n.ease=o_[n.ease])}const OS=10;class DN extends _N{constructor(t){MN(t),t_(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:i,onComplete:s,element:r,...o}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const l=new Nx({...o,autoplay:!1}),c=Zs(this.finishedTime??this.time);e.setWithVelocity(l.sample(c-OS).value,l.sample(c).value,OS),l.stop()}}const BS=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Sa.test(n)||n==="0")&&!n.startsWith("url("));function RN(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function LN(n,t,e,i){const s=n[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const r=n[n.length-1],o=BS(s,t),l=BS(r,t);return!o||!l?!1:RN(n)||(e==="spring"||r_(e))&&i}function Bw(n){n.duration=0,n.type="keyframes"}const NN=new Set(["opacity","clipPath","filter","transform"]),IN=Ax(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function FN(n){var h;const{motionValue:t,name:e,repeatDelay:i,repeatType:s,damping:r,type:o}=n;if(!(((h=t==null?void 0:t.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return IN()&&e&&NN.has(e)&&(e!=="transform"||!u)&&!c&&!i&&s!=="mirror"&&r!==0&&o!=="inertia"}const ON=40;class BN extends Lx{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:h,...d}){var v;super(),this.stop=()=>{var b,S;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=Un.now();const f={autoplay:t,delay:e,type:i,repeat:s,repeatDelay:r,repeatType:o,name:c,motionValue:u,element:h,...d},p=(h==null?void 0:h.KeyframeResolver)||Ix;this.keyframeResolver=new p(l,(b,S,m)=>this.onKeyframesResolved(b,S,f,!m),c,u,h),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,e,i,s){this.keyframeResolver=void 0;const{name:r,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:h}=i;this.resolvedAt=Un.now(),LN(t,r,o,l)||((io.instantAnimations||!c)&&(h==null||h(Rx(t,i,e))),t[0]=t[t.length-1],Bw(i),i.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>ON?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...i,keyframes:t},p=!u&&FN(f)?new DN({...f,element:f.motionValue.owner.current}):new Nx(f);p.finished.then(()=>this.notifyFinished()).catch(Wi),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),bN()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const jN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function VN(n){const t=jN.exec(n);if(!t)return[,];const[,e,i,s]=t;return[`--${e??i}`,s]}function a_(n,t,e=1){const[i,s]=VN(n);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const o=r.trim();return Pk(o)?parseFloat(o):o}return kx(s)?a_(s,t,e+1):s}function Fx(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const l_=new Set(["width","height","top","left","right","bottom",...Kh]),zN={test:n=>n==="auto",parse:n=>n},c_=n=>t=>t.test(n),u_=[Yh,st,Js,ho,RL,DL,zN],jS=n=>u_.find(c_(n));function UN(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Dk(n):!0}const HN=new Set(["brightness","contrast","saturate","opacity"]);function $N(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(_x)||[];if(!i)return n;const s=e.replace(i,"");let r=HN.has(t)?1:0;return i!==e&&(r*=100),t+"("+r+s+")"}const WN=/\b([a-z-]*)\(.*?\)/gu,jw={...Sa,getAnimatableNone:n=>{const t=n.match(WN);return t?t.map($N).join(" "):n}},VS={...Yh,transform:Math.round},GN={rotate:ho,rotateX:ho,rotateY:ho,rotateZ:ho,scale:Km,scaleX:Km,scaleY:Km,scaleZ:Km,skew:ho,skewX:ho,skewY:ho,distance:st,translateX:st,translateY:st,translateZ:st,x:st,y:st,z:st,perspective:st,transformPerspective:st,opacity:gf,originX:kS,originY:kS,originZ:st},Ox={borderWidth:st,borderTopWidth:st,borderRightWidth:st,borderBottomWidth:st,borderLeftWidth:st,borderRadius:st,radius:st,borderTopLeftRadius:st,borderTopRightRadius:st,borderBottomRightRadius:st,borderBottomLeftRadius:st,width:st,maxWidth:st,height:st,maxHeight:st,top:st,right:st,bottom:st,left:st,padding:st,paddingTop:st,paddingRight:st,paddingBottom:st,paddingLeft:st,margin:st,marginTop:st,marginRight:st,marginBottom:st,marginLeft:st,backgroundPositionX:st,backgroundPositionY:st,...GN,zIndex:VS,fillOpacity:gf,strokeOpacity:gf,numOctaves:VS},XN={...Ox,color:xe,backgroundColor:xe,outlineColor:xe,fill:xe,stroke:xe,borderColor:xe,borderTopColor:xe,borderRightColor:xe,borderBottomColor:xe,borderLeftColor:xe,filter:jw,WebkitFilter:jw},h_=n=>XN[n];function d_(n,t){let e=h_(n);return e!==jw&&(e=Sa),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const YN=new Set(["auto","none","0"]);function KN(n,t,e){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!YN.has(r)&&yf(r).values.length&&(s=n[i]),i++}if(s&&e)for(const r of t)n[r]=d_(e,s)}class qN extends Ix{constructor(t,e,i,s,r){super(t,e,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),kx(u))){const h=a_(u,e.current);h!==void 0&&(t[c]=h),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!l_.has(i)||t.length!==2)return;const[s,r]=t,o=jS(s),l=jS(r);if(o!==l)if(IS(o)&&IS(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else cc[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let s=0;s<t.length;s++)(t[s]===null||UN(t[s]))&&i.push(s);i.length&&KN(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=cc[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(i,s).jump(s,!1)}measureEndState(){var l;const{element:t,name:e,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(e);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,o=i[r];i[r]=cc[e](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function QN(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const s=document.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const f_=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function ZN(n){return Mk(n)&&"offsetHeight"in n}const zS=30,JN=n=>!isNaN(parseFloat(n));class tI{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var r;const s=Un.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Un.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=JN(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new Sx);const i=this.events[t].add(e);return t==="change"?()=>{i(),Qt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Un.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>zS)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,zS);return Rk(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hh(n,t){return new tI(n,t)}const{schedule:Bx,cancel:Zj}=Hk(queueMicrotask,!1),Zi={x:!1,y:!1};function p_(){return Zi.x||Zi.y}function eI(n){return n==="x"||n==="y"?Zi[n]?null:(Zi[n]=!0,()=>{Zi[n]=!1}):Zi.x||Zi.y?null:(Zi.x=Zi.y=!0,()=>{Zi.x=Zi.y=!1})}function m_(n,t){const e=QN(n),i=new AbortController,s={passive:!0,...t,signal:i.signal};return[e,s,()=>i.abort()]}function US(n){return!(n.pointerType==="touch"||p_())}function nI(n,t,e={}){const[i,s,r]=m_(n,e),o=l=>{if(!US(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const h=d=>{US(d)&&(u(d),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,s)};return i.forEach(l=>{l.addEventListener("pointerenter",o,s)}),r}const g_=(n,t)=>t?n===t?!0:g_(n,t.parentElement):!1,jx=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,iI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sI(n){return iI.has(n.tagName)||n.tabIndex!==-1}const xg=new WeakSet;function HS(n){return t=>{t.key==="Enter"&&n(t)}}function gv(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const rI=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=HS(()=>{if(xg.has(e))return;gv(e,"down");const s=HS(()=>{gv(e,"up")}),r=()=>gv(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",r,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)};function $S(n){return jx(n)&&!p_()}function oI(n,t,e={}){const[i,s,r]=m_(n,e),o=l=>{const c=l.currentTarget;if(!$S(l))return;xg.add(c);const u=t(c,l),h=(p,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),xg.has(c)&&xg.delete(c),$S(p)&&typeof u=="function"&&u(p,{success:v})},d=p=>{h(p,c===window||c===document||e.useGlobalTarget||g_(c,p.target))},f=p=>{h(p,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",f,s)};return i.forEach(l=>{(e.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),ZN(l)&&(l.addEventListener("focus",u=>rI(u,s)),!sI(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),r}function y_(n){return Mk(n)&&"ownerSVGElement"in n}function aI(n){return y_(n)&&n.tagName==="svg"}const pn=n=>!!(n&&n.getVelocity),lI=[...u_,xe,Sa],cI=n=>lI.find(c_(n)),v_=z.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function uI(n=!0){const t=z.useContext(wx);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:s}=t,r=z.useId();z.useEffect(()=>{if(n)return s(r)},[n]);const o=z.useCallback(()=>n&&i&&i(r),[r,i,n]);return!e&&i?[!1,o]:[!0]}const w_=z.createContext({strict:!1}),WS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$h={};for(const n in WS)$h[n]={isEnabled:t=>WS[n].some(e=>!!t[e])};function hI(n){for(const t in n)$h[t]={...$h[t],...n[t]}}const dI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ry(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||dI.has(n)}let b_=n=>!Ry(n);function fI(n){typeof n=="function"&&(b_=t=>t.startsWith("on")?!Ry(t):n(t))}try{fI(require("@emotion/is-prop-valid").default)}catch{}function pI(n,t,e){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(b_(s)||e===!0&&Ry(s)||!t&&!Ry(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const _0=z.createContext({});function P0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function vf(n){return typeof n=="string"||Array.isArray(n)}const Vx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],zx=["initial",...Vx];function M0(n){return P0(n.animate)||zx.some(t=>vf(n[t]))}function x_(n){return!!(M0(n)||n.variants)}function mI(n,t){if(M0(n)){const{initial:e,animate:i}=n;return{initial:e===!1||vf(e)?e:void 0,animate:vf(i)?i:void 0}}return n.inherit!==!1?t:{}}function gI(n){const{initial:t,animate:e}=mI(n,z.useContext(_0));return z.useMemo(()=>({initial:t,animate:e}),[GS(t),GS(e)])}function GS(n){return Array.isArray(n)?n.join(" "):n}const wf={};function yI(n){for(const t in n)wf[t]=n[t],Tx(t)&&(wf[t].isCSSVariable=!0)}function A_(n,{layout:t,layoutId:e}){return qh.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!wf[n]||n==="opacity")}const vI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wI=Kh.length;function bI(n,t,e){let i="",s=!0;for(let r=0;r<wI;r++){const o=Kh[r],l=n[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||e){const u=f_(l,Ox[o]);if(!c){s=!1;const h=vI[o]||o;i+=`${h}(${u}) `}e&&(t[o]=u)}}return i=i.trim(),e?i=e(t,s?"":i):s&&(i="none"),i}function Ux(n,t,e){const{style:i,vars:s,transformOrigin:r}=n;let o=!1,l=!1;for(const c in t){const u=t[c];if(qh.has(c)){o=!0;continue}else if(Tx(c)){s[c]=u;continue}else{const h=f_(u,Ox[c]);c.startsWith("origin")?(l=!0,r[c]=h):i[c]=h}}if(t.transform||(o||e?i.transform=bI(t,n.transform,e):i.transform&&(i.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:h=0}=r;i.transformOrigin=`${c} ${u} ${h}`}}const Hx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function S_(n,t,e){for(const i in t)!pn(t[i])&&!A_(i,e)&&(n[i]=t[i])}function xI({transformTemplate:n},t){return z.useMemo(()=>{const e=Hx();return Ux(e,t,n),Object.assign({},e.vars,e.style)},[t])}function AI(n,t){const e=n.style||{},i={};return S_(i,e,n),Object.assign(i,xI(n,t)),i}function SI(n,t){const e={},i=AI(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}const CI={offset:"stroke-dashoffset",array:"stroke-dasharray"},EI={offset:"strokeDashoffset",array:"strokeDasharray"};function TI(n,t,e=1,i=0,s=!0){n.pathLength=1;const r=s?CI:EI;n[r.offset]=st.transform(-i);const o=st.transform(t),l=st.transform(e);n[r.array]=`${o} ${l}`}function C_(n,{attrX:t,attrY:e,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:o=0,...l},c,u,h){if(Ux(n,l,u),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:d,style:f}=n;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete d.transformBox),t!==void 0&&(d.x=t),e!==void 0&&(d.y=e),i!==void 0&&(d.scale=i),s!==void 0&&TI(d,s,r,o,!1)}const E_=()=>({...Hx(),attrs:{}}),T_=n=>typeof n=="string"&&n.toLowerCase()==="svg";function kI(n,t,e,i){const s=z.useMemo(()=>{const r=E_();return C_(r,t,T_(i),n.transformTemplate,n.style),{...r.attrs,style:{...r.style}}},[t]);if(n.style){const r={};S_(r,n.style,n),s.style={...r,...s.style}}return s}const _I=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $x(n){return typeof n!="string"||n.includes("-")?!1:!!(_I.indexOf(n)>-1||/[A-Z]/u.test(n))}function PI(n,t,e,{latestValues:i},s,r=!1){const l=($x(n)?kI:SI)(t,i,s,n),c=pI(t,typeof n=="string",r),u=n!==z.Fragment?{...c,...l,ref:e}:{},{children:h}=t,d=z.useMemo(()=>pn(h)?h.get():h,[h]);return z.createElement(n,{...u,children:d})}function XS(n){const t=[{},{}];return n==null||n.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function Wx(n,t,e,i){if(typeof t=="function"){const[s,r]=XS(i);t=t(e!==void 0?e:n.custom,s,r)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[s,r]=XS(i);t=t(e!==void 0?e:n.custom,s,r)}return t}function Ag(n){return pn(n)?n.get():n}function MI({scrapeMotionValuesFromProps:n,createRenderState:t},e,i,s){return{latestValues:DI(e,i,s,n),renderState:t()}}function DI(n,t,e,i){const s={},r=i(n,{});for(const f in r)s[f]=Ag(r[f]);let{initial:o,animate:l}=n;const c=M0(n),u=x_(n);t&&u&&!c&&n.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=e?e.initial===!1:!1;h=h||o===!1;const d=h?l:o;if(d&&typeof d!="boolean"&&!P0(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const v=Wx(n,f[p]);if(v){const{transitionEnd:b,transition:S,...m}=v;for(const y in m){let w=m[y];if(Array.isArray(w)){const C=h?w.length-1:0;w=w[C]}w!==null&&(s[y]=w)}for(const y in b)s[y]=b[y]}}}return s}const k_=n=>(t,e)=>{const i=z.useContext(_0),s=z.useContext(wx),r=()=>MI(n,t,i,s);return e?r():dL(r)};function Gx(n,t,e){var r;const{style:i}=n,s={};for(const o in i)(pn(i[o])||t.style&&pn(t.style[o])||A_(o,n)||((r=e==null?void 0:e.getValue(o))==null?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}const RI=k_({scrapeMotionValuesFromProps:Gx,createRenderState:Hx});function __(n,t,e){const i=Gx(n,t,e);for(const s in n)if(pn(n[s])||pn(t[s])){const r=Kh.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}const LI=k_({scrapeMotionValuesFromProps:__,createRenderState:E_}),NI=Symbol.for("motionComponentSymbol");function Xc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function II(n,t,e){return z.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):Xc(e)&&(e.current=i))},[t])}const Xx=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),FI="framerAppearId",P_="data-"+Xx(FI),M_=z.createContext({});function OI(n,t,e,i,s){var b,S;const{visualElement:r}=z.useContext(_0),o=z.useContext(w_),l=z.useContext(wx),c=z.useContext(v_).reducedMotion,u=z.useRef(null);i=i||o.renderer,!u.current&&i&&(u.current=i(n,{visualState:t,parent:r,props:e,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=u.current,d=z.useContext(M_);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&BI(u.current,e,s,d);const f=z.useRef(!1);z.useInsertionEffect(()=>{h&&f.current&&h.update(e,l)});const p=e[P_],v=z.useRef(!!p&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,p))&&((S=window.MotionHasOptimisedAnimation)==null?void 0:S.call(window,p)));return fL(()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),v.current&&h.animationState&&h.animationState.animateChanges())}),z.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)==null||m.call(window,p)}),v.current=!1),h.enteringChildren=void 0)}),h}function BI(n,t,e,i){const{layoutId:s,layout:r,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:h}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:D_(n.parent)),n.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!o||l&&Xc(l),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:h,layoutScroll:c,layoutRoot:u})}function D_(n){if(n)return n.options.allowProjection!==!1?n.projection:D_(n.parent)}function yv(n,{forwardMotionProps:t=!1}={},e,i){e&&hI(e);const s=$x(n)?LI:RI;function r(l,c){let u;const h={...z.useContext(v_),...l,layoutId:jI(l)},{isStatic:d}=h,f=gI(l),p=s(l,d);if(!d&&vx){VI();const v=zI(h);u=v.MeasureLayout,f.visualElement=OI(n,p,h,i,v.ProjectionNode)}return T.jsxs(_0.Provider,{value:f,children:[u&&f.visualElement?T.jsx(u,{visualElement:f.visualElement,...h}):null,PI(n,l,II(p,f.visualElement,c),p,d,t)]})}r.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=z.forwardRef(r);return o[NI]=n,o}function jI({layoutId:n}){const t=z.useContext(_k).id;return t&&n!==void 0?t+"-"+n:n}function VI(n,t){z.useContext(w_).strict}function zI(n){const{drag:t,layout:e}=$h;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function UI(n,t){if(typeof Proxy>"u")return yv;const e=new Map,i=(r,o)=>yv(r,o,n,t),s=(r,o)=>i(r,o);return new Proxy(s,{get:(r,o)=>o==="create"?i:(e.has(o)||e.set(o,yv(o,void 0,n,t)),e.get(o))})}function R_({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function HI({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function $I(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function vv(n){return n===void 0||n===1}function Vw({scale:n,scaleX:t,scaleY:e}){return!vv(n)||!vv(t)||!vv(e)}function Na(n){return Vw(n)||L_(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function L_(n){return YS(n.x)||YS(n.y)}function YS(n){return n&&n!=="0%"}function Ly(n,t,e){const i=n-e,s=t*i;return e+s}function KS(n,t,e,i,s){return s!==void 0&&(n=Ly(n,s,i)),Ly(n,e,i)+t}function zw(n,t=0,e=1,i,s){n.min=KS(n.min,t,e,i,s),n.max=KS(n.max,t,e,i,s)}function N_(n,{x:t,y:e}){zw(n.x,t.translate,t.scale,t.originPoint),zw(n.y,e.translate,e.scale,e.originPoint)}const qS=.999999999999,QS=1.0000000000001;function WI(n,t,e,i=!1){const s=e.length;if(!s)return;t.x=t.y=1;let r,o;for(let l=0;l<s;l++){r=e[l],o=r.projectionDelta;const{visualElement:c}=r.options;c&&c.props.style&&c.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Kc(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,N_(n,o)),i&&Na(r.latestValues)&&Kc(n,r.latestValues))}t.x<QS&&t.x>qS&&(t.x=1),t.y<QS&&t.y>qS&&(t.y=1)}function Yc(n,t){n.min=n.min+t,n.max=n.max+t}function ZS(n,t,e,i,s=.5){const r=ee(n.min,n.max,s);zw(n,t,e,r,i)}function Kc(n,t){ZS(n.x,t.x,t.scaleX,t.scale,t.originX),ZS(n.y,t.y,t.scaleY,t.scale,t.originY)}function I_(n,t){return R_($I(n.getBoundingClientRect(),t))}function GI(n,t,e){const i=I_(n,e),{scroll:s}=t;return s&&(Yc(i.x,s.offset.x),Yc(i.y,s.offset.y)),i}const JS=()=>({translate:0,scale:1,origin:0,originPoint:0}),qc=()=>({x:JS(),y:JS()}),tC=()=>({min:0,max:0}),me=()=>({x:tC(),y:tC()}),Uw={current:null},F_={current:!1};function XI(){if(F_.current=!0,!!vx)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>Uw.current=n.matches;n.addEventListener("change",t),t()}else Uw.current=!1}const YI=new WeakMap;function KI(n,t,e){for(const i in t){const s=t[i],r=e[i];if(pn(s))n.addValue(i,s);else if(pn(r))n.addValue(i,Hh(s,{owner:n}));else if(r!==s)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=n.getStaticValue(i);n.addValue(i,Hh(o!==void 0?o:s,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const eC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class qI{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ix,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Un.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Qt.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=e.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!r,this.isControllingVariants=M0(e),this.isVariantNode=x_(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(e,{},this);for(const f in d){const p=d[f];c[f]!==void 0&&pn(p)&&p.set(c[f])}}mount(t){var e;this.current=t,YI.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),F_.current||XI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Uw.current,(e=this.parent)==null||e.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Aa(this.notifyUpdate),Aa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const i=this.features[e];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=qh.has(t);i&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Qt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),r&&r(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in $h){const e=$h[t];if(!e)continue;const{isEnabled:i,Feature:s}=e;if(!this.features[t]&&s&&i(this.props)&&(this.features[t]=new s(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):me()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<eC.length;i++){const s=eC[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,o=t[r];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=KI(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=Hh(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Pk(i)||Dk(i))?i=parseFloat(i):!cI(i)&&Sa.test(e)&&(i=d_(t,e)),this.setBaseTarget(t,pn(i)?i.get():i)),pn(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var r;const{initial:e}=this.props;let i;if(typeof e=="string"||typeof e=="object"){const o=Wx(this.props,e,(r=this.presenceContext)==null?void 0:r.custom);o&&(i=o[t])}if(e&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!pn(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new Sx),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){Bx.render(this.render)}}class O_ extends qI{constructor(){super(...arguments),this.KeyframeResolver=qN}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;pn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function B_(n,{style:t,vars:e},i,s){const r=n.style;let o;for(o in t)r[o]=t[o];s==null||s.applyProjectionStyles(r,i);for(o in e)r.setProperty(o,e[o])}function QI(n){return window.getComputedStyle(n)}class ZI extends O_{constructor(){super(...arguments),this.type="html",this.renderInstance=B_}readValueFromInstance(t,e){var i;if(qh.has(e))return(i=this.projection)!=null&&i.isProjecting?Lw(e):mN(t,e);{const s=QI(t),r=(Tx(e)?s.getPropertyValue(e):s[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return I_(t,e)}build(t,e,i){Ux(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return Gx(t,e,i)}}const j_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JI(n,t,e,i){B_(n,t,void 0,i);for(const s in t.attrs)n.setAttribute(j_.has(s)?s:Xx(s),t.attrs[s])}class tF extends O_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=me}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(qh.has(e)){const i=h_(e);return i&&i.default||0}return e=j_.has(e)?e:Xx(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return __(t,e,i)}build(t,e,i){C_(t,e,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,e,i,s){JI(t,e,i,s)}mount(t){this.isSVGTag=T_(t.tagName),super.mount(t)}}const eF=(n,t)=>$x(n)?new tF(t):new ZI(t,{allowProjection:n!==z.Fragment});function cu(n,t,e){const i=n.getProps();return Wx(i,t,e!==void 0?e:i.custom,n)}const Hw=n=>Array.isArray(n);function nF(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,Hh(e))}function iF(n){return Hw(n)?n[n.length-1]||0:n}function sF(n,t){const e=cu(n,t);let{transitionEnd:i={},transition:s={},...r}=e||{};r={...r,...i};for(const o in r){const l=iF(r[o]);nF(n,o,l)}}function rF(n){return!!(pn(n)&&n.add)}function $w(n,t){const e=n.getValue("willChange");if(rF(e))return e.add(t);if(!e&&io.WillChange){const i=new io.WillChange("auto");n.addValue("willChange",i),i.add(t)}}function V_(n){return n.props[P_]}const oF=n=>n!==null;function aF(n,{repeat:t,repeatType:e="loop"},i){const s=n.filter(oF),r=t&&e!=="loop"&&t%2===1?0:s.length-1;return!r||i===void 0?s[r]:i}const lF={type:"spring",stiffness:500,damping:25,restSpeed:10},cF=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),uF={type:"keyframes",duration:.8},hF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dF=(n,{keyframes:t})=>t.length>2?uF:qh.has(n)?n.startsWith("scale")?cF(t[1]):lF:hF;function fF({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:l,from:c,elapsed:u,...h}){return!!Object.keys(h).length}const Yx=(n,t,e,i={},s,r)=>o=>{const l=Fx(i,n)||{},c=l.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Zs(c);const h={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:n,motionValue:t,element:r?void 0:s};fF(l)||Object.assign(h,dF(n,h)),h.duration&&(h.duration=Zs(h.duration)),h.repeatDelay&&(h.repeatDelay=Zs(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Bw(h),h.delay===0&&(d=!0)),(io.instantAnimations||io.skipAnimations)&&(d=!0,Bw(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,d&&!r&&t.get()!==void 0){const f=aF(h.keyframes,l);if(f!==void 0){Qt.update(()=>{h.onUpdate(f),h.onComplete()});return}}return l.isSync?new Nx(h):new BN(h)};function pF({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function z_(n,t,{delay:e=0,transitionOverride:i,type:s}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:o,...l}=t;i&&(r=i);const c=[],u=s&&n.animationState&&n.animationState.getState()[s];for(const h in l){const d=n.getValue(h,n.latestValues[h]??null),f=l[h];if(f===void 0||u&&pF(u,h))continue;const p={delay:e,...Fx(r||{},h)},v=d.get();if(v!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===v&&!p.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const m=V_(n);if(m){const y=window.MotionHandoffAnimation(m,h,Qt);y!==null&&(p.startTime=y,b=!0)}}$w(n,h),d.start(Yx(h,d,f,n.shouldReduceMotion&&l_.has(h)?{type:!1}:p,n,b));const S=d.animation;S&&c.push(S)}return o&&Promise.all(c).then(()=>{Qt.update(()=>{o&&sF(n,o)})}),c}function U_(n,t,e,i=0,s=1){const r=Array.from(n).sort((u,h)=>u.sortNodePosition(h)).indexOf(t),o=n.size,l=(o-1)*i;return typeof e=="function"?e(r,o):s===1?r*i:l-r*i}function Ww(n,t,e={}){var c;const i=cu(n,t,e.type==="exit"?(c=n.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(s=e.transitionOverride);const r=i?()=>Promise.all(z_(n,i,e)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=s;return mF(n,t,u,h,d,f,e)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,h]=l==="beforeChildren"?[r,o]:[o,r];return u().then(()=>h())}else return Promise.all([r(),o(e.delay)])}function mF(n,t,e=0,i=0,s=0,r=1,o){const l=[];for(const c of n.variantChildren)c.notify("AnimationStart",t),l.push(Ww(c,t,{...o,delay:e+(typeof i=="function"?0:i)+U_(n.variantChildren,c,i,s,r)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function gF(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(r=>Ww(n,r,e));i=Promise.all(s)}else if(typeof t=="string")i=Ww(n,t,e);else{const s=typeof t=="function"?cu(n,t,e.custom):t;i=Promise.all(z_(n,s,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}function H_(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}const yF=zx.length;function $_(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?$_(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<yF;e++){const i=zx[e],s=n.props[i];(vf(s)||s===!1)&&(t[i]=s)}return t}const vF=[...Vx].reverse(),wF=Vx.length;function bF(n){return t=>Promise.all(t.map(({animation:e,options:i})=>gF(n,e,i)))}function xF(n){let t=bF(n),e=nC(),i=!0;const s=c=>(u,h)=>{var f;const d=cu(n,h,c==="exit"?(f=n.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:v,...b}=d;u={...u,...b,...v}}return u};function r(c){t=c(n)}function o(c){const{props:u}=n,h=$_(n.parent)||{},d=[],f=new Set;let p={},v=1/0;for(let S=0;S<wF;S++){const m=vF[S],y=e[m],w=u[m]!==void 0?u[m]:h[m],C=vf(w),E=m===c?y.isActive:null;E===!1&&(v=S);let k=w===h[m]&&w!==u[m]&&C;if(k&&i&&n.manuallyAnimateOnMount&&(k=!1),y.protectedKeys={...p},!y.isActive&&E===null||!w&&!y.prevProp||P0(w)||typeof w=="boolean")continue;const _=AF(y.prevProp,w);let P=_||m===c&&y.isActive&&!k&&C||S>v&&C,D=!1;const R=Array.isArray(w)?w:[w];let I=R.reduce(s(m),{});E===!1&&(I={});const{prevResolvedValues:V={}}=y,Q={...V,...I},q=j=>{P=!0,f.has(j)&&(D=!0,f.delete(j)),y.needsAnimating[j]=!0;const N=n.getValue(j);N&&(N.liveStyle=!1)};for(const j in Q){const N=I[j],U=V[j];if(p.hasOwnProperty(j))continue;let $=!1;Hw(N)&&Hw(U)?$=!H_(N,U):$=N!==U,$?N!=null?q(j):f.add(j):N!==void 0&&f.has(j)?q(j):y.protectedKeys[j]=!0}y.prevProp=w,y.prevResolvedValues=I,y.isActive&&(p={...p,...I}),i&&n.blockInitialAnimation&&(P=!1);const rt=k&&_;P&&(!rt||D)&&d.push(...R.map(j=>{const N={type:m};if(typeof j=="string"&&i&&!rt&&n.manuallyAnimateOnMount&&n.parent){const{parent:U}=n,$=cu(U,j);if(U.enteringChildren&&$){const{delayChildren:et}=$.transition||{};N.delay=U_(U.enteringChildren,n,et)}}return{animation:j,options:N}}))}if(f.size){const S={};if(typeof u.initial!="boolean"){const m=cu(n,Array.isArray(u.initial)?u.initial[0]:u.initial);m&&m.transition&&(S.transition=m.transition)}f.forEach(m=>{const y=n.getBaseTarget(m),w=n.getValue(m);w&&(w.liveStyle=!0),S[m]=y??null}),d.push({animation:S})}let b=!!d.length;return i&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(b=!1),i=!1,b?t(d):Promise.resolve()}function l(c,u){var d;if(e[c].isActive===u)return Promise.resolve();(d=n.variantChildren)==null||d.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(c,u)}),e[c].isActive=u;const h=o(c);for(const f in e)e[f].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:r,getState:()=>e,reset:()=>{e=nC(),i=!0}}}function AF(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!H_(t,n):!1}function Da(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nC(){return{animate:Da(!0),whileInView:Da(),whileHover:Da(),whileTap:Da(),whileDrag:Da(),whileFocus:Da(),exit:Da()}}class Ma{constructor(t){this.isMounted=!1,this.node=t}update(){}}class SF extends Ma{constructor(t){super(t),t.animationState||(t.animationState=xF(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();P0(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let CF=0;class EF extends Ma{constructor(){super(...arguments),this.id=CF++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const TF={animation:{Feature:SF},exit:{Feature:EF}};function bf(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function Sm(n){return{point:{x:n.pageX,y:n.pageY}}}const kF=n=>t=>jx(t)&&n(t,Sm(t));function Yd(n,t,e,i){return bf(n,t,kF(e),i)}const W_=1e-4,_F=1-W_,PF=1+W_,G_=.01,MF=0-G_,DF=0+G_;function Cn(n){return n.max-n.min}function RF(n,t,e){return Math.abs(n-t)<=e}function iC(n,t,e,i=.5){n.origin=i,n.originPoint=ee(t.min,t.max,n.origin),n.scale=Cn(e)/Cn(t),n.translate=ee(e.min,e.max,n.origin)-n.originPoint,(n.scale>=_F&&n.scale<=PF||isNaN(n.scale))&&(n.scale=1),(n.translate>=MF&&n.translate<=DF||isNaN(n.translate))&&(n.translate=0)}function Kd(n,t,e,i){iC(n.x,t.x,e.x,i?i.originX:void 0),iC(n.y,t.y,e.y,i?i.originY:void 0)}function sC(n,t,e){n.min=e.min+t.min,n.max=n.min+Cn(t)}function LF(n,t,e){sC(n.x,t.x,e.x),sC(n.y,t.y,e.y)}function rC(n,t,e){n.min=t.min-e.min,n.max=n.min+Cn(t)}function qd(n,t,e){rC(n.x,t.x,e.x),rC(n.y,t.y,e.y)}function Ti(n){return[n("x"),n("y")]}const X_=({current:n})=>n?n.ownerDocument.defaultView:null,oC=(n,t)=>Math.abs(n-t);function NF(n,t){const e=oC(n.x,t.x),i=oC(n.y,t.y);return Math.sqrt(e**2+i**2)}class Y_{constructor(t,e,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=bv(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,v=NF(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!v)return;const{point:b}=f,{timestamp:S}=qe;this.history.push({...b,timestamp:S});const{onStart:m,onMove:y}=this.handlers;p||(m&&m(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=wv(p,this.transformPagePoint),Qt.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:v,onSessionEnd:b,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=bv(f.type==="pointercancel"?this.lastMoveEventInfo:wv(p,this.transformPagePoint),this.history);this.startEvent&&v&&v(f,m),b&&b(f,m)},!jx(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=s||window;const l=Sm(t),c=wv(l,this.transformPagePoint),{point:u}=c,{timestamp:h}=qe;this.history=[{...u,timestamp:h}];const{onSessionStart:d}=e;d&&d(t,bv(c,this.history)),this.removeListeners=bm(Yd(this.contextWindow,"pointermove",this.handlePointerMove),Yd(this.contextWindow,"pointerup",this.handlePointerUp),Yd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Aa(this.updatePoint)}}function wv(n,t){return t?{point:t(n.point)}:n}function aC(n,t){return{x:n.x-t.x,y:n.y-t.y}}function bv({point:n},t){return{point:n,delta:aC(n,K_(t)),offset:aC(n,IF(t)),velocity:FF(t,.1)}}function IF(n){return n[0]}function K_(n){return n[n.length-1]}function FF(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const s=K_(n);for(;e>=0&&(i=n[e],!(s.timestamp-i.timestamp>Zs(t)));)e--;if(!i)return{x:0,y:0};const r=Hi(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function OF(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?ee(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?ee(e,n,i.max):Math.min(n,e)),n}function lC(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function BF(n,{top:t,left:e,bottom:i,right:s}){return{x:lC(n.x,e,s),y:lC(n.y,t,i)}}function cC(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function jF(n,t){return{x:cC(n.x,t.x),y:cC(n.y,t.y)}}function VF(n,t){let e=.5;const i=Cn(n),s=Cn(t);return s>i?e=mf(t.min,t.max-i,n.min):i>s&&(e=mf(n.min,n.max-s,t.min)),no(0,1,e)}function zF(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const Gw=.35;function UF(n=Gw){return n===!1?n=0:n===!0&&(n=Gw),{x:uC(n,"left","right"),y:uC(n,"top","bottom")}}function uC(n,t,e){return{min:hC(n,t),max:hC(n,e)}}function hC(n,t){return typeof n=="number"?n:n[t]||0}const HF=new WeakMap;class $F{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=me(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Sm(d).point)},o=(d,f)=>{const{drag:p,dragPropagation:v,onDragStart:b}=this.getProps();if(p&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eI(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ti(m=>{let y=this.getAxisMotionValue(m).get()||0;if(Js.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const C=w.layout.layoutBox[m];C&&(y=Cn(C)*(parseFloat(y)/100))}}this.originPoint[m]=y}),b&&Qt.postRender(()=>b(d,f)),$w(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:v,onDirectionLock:b,onDrag:S}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:m}=f;if(v&&this.currentDirection===null){this.currentDirection=WF(m),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",f.point,m),this.updateAxis("y",f.point,m),this.visualElement.render(),S&&S(d,f)},c=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ti(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Y_(t,{onSessionStart:r,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:i,contextWindow:X_(this.visualElement)})}stop(t,e){const i=t||this.latestPointerEvent,s=e||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!i)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Qt.postRender(()=>l(i,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:s}=this.getProps();if(!i||!qm(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=OF(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:e}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;t&&Xc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=BF(i.layoutBox,t):this.constraints=!1,this.elastic=UF(e),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ti(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=zF(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Xc(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=GI(i,s.root,this.visualElement.getTransformPagePoint());let o=jF(s.layout.layoutBox,r);if(e){const l=e(HI(o));this.hasMutatedConstraints=!!l,l&&(o=R_(l))}return o}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Ti(h=>{if(!qm(h,e,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,v={type:"inertia",velocity:i?t[h]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(h,v)});return Promise.all(u).then(l)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return $w(this.visualElement,t),i.start(Yx(t,i,0,e,this.visualElement,!1))}stopAnimation(){Ti(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ti(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),s=i[e];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Ti(e=>{const{drag:i}=this.getProps();if(!qm(e,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(e);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[e];r.set(t[e]-ee(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!Xc(e)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ti(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=VF({min:c,max:c},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ti(o=>{if(!qm(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(ee(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;HF.set(this.visualElement,this);const t=this.visualElement.current,e=Yd(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();Xc(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Qt.read(i);const o=bf(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ti(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),e(),r(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=Gw,dragMomentum:l=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:l}}}function qm(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function WF(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class GF extends Ma{constructor(t){super(t),this.removeGroupControls=Wi,this.removeListeners=Wi,this.controls=new $F(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wi}unmount(){this.removeGroupControls(),this.removeListeners()}}const dC=n=>(t,e)=>{n&&Qt.postRender(()=>n(t,e))};class XF extends Ma{constructor(){super(...arguments),this.removePointerDownListener=Wi}onPointerDown(t){this.session=new Y_(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:X_(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:dC(t),onStart:dC(e),onMove:i,onEnd:(r,o)=>{delete this.session,s&&Qt.postRender(()=>s(r,o))}}}mount(){this.removePointerDownListener=Yd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fC(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const rd={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(st.test(n))n=parseFloat(n);else return n;const e=fC(n,t.target.x),i=fC(n,t.target.y);return`${e}% ${i}%`}},YF={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,s=Sa.parse(n);if(s.length>5)return i;const r=Sa.createTransformer(n),o=typeof s[0]!="number"?1:0,l=e.x.scale*t.x,c=e.y.scale*t.y;s[0+o]/=l,s[1+o]/=c;const u=ee(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),r(s)}};let xv=!1;class KF extends z.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=t;yI(qF),r&&(e.group&&e.group.add(r),i&&i.register&&s&&i.register(r),xv&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Sg.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:s,isPresent:r}=this.props,{projection:o}=i;return o&&(o.isPresent=r,xv=!0,s||t.layoutDependency!==e||e===void 0||t.isPresent!==r?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||Qt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Bx.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:s}=t;xv=!0,s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function q_(n){const[t,e]=uI(),i=z.useContext(_k);return T.jsx(KF,{...n,layoutGroup:i,switchLayoutGroup:z.useContext(M_),isPresent:t,safeToRemove:e})}const qF={borderRadius:{...rd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rd,borderTopRightRadius:rd,borderBottomLeftRadius:rd,borderBottomRightRadius:rd,boxShadow:YF};function QF(n,t,e){const i=pn(n)?n:Hh(n);return i.start(Yx("",i,t,e)),i.animation}const ZF=(n,t)=>n.depth-t.depth;class JF{constructor(){this.children=[],this.isDirty=!1}add(t){bx(this.children,t),this.isDirty=!0}remove(t){xx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(ZF),this.isDirty=!1,this.children.forEach(t)}}function tO(n,t){const e=Un.now(),i=({timestamp:s})=>{const r=s-e;r>=t&&(Aa(i),n(r-t))};return Qt.setup(i,!0),()=>Aa(i)}const Q_=["TopLeft","TopRight","BottomLeft","BottomRight"],eO=Q_.length,pC=n=>typeof n=="string"?parseFloat(n):n,mC=n=>typeof n=="number"||st.test(n);function nO(n,t,e,i,s,r){s?(n.opacity=ee(0,e.opacity??1,iO(i)),n.opacityExit=ee(t.opacity??1,0,sO(i))):r&&(n.opacity=ee(t.opacity??1,e.opacity??1,i));for(let o=0;o<eO;o++){const l=`border${Q_[o]}Radius`;let c=gC(t,l),u=gC(e,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||mC(c)===mC(u)?(n[l]=Math.max(ee(pC(c),pC(u),i),0),(Js.test(u)||Js.test(c))&&(n[l]+="%")):n[l]=u}(t.rotate||e.rotate)&&(n.rotate=ee(t.rotate||0,e.rotate||0,i))}function gC(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const iO=Z_(0,.5,jk),sO=Z_(.5,.95,Wi);function Z_(n,t,e){return i=>i<n?0:i>t?1:e(mf(n,t,i))}function yC(n,t){n.min=t.min,n.max=t.max}function Si(n,t){yC(n.x,t.x),yC(n.y,t.y)}function vC(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function wC(n,t,e,i,s){return n-=t,n=Ly(n,1/e,i),s!==void 0&&(n=Ly(n,1/s,i)),n}function rO(n,t=0,e=1,i=.5,s,r=n,o=n){if(Js.test(t)&&(t=parseFloat(t),t=ee(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=ee(r.min,r.max,i);n===r&&(l-=t),n.min=wC(n.min,t,e,l,s),n.max=wC(n.max,t,e,l,s)}function bC(n,t,[e,i,s],r,o){rO(n,t[e],t[i],t[s],t.scale,r,o)}const oO=["x","scaleX","originX"],aO=["y","scaleY","originY"];function xC(n,t,e,i){bC(n.x,t,oO,e?e.x:void 0,i?i.x:void 0),bC(n.y,t,aO,e?e.y:void 0,i?i.y:void 0)}function AC(n){return n.translate===0&&n.scale===1}function J_(n){return AC(n.x)&&AC(n.y)}function SC(n,t){return n.min===t.min&&n.max===t.max}function lO(n,t){return SC(n.x,t.x)&&SC(n.y,t.y)}function CC(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function tP(n,t){return CC(n.x,t.x)&&CC(n.y,t.y)}function EC(n){return Cn(n.x)/Cn(n.y)}function TC(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class cO{constructor(){this.members=[]}add(t){bx(this.members,t),t.scheduleRender()}remove(t){if(xx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let i;for(let s=e;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function uO(n,t,e){let i="";const s=n.x.translate/t.x,r=n.y.translate/t.y,o=(e==null?void 0:e.z)||0;if((s||r||o)&&(i=`translate3d(${s}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:u,rotate:h,rotateX:d,rotateY:f,skewX:p,skewY:v}=e;u&&(i=`perspective(${u}px) ${i}`),h&&(i+=`rotate(${h}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),p&&(i+=`skewX(${p}deg) `),v&&(i+=`skewY(${v}deg) `)}const l=n.x.scale*t.x,c=n.y.scale*t.y;return(l!==1||c!==1)&&(i+=`scale(${l}, ${c})`),i||"none"}const Av=["","X","Y","Z"],hO=1e3;let dO=0;function Sv(n,t,e,i){const{latestValues:s}=t;s[n]&&(e[n]=s[n],t.setStaticValue(n,0),i&&(i[n]=0))}function eP(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=V_(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",Qt,!(s||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&eP(i)}function nP({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},l=t==null?void 0:t()){this.id=dO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(mO),this.nodes.forEach(wO),this.nodes.forEach(bO),this.nodes.forEach(gO)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new JF)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Sx),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=y_(o)&&!aI(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),n){let h,d=0;const f=()=>this.root.updateBlockedByResize=!1;Qt.read(()=>{d=window.innerWidth}),n(o,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,h&&h(),h=tO(f,250),Sg.hasAnimatedSinceResize&&(Sg.hasAnimatedSinceResize=!1,this.nodes.forEach(PC)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||EO,{onLayoutAnimationStart:b,onLayoutAnimationComplete:S}=u.getProps(),m=!this.targetLayout||!tP(this.targetLayout,p),y=!d&&f;if(this.options.layoutRoot||this.resumeFrom||y||d&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...Fx(v,"layout"),onPlay:b,onComplete:S};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(h,y)}else d||PC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Aa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xO),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&eP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(_C);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(vO),this.nodes.forEach(fO),this.nodes.forEach(pO)):this.nodes.forEach(_C),this.clearAllSnapshots();const l=Un.now();qe.delta=no(0,1e3/60,l-qe.timestamp),qe.timestamp=l,qe.isProcessing=!0,hv.update.process(qe),hv.preRender.process(qe),hv.render.process(qe),qe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Bx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yO),this.sharedNodes.forEach(AO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Cn(this.snapshot.measuredBox.x)&&!Cn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=me(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!J_(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||Na(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),TO(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return me();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(kO))){const{scroll:h}=this.root;h&&(Yc(l.x,h.offset.x),Yc(l.y,h.offset.y))}return l}removeElementScroll(o){var c;const l=me();if(Si(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Si(l,o),Yc(l.x,d.offset.x),Yc(l.y,d.offset.y))}return l}applyTransform(o,l=!1){const c=me();Si(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Kc(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Na(h.latestValues)&&Kc(c,h.latestValues)}return Na(this.latestValues)&&Kc(c,this.latestValues),c}removeTransform(o){const l=me();Si(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Na(u.latestValues))continue;Vw(u.latestValues)&&u.updateSnapshot();const h=me(),d=u.measurePageBox();Si(h,d),xC(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Na(this.latestValues)&&xC(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=qe.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=me(),this.relativeTargetOrigin=me(),qd(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Si(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=me(),this.targetWithTransforms=me()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),LF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Si(this.target,this.layout.layoutBox),N_(this.target,this.targetDelta)):Si(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=me(),this.relativeTargetOrigin=me(),qd(this.relativeTargetOrigin,this.target,p.target),Si(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Vw(this.parent.latestValues)||L_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===qe.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Si(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;WI(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=me());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vC(this.prevProjectionDelta.x,this.projectionDelta.x),vC(this.prevProjectionDelta.y,this.projectionDelta.y)),Kd(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!TC(this.projectionDelta.x,this.prevProjectionDelta.x)||!TC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qc(),this.projectionDelta=qc(),this.projectionDeltaWithTransform=qc()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=qc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=me(),p=c?c.source:void 0,v=this.layout?this.layout.source:void 0,b=p!==v,S=this.getStack(),m=!S||S.members.length<=1,y=!!(b&&!m&&this.options.crossfade===!0&&!this.path.some(CO));this.animationProgress=0;let w;this.mixTargetDelta=C=>{const E=C/1e3;MC(d.x,o.x,E),MC(d.y,o.y,E),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qd(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SO(this.relativeTarget,this.relativeTargetOrigin,f,E),w&&lO(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=me()),Si(w,this.relativeTarget)),b&&(this.animationValues=h,nO(h,u,this.latestValues,E,y,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Aa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qt.update(()=>{Sg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Hh(0)),this.currentAnimation=QF(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:h}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&iP(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||me();const d=Cn(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const f=Cn(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Si(l,c),Kc(l,h),Kd(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new cO),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Sv("z",o,u,this.animationValues);for(let h=0;h<Av.length;h++)Sv(`rotate${Av[h]}`,o,u,this.animationValues),Sv(`skew${Av[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Ag(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Ag(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Na(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=uO(this.projectionDeltaWithTransform,this.treeScale,h);c&&(d=c(h,d)),o.transform=d;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in wf){if(h[v]===void 0)continue;const{correct:b,applyTo:S,isCSSVariable:m}=wf[v],y=d==="none"?h[v]:b(h[v],u);if(S){const w=S.length;for(let C=0;C<w;C++)o[S[C]]=y}else m?this.options.visualElement.renderState.vars[v]=y:o[v]=y}this.options.layoutId&&(o.pointerEvents=u===this?Ag(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(kC),this.root.sharedNodes.clear()}}}function fO(n){n.updateLayout()}function pO(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,o=t.source!==n.layout.source;r==="size"?Ti(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],p=Cn(f);f.min=i[d].min,f.max=f.min+p}):iP(r,t.layoutBox,i)&&Ti(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],p=Cn(i[d]);f.max=f.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+p)});const l=qc();Kd(l,i,t.layoutBox);const c=qc();o?Kd(c,n.applyTransform(s,!0),t.measuredBox):Kd(c,i,t.layoutBox);const u=!J_(l);let h=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const v=me();qd(v,t.layoutBox,f.layoutBox);const b=me();qd(b,i,p.layoutBox),tP(v,b)||(h=!0),d.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=v,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function mO(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function gO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function yO(n){n.clearSnapshot()}function kC(n){n.clearMeasurements()}function _C(n){n.isLayoutDirty=!1}function vO(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function PC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function wO(n){n.resolveTargetDelta()}function bO(n){n.calcProjection()}function xO(n){n.resetSkewAndRotation()}function AO(n){n.removeLeadSnapshot()}function MC(n,t,e){n.translate=ee(t.translate,0,e),n.scale=ee(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function DC(n,t,e,i){n.min=ee(t.min,e.min,i),n.max=ee(t.max,e.max,i)}function SO(n,t,e,i){DC(n.x,t.x,e.x,i),DC(n.y,t.y,e.y,i)}function CO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const EO={duration:.45,ease:[.4,0,.1,1]},RC=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),LC=RC("applewebkit/")&&!RC("chrome/")?Math.round:Wi;function NC(n){n.min=LC(n.min),n.max=LC(n.max)}function TO(n){NC(n.x),NC(n.y)}function iP(n,t,e){return n==="position"||n==="preserve-aspect"&&!RF(EC(t),EC(e),.2)}function kO(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const _O=nP({attachResizeListener:(n,t)=>bf(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Cv={current:void 0},sP=nP({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Cv.current){const n=new _O({});n.mount(window),n.setOptions({layoutScroll:!0}),Cv.current=n}return Cv.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),PO={pan:{Feature:XF},drag:{Feature:GF,ProjectionNode:sP,MeasureLayout:q_}};function IC(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,r=i[s];r&&Qt.postRender(()=>r(t,Sm(t)))}class MO extends Ma{mount(){const{current:t}=this.node;t&&(this.unmount=nI(t,(e,i)=>(IC(this.node,i,"Start"),s=>IC(this.node,s,"End"))))}unmount(){}}class DO extends Ma{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bm(bf(this.node.current,"focus",()=>this.onFocus()),bf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function FC(n,t,e){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),r=i[s];r&&Qt.postRender(()=>r(t,Sm(t)))}class RO extends Ma{mount(){const{current:t}=this.node;t&&(this.unmount=oI(t,(e,i)=>(FC(this.node,i,"Start"),(s,{success:r})=>FC(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Xw=new WeakMap,Ev=new WeakMap,LO=n=>{const t=Xw.get(n.target);t&&t(n)},NO=n=>{n.forEach(LO)};function IO({root:n,...t}){const e=n||document;Ev.has(e)||Ev.set(e,{});const i=Ev.get(e),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(NO,{root:n,...t})),i[s]}function FO(n,t,e){const i=IO(t);return Xw.set(n,e),i.observe(n),()=>{Xw.delete(n),i.unobserve(n)}}const OO={some:0,all:1};class BO extends Ma{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:s="some",once:r}=t,o={root:e?e.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:OO[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(c)};return FO(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(jO(t,e))&&this.startObserver()}unmount(){}}function jO({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const VO={inView:{Feature:BO},tap:{Feature:RO},focus:{Feature:DO},hover:{Feature:MO}},zO={layout:{ProjectionNode:sP,MeasureLayout:q_}},UO={...TF,...VO,...PO,...zO},Cc=UI(UO,eF),rP=()=>T.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center bg-white/80 backdrop-blur-sm z-50",children:[T.jsxs(Cc.div,{className:"relative flex items-center justify-center",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,ease:"easeOut"},children:[T.jsx(Cc.div,{className:"w-16 h-16 border-4 border-t-[#111B47] border-gray-200 rounded-full",animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"}}),T.jsx(Cc.div,{className:"absolute w-6 h-6 bg-[#111B47] rounded-full",animate:{scale:[1,1.2,1],opacity:[.9,.6,.9]},transition:{repeat:1/0,duration:1.2,ease:"easeInOut"}})]}),T.jsxs(Cc.div,{className:"mt-6 text-[#111B47] text-lg font-medium",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:[T.jsx(Cc.span,{animate:{opacity:[1,.5,1]},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},children:"Loading"}),T.jsx(Cc.span,{animate:{opacity:[0,1,0]},transition:{repeat:1/0,duration:1.5,ease:"easeInOut",times:[0,.5,1]},children:"..."})]})]}),HO=({data:n=wg})=>{const t=z.useRef(null),{currentLanguage:e,setLanguage:i,translatedCV:s,setTranslatedCV:r,t:o}=yx(),{translateStream:l,isTranslating:c,progress:u}=hL(),h=s||n;z.useEffect(()=>{if(e==="Franais"){r(null);return}let p="",v=null;return v=l(e,n,b=>{p=b;try{const S=kk(p);r(S)}catch{}},b=>{r(b)}),()=>{v&&v()}},[e,n]);const d=YR.useReactToPrint({contentRef:t,documentTitle:`${h.personalInfo.fullName} - CV`,pageStyle:`
      @page {
        size: A4;
        margin: 0.75in;
        @bottom-center {
          content: "Page " counter(page) "/" counter(pages);
          font-size: 10px;
          color: #666;
        }
      }
      html { counter-reset: page; }
      @media print {
        body { -webkit-print-color-adjust: exact; }
        .no-print { display: none !important; }
        .print\\:break-before-page { page-break-before: always !important; }
        .print\\:m-0 { margin: 0 !important; }
        .page-number {
          position: fixed;
          bottom: 0.5in;
          right: 0.75in;
          font-size: 10px;
          color: #666;
        }
        .page-number::after { content: counter(page); }
        * { box-sizing: border-box; }
      }
    `}),f=()=>{i("Franais"),r(null)};return c&&u.percentage<10?T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center",children:T.jsxs("div",{className:"text-center",children:[T.jsx(rP,{}),T.jsx("p",{className:"mt-4 text-gray-600",children:o("translating")}),u.total>0&&T.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[u.current," / ",u.total," chunks (",u.percentage,"%)"]})]})}):T.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 relative overflow-hidden",children:[T.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[T.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 bg-blue-100 rounded-full opacity-20 animate-pulse"}),T.jsx("div",{className:"absolute bottom-20 left-10 w-24 h-24 bg-indigo-100 rounded-full opacity-30"}),T.jsx("div",{className:"absolute top-1/2 left-1/4 w-16 h-16 bg-blue-200 transform rotate-45 opacity-25"}),T.jsx("div",{className:"absolute top-1/3 right-1/4 w-20 h-20 bg-indigo-200 transform rotate-12 opacity-20"})]}),c&&u.percentage>=10&&T.jsxs("div",{className:"no-print fixed top-20 left-1/2 transform -translate-x-1/2 z-50 bg-white px-6 py-3 rounded-lg shadow-lg border border-gray-200",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),T.jsx("span",{className:"text-gray-700 font-medium",children:o("translating")}),T.jsxs("span",{className:"text-sm text-gray-500",children:[u.percentage,"%"]})]}),T.jsx("div",{className:"mt-2 w-48 h-2 bg-gray-200 rounded-full overflow-hidden",children:T.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${u.percentage}%`}})})]}),T.jsxs("div",{className:"no-print fixed top-6 right-6 z-50 flex gap-3",children:[T.jsxs("div",{className:"relative",children:[T.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:T.jsx(Ek,{size:18,className:"text-gray-600"})}),T.jsxs("select",{value:e,onChange:p=>i(p.target.value),disabled:c,className:`pl-10 pr-8 py-2.5 bg-white border-2 border-gray-300 rounded-lg shadow-sm 
                     hover:border-blue-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 
                     transition-all duration-200 cursor-pointer appearance-none font-medium text-gray-700
                     disabled:opacity-50 disabled:cursor-not-allowed`,style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M10.293 3.293L6 7.586 1.707 3.293A1 1 0 00.293 4.707l5 5a1 1 0 001.414 0l5-5a1 1 0 10-1.414-1.414z'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 0.75rem center"},children:[T.jsx("option",{value:"French",children:"Franais"}),T.jsx("option",{value:"English",children:"English"}),T.jsx("option",{value:"Arabic",children:""}),T.jsx("option",{value:"German",children:"Deutsch"}),T.jsx("option",{value:"Spanish",children:"Espaol"})]})]}),T.jsx("button",{onClick:f,disabled:c,className:`px-4 py-2.5 bg-gray-500 text-white rounded-lg shadow-sm hover:bg-gray-600 
                   transition-all duration-200 hover:scale-105 font-medium
                   disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100`,children:"Reset"}),T.jsxs("button",{onClick:d,disabled:c,className:`flex items-center gap-2 px-4 py-2.5 bg-[#4590e6] text-white rounded-lg shadow-lg 
                   hover:bg-blue-600 transition-all duration-200 hover:scale-105 font-medium
                   disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100`,title:o("exportPdf"),children:[T.jsx(JR,{size:18}),o("exportPdf")]})]}),T.jsx("div",{className:"flex justify-center items-center py-10",children:T.jsx(gx,{ref:t,data:h})})]})},$O=()=>({personalInfo:{fullName:"",professionalTitle:"",avatarUrl:""},profile:"",contact:{email:"",phone:"",location:"",github:"",linkedin:""},skills:[],technologies:[],experiences:[],languages:[],certifications:[],customSections:[],sectionOrder:["personal","profile","skills","technologies","experiences","certifications","languages"],sectionTitles:{profile:"Profil Professionnel",skills:"Domaines de Comptences",technologies:"Environnements Techniques",experiences:"Expriences Professionnelles",certifications:"Certifications",languages:"Langues"}}),WO=(n,t)=>({id:`custom-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:n,subtitle:t,blocks:[""]}),OC=n=>(n.customSections||(n.customSections=[]),(!n.sectionOrder||n.sectionOrder.length===0)&&(n.sectionOrder=["personal","profile","skills","technologies","experiences","certifications","languages"]),n.sectionTitles.skills||(n.sectionTitles.skills="Domaines de Comptences"),n.technologies&&n.technologies.length>0&&(n.technologies=n.technologies.map((t,e)=>t.id?t:{...t,id:`tech-${e+1}`})),n),GO=({data:n,onUpdate:t,onSave:e,onReset:i,onTogglePreview:s,isPreviewMode:r})=>{const[o,l]=z.useState("personal"),[c,u]=z.useState(n.personalInfo.avatarUrl||null),{t:h}=yx();z.useEffect(()=>{u(n.personalInfo.avatarUrl||null)},[n.personalInfo.avatarUrl]);const d=(M,L)=>{const F={...n};let tt=F;for(let Z=0;Z<M.length-1;Z++)tt=tt[M[Z]];tt[M[M.length-1]]=L,t(F)},f=(M,L,F,tt)=>{const Z={...n},Pt=Z[M];Pt&&Pt[L]&&typeof Pt[L]=="object"?Pt[L]={...Pt[L],[F]:tt}:M==="skills"&&typeof Pt[L]=="string"&&(Pt[L]=tt),t(Z)},p=()=>{const M={id:Date.now().toString(),jobTitle:"",company:"",missions:[""]};t({...n,experiences:[...n.experiences,M]})},v=M=>{t({...n,experiences:n.experiences.filter((L,F)=>F!==M)})},b=M=>{const L={...n};L.experiences[M].missions.push(""),t(L)},S=(M,L)=>{const F={...n};F.experiences[M].missions=F.experiences[M].missions.filter((tt,Z)=>Z!==L),t(F)},m=(M,L,F)=>{const tt={...n};tt.experiences[M].missions[L]=F,t(tt)},y=()=>{t({...n,languages:[...n.languages,{name:"",flag:"",level:""}]})},w=M=>{t({...n,languages:n.languages.filter((L,F)=>F!==M)})},C=()=>{t({...n,certifications:[...n.certifications,{name:"",issuer:""}]})},E=M=>{t({...n,certifications:n.certifications.filter((L,F)=>F!==M)})},k=()=>{t({...n,skills:[...n.skills,""]})},_=M=>{t({...n,skills:n.skills.filter((L,F)=>F!==M)})},P=(M,L)=>{const F={...n};F.skills[M]=L,t(F)},D=()=>{const M={id:Date.now().toString(),title:"",items:""};t({...n,technologies:[...n.technologies,M]})},R=M=>{t({...n,technologies:n.technologies.filter((L,F)=>F!==M)})},I=(M,L)=>{const F={...n};F.technologies[M].title=L,t(F)},V=(M,L)=>{const F={...n};F.technologies[M].items=L,t(F)},Q=()=>{const M=WO("Nouvelle Section",""),L={...n};L.customSections.push(M),L.sectionOrder.push(M.id),t(L),l(M.id)},q=M=>{const L={...n};L.customSections=L.customSections.filter(F=>F.id!==M),L.sectionOrder=L.sectionOrder.filter(F=>F!==M),t(L),o===M&&l("personal")},rt=(M,L)=>{const F={...n},tt=F.customSections.find(Z=>Z.id===M);tt&&(tt.title=L),t(F)},G=(M,L)=>{const F={...n},tt=F.customSections.find(Z=>Z.id===M);tt&&(tt.subtitle=L),t(F)},j=M=>{const L={...n},F=L.customSections.find(tt=>tt.id===M);F&&F.blocks.push(""),t(L)},N=(M,L)=>{const F={...n},tt=F.customSections.find(Z=>Z.id===M);tt&&(tt.blocks=tt.blocks.filter((Z,Pt)=>Pt!==L)),t(F)},U=(M,L,F)=>{const tt={...n},Z=tt.customSections.find(Pt=>Pt.id===M);Z&&(Z.blocks[L]=F),t(tt)},$=M=>{var F;const L=(F=M.target.files)==null?void 0:F[0];if(L){if(L.size>5242880){alert("Le fichier dpasse la limite de 5 Mo."),M.target.value="";return}const Z=new FileReader;Z.onloadend=()=>{const Pt=Z.result;d(["personalInfo","avatarUrl"],Pt),u(Pt)},Z.readAsDataURL(L)}},et=()=>{d(["personalInfo","avatarUrl"],""),u(null);const M=document.getElementById("avatarInput");M&&(M.value="")},nt=[{id:"personal",label:h("personalInfo"),icon:""},{id:"profile",label:h("profile"),icon:""},{id:"contact",label:h("contact"),icon:""},{id:"skills",label:h("skills"),icon:""},{id:"technologies",label:h("technologies"),icon:""},{id:"experiences",label:h("experiences"),icon:""},{id:"languages",label:h("languages"),icon:""},{id:"certifications",label:h("certifications"),icon:""},...n.customSections.map(M=>({id:M.id,label:M.title||h("customSection"),icon:""}))];return T.jsxs("div",{className:"h-screen flex flex-col bg-white",children:[T.jsxs("div",{className:"bg-gray-800 text-white p-4 flex justify-between items-center shadow-lg",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(SS,{size:24}),T.jsx("h2",{className:"text-xl font-bold",children:h("editor")})]}),T.jsxs("div",{className:"flex gap-2",children:[T.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:[r?T.jsx(SS,{size:18}):T.jsx(tL,{size:18}),h(r?"edit":"preview")]}),T.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors",children:[T.jsx(aL,{size:18}),h("reset")]}),T.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors",children:[T.jsx(lL,{size:18}),h("save")]})]})]}),T.jsxs("div",{className:"flex flex-1 overflow-hidden flex-col lg:flex-row",children:[T.jsx("div",{className:"w-full lg:w-2/4 overflow-y-auto p-4 lg:p-8 border-b lg:border-b-0 lg:border-r border-gray-200",children:T.jsxs("div",{className:"w-full max-w-[650px] mx-auto space-y-6",children:[T.jsx("div",{className:"flex flex-1 overflow-hidden",children:T.jsx("div",{className:"bg-gray-50 border-r border-gray-200 w-full",children:T.jsxs("nav",{className:"p-4 flex gap-2 overflow-x-auto whitespace-nowrap flex-wrap",children:[nt.map(M=>T.jsxs("button",{onClick:()=>l(M.id),className:`inline-flex items-center gap-3 min-w-[140px] text-left px-4 py-3 rounded-lg transition-colors ${o===M.id?"bg-blue-600 text-white":"hover:bg-gray-200 text-gray-700"}`,children:[T.jsx("span",{className:"text-xl",children:M.icon}),T.jsx("span",{className:"font-medium",children:M.label})]},M.id)),T.jsxs("button",{onClick:Q,className:"inline-flex items-center gap-2 min-w-[140px] text-left px-4 py-3 rounded-lg transition-colors border-2 border-dashed border-gray-300 hover:border-blue-500 hover:bg-blue-50 text-gray-600 hover:text-blue-600",children:[T.jsx(uo,{size:18}),T.jsx("span",{className:"font-medium",children:"Section Personnalise"})]})]})})}),o==="personal"&&T.jsxs("div",{className:"space-y-4",children:[T.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Informations Personnelles"}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom Complet"}),T.jsx("input",{type:"text",value:n.personalInfo.fullName,onChange:M=>d(["personalInfo","fullName"],M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre Professionnel"}),T.jsx("input",{type:"text",value:n.personalInfo.professionalTitle,onChange:M=>d(["personalInfo","professionalTitle"],M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),T.jsxs("div",{className:"mt-4 border-2 border-gray-400 rounded-lg p-8",children:[!c&&T.jsxs("button",{onClick:()=>{var M;return(M=document.getElementById("avatarInput"))==null?void 0:M.click()},className:"flex justify-center items-center mx-auto my-1 gap-2 px-4 py-3 bg-green-600 hover:bg-green-700 rounded-lg text-white font-medium transition",children:[T.jsx("span",{className:"text-2xl",children:""}),"Importer votre image portfeuil"]}),T.jsxs("div",{className:"flex justify-between items-center",children:[c&&T.jsx("div",{className:"flex items-center gap-4 mt-6",children:T.jsxs("div",{className:"relative w-24 h-24 rounded-full border-2 border-gray-100 overflow-visible",children:[T.jsx("img",{src:c,alt:"Aperu de la photo",className:"w-full h-full rounded-full object-cover"}),T.jsx("button",{onClick:et,className:"absolute -top-2 -right-2 bg-red-600 text-white rounded-full p-1 shadow-lg hover:bg-red-700","aria-label":"Supprimer la photo",children:T.jsx(ir,{size:14})})]})}),T.jsxs("div",{children:[T.jsx("input",{id:"avatarInput",type:"file",accept:"image/*",onChange:$,className:`${c?"block pointer text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600":"hidden"}`}),c&&T.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Max 5 Mo. Formats accepts : JPG, PNG, GIF. "})]})]})]})]}),o==="profile"&&T.jsxs("div",{className:"space-y-4",children:[T.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Profil Professionnel"}),T.jsx("textarea",{value:n.profile,onChange:M=>d(["profile"],M.target.value),rows:8,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o==="contact"&&T.jsxs("div",{className:"space-y-4",children:[T.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Contact"}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),T.jsx("input",{type:"email",value:n.contact.email,onChange:M=>d(["contact","email"],M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tlphone"}),T.jsx("input",{type:"tel",value:n.contact.phone,onChange:M=>d(["contact","phone"],M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Localisation"}),T.jsx("input",{type:"text",value:n.contact.location,onChange:M=>d(["contact","location"],M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub"}),T.jsx("input",{type:"text",value:n.contact.github,onChange:M=>d(["contact","github"],M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn"}),T.jsx("input",{type:"text",value:n.contact.linkedin,onChange:M=>d(["contact","linkedin"],M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]}),o==="skills"&&T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Domaines de Comptences"}),T.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[T.jsx(uo,{size:18}),"Ajouter"]})]}),n.skills.map((M,L)=>T.jsxs("div",{className:"flex gap-2",children:[T.jsx("textarea",{value:M,onChange:F=>P(L,F.target.value),rows:2,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Comptence"}),T.jsx("button",{onClick:()=>_(L),className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:T.jsx(ir,{size:18})})]},L))]}),o==="technologies"&&T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Environnements Techniques"}),T.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[T.jsx(uo,{size:18}),"Ajouter Catgorie"]})]}),n.technologies.map((M,L)=>T.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50 space-y-4",children:[T.jsxs("div",{className:"flex justify-between items-center",children:[T.jsx("input",{type:"text",value:M.title,onChange:F=>I(L,F.target.value),className:"text-lg font-semibold text-gray-800 px-2 py-1 border border-gray-300 rounded-lg flex-1",placeholder:"Titre de la catgorie"}),T.jsx("button",{onClick:()=>R(L),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 ml-3",children:T.jsx(ir,{size:16})})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"lments (spars par des virgules)"}),T.jsx("textarea",{value:M.items,onChange:F=>V(L,F.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: PHP 7, JavaScript, TypeScript"})]})]},L))]}),o==="experiences"&&T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Expriences Professionnelles"}),T.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[T.jsx(uo,{size:18}),"Ajouter"]})]}),n.experiences.map((M,L)=>T.jsxs("div",{className:"border border-gray-300 rounded-lg p-6 space-y-4 bg-gray-50",children:[T.jsxs("div",{className:"flex justify-between items-start",children:[T.jsxs("h4",{className:"text-lg font-bold text-gray-800",children:["Exprience ",L+1]}),T.jsx("button",{onClick:()=>v(L),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:T.jsx(ir,{size:16})})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre du Poste"}),T.jsx("input",{type:"text",value:M.jobTitle,onChange:F=>f("experiences",L,"jobTitle",F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entreprise"}),T.jsx("input",{type:"text",value:M.company,onChange:F=>f("experiences",L,"company",F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),T.jsxs("div",{children:[T.jsxs("div",{className:"flex justify-between items-center mb-2",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Missions"}),T.jsxs("button",{onClick:()=>b(L),className:"flex items-center gap-1 px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700",children:[T.jsx(uo,{size:14}),"Mission"]})]}),T.jsx("div",{className:"space-y-2",children:M.missions.map((F,tt)=>T.jsxs("div",{className:"flex gap-2",children:[T.jsx("textarea",{value:F,onChange:Z=>m(L,tt,Z.target.value),rows:2,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Mission ou Stack"}),T.jsx("button",{onClick:()=>S(L,tt),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:T.jsx(ir,{size:14})})]},tt))})]})]},M.id))]}),o==="languages"&&T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Langues"}),T.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[T.jsx(uo,{size:18}),"Ajouter"]})]}),n.languages.map((M,L)=>T.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 space-y-3 bg-gray-50",children:[T.jsxs("div",{className:"flex justify-between items-start",children:[T.jsxs("h4",{className:"text-sm font-bold text-gray-700",children:["Langue ",L+1]}),T.jsx("button",{onClick:()=>w(L),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:T.jsx(ir,{size:14})})]}),T.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Nom"}),T.jsx("input",{type:"text",value:M.name,onChange:F=>f("languages",L,"name",F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Drapeau"}),T.jsx("input",{type:"text",value:M.flag,onChange:F=>f("languages",L,"flag",F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",placeholder:""})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Niveau"}),T.jsx("input",{type:"text",value:M.level,onChange:F=>f("languages",L,"level",F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]})]})]},L))]}),o==="certifications"&&T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Certifications"}),T.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[T.jsx(uo,{size:18}),"Ajouter"]})]}),n.certifications.map((M,L)=>T.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 space-y-3 bg-gray-50",children:[T.jsxs("div",{className:"flex justify-between items-start",children:[T.jsxs("h4",{className:"text-sm font-bold text-gray-700",children:["Certification ",L+1]}),T.jsx("button",{onClick:()=>E(L),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm",children:T.jsx(ir,{size:14})})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Nom"}),T.jsx("input",{type:"text",value:M.name,onChange:F=>f("certifications",L,"name",F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Organisme"}),T.jsx("input",{type:"text",value:M.issuer,onChange:F=>f("certifications",L,"issuer",F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm"})]})]})]},L))]}),n.customSections.map(M=>o===M.id&&T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex justify-between items-center mb-6",children:[T.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Section Personnalise"}),T.jsxs("button",{onClick:()=>q(M.id),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[T.jsx(ir,{size:18}),"Supprimer Section"]})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre de la Section"}),T.jsx("input",{type:"text",value:M.title,onChange:L=>rt(M.id,L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Projets, Publications, Rcompenses..."})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sous-titre (optionnel)"}),T.jsx("input",{type:"text",value:M.subtitle||"",onChange:L=>G(M.id,L.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Sous-titre optionnel"})]}),T.jsxs("div",{children:[T.jsxs("div",{className:"flex justify-between items-center mb-2",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contenu"}),T.jsxs("button",{onClick:()=>j(M.id),className:"flex items-center gap-1 px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700",children:[T.jsx(uo,{size:14}),"Bloc"]})]}),T.jsx("div",{className:"space-y-2",children:M.blocks.map((L,F)=>T.jsxs("div",{className:"flex gap-2",children:[T.jsx("textarea",{value:L,onChange:tt=>U(M.id,F,tt.target.value),rows:3,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Contenu du bloc"}),T.jsx("button",{onClick:()=>N(M.id,F),className:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:T.jsx(ir,{size:14})})]},F))})]})]},M.id))]})}),T.jsx("div",{className:"w-full lg:w-2/4 overflow-y-auto p-4 bg-gray-50",children:T.jsx(gx,{data:n,activeSection:o})})]})]})},Qm="cv-data",XO=2e3,YO=()=>{const[n,t]=z.useState(()=>{const p=localStorage.getItem(Qm);if(p)try{const v=JSON.parse(p);return OC(v)}catch(v){return console.error("Error parsing saved CV data:",v),wg}return wg}),[e,i]=z.useState(!1),[s,r]=z.useState(!0),o=z.useRef(null);z.useEffect(()=>(s&&e&&(o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{c()},XO)),()=>{o.current&&clearTimeout(o.current)}),[n,e,s]);const l=z.useCallback(p=>{t(p),i(!0)},[]),c=z.useCallback(()=>{try{return localStorage.setItem(Qm,JSON.stringify(n)),i(!1),!0}catch(p){return console.error("Error saving CV data:",p),!1}},[n]),u=z.useCallback(()=>{t(wg),localStorage.removeItem(Qm),i(!1)},[]),h=z.useCallback(()=>{const p=$O();t(p),localStorage.removeItem(Qm),i(!1)},[]),d=z.useCallback(p=>{const v=OC(p);t(v),i(!0)},[]),f=z.useCallback(()=>{r(p=>!p)},[]);return{cvData:n,updateCVData:l,saveCVData:c,resetCVData:u,createNewCV:h,loadCVData:d,hasUnsavedChanges:e,autoSaveEnabled:s,toggleAutoSave:f}},xn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Yw=[.001,0,0,.001,0,0],Tv=1.35,hi={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},vo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},xf="pdfjs_internal_editor_",ct={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},vt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},KO={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Kw={TRIANGLES:1,LATTICE:2,PATCH:3},He={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Cg={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},we={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Tc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},D0={ERRORS:0,WARNINGS:1,INFOS:5},Af={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},od={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},qO={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let R0=D0.WARNINGS;function QO(n){Number.isInteger(n)&&(R0=n)}function ZO(){return R0}function L0(n){R0>=D0.INFOS&&console.info(`Info: ${n}`)}function at(n){R0>=D0.WARNINGS&&console.warn(`Warning: ${n}`)}function jt(n){throw new Error(n)}function wt(n,t){n||jt(t)}function JO(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function oP(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=sB(n)}catch{}}const i=t?URL.parse(n,t):URL.parse(n);return JO(i)?i:null}function aP(n,t,e=!1){const i=URL.parse(n);return i?(i.hash=t,i.href):e&&oP(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function ht(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const xc=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class BC extends xc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class kv extends xc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class qw extends xc{constructor(t){super(t,"InvalidPDFException")}}class Ny extends xc{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class tB extends xc{constructor(t){super(t,"FormatError")}}class Ca extends xc{constructor(t){super(t,"AbortException")}}function lP(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&jt("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Cm(n){typeof n!="string"&&jt("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function eB(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function nB(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function iB(){try{return new Function(""),!0}catch{return!1}}class en{static get isLittleEndian(){return ht(this,"isLittleEndian",nB())}static get isEvalSupported(){return ht(this,"isEvalSupported",iB())}static get isOffscreenCanvasSupported(){return ht(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ht(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return ht(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return ht(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return ht(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return ht(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const _v=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Kr,Eg,Qw;class K{static makeHexColor(t,e,i){return`#${_v[t]}${_v[e]}${_v[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const s=t[i],r=t[i+1];t[i]=s*e[0]+r*e[2]+e[4],t[i+1]=s*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const s=e[0],r=e[1],o=e[2],l=e[3],c=e[4],u=e[5];for(let h=0;h<6;h+=2){const d=t[i+h],f=t[i+h+1];t[i+h]=d*s+f*o+c,t[i+h+1]=d*r+f*l+u}}static applyInverseTransform(t,e){const i=t[0],s=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-i*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,i){const s=e[0],r=e[1],o=e[2],l=e[3],c=e[4],u=e[5],h=t[0],d=t[1],f=t[2],p=t[3];let v=s*h+c,b=v,S=s*f+c,m=S,y=l*d+u,w=y,C=l*p+u,E=C;if(r!==0||o!==0){const k=r*h,_=r*f,P=o*d,D=o*p;v+=P,m+=P,S+=D,b+=D,y+=k,E+=k,C+=_,w+=_}i[0]=Math.min(i[0],v,S,b,m),i[1]=Math.min(i[1],y,C,w,E),i[2]=Math.max(i[2],v,S,b,m),i[3]=Math.max(i[3],y,C,w,E)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],s=t[1],r=t[2],o=t[3],l=i**2+s**2,c=i*r+s*o,u=r**2+o**2,h=(l+u)/2,d=Math.sqrt(h**2-(l*u-c**2));e[0]=Math.sqrt(h+d||1),e[1]=Math.sqrt(h-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[i,r,s,o]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,s,r){r[0]=Math.min(r[0],t,i),r[1]=Math.min(r[1],e,s),r[2]=Math.max(r[2],t,i),r[3]=Math.max(r[3],e,s)}static bezierBoundingBox(t,e,i,s,r,o,l,c,u){u[0]=Math.min(u[0],t,l),u[1]=Math.min(u[1],e,c),u[2]=Math.max(u[2],t,l),u[3]=Math.max(u[3],e,c),A(this,Kr,Qw).call(this,t,i,r,l,e,s,o,c,3*(-t+3*(i-r)+l),6*(t-2*i+r),3*(i-t),u),A(this,Kr,Qw).call(this,t,i,r,l,e,s,o,c,3*(-e+3*(s-o)+c),6*(e-2*s+o),3*(s-e),u)}}Kr=new WeakSet,Eg=function(t,e,i,s,r,o,l,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,v=d*(d*(d*t+3*u*e)+3*f*i)+p*s,b=d*(d*(d*r+3*u*o)+3*f*l)+p*c;h[0]=Math.min(h[0],v),h[1]=Math.min(h[1],b),h[2]=Math.max(h[2],v),h[3]=Math.max(h[3],b)},Qw=function(t,e,i,s,r,o,l,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&A(this,Kr,Eg).call(this,t,e,i,s,r,o,l,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const v=Math.sqrt(p),b=2*u;A(this,Kr,Eg).call(this,t,e,i,s,r,o,l,c,(-h+v)/b,f),A(this,Kr,Eg).call(this,t,e,i,s,r,o,l,c,(-h-v)/b,f)},x(K,Kr);function sB(n){return decodeURIComponent(escape(n))}let Pv=null,jC=null;function rB(n){return Pv||(Pv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,jC=new Map([["","t"]])),n.replaceAll(Pv,(t,e,i)=>e?e.normalize("NFKC"):jC.get(i))}function cP(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),lP(n)}const Qc="pdfjs_internal_id_";function oB(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,s,...r]=e;if(!n(i)&&!Number.isInteger(i)||!t(s))return!1;const o=r.length;let l=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function An(n,t,e){return Math.min(Math.max(n,t),e)}function uP(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(lP(n))}function aB(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Cm(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});class Sf{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(Sf.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const u of r.children)s(u)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class hP{static setupStorage(t,e,i,s,r){const o=s.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of i.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:r}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&t.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,u)}l&&r.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){var d,f;const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,r=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const l=r!=="richText",c=t.div;if(c.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),l&&Sf.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const h=[[s,-1,o]];for(;h.length>0;){const[p,v,b]=h.at(-1);if(v+1===p.children.length){h.pop();continue}const S=p.children[++h.at(-1)[1]];if(S===null)continue;const{name:m}=S;if(m==="#text"){const w=document.createTextNode(S.value);u.push(w),b.append(w);continue}const y=(d=S==null?void 0:S.attributes)!=null&&d.xmlns?document.createElementNS(S.attributes.xmlns,m):document.createElement(m);if(b.append(y),S.attributes&&this.setAttributes({html:y,element:S,storage:e,intent:r,linkService:i}),((f=S.children)==null?void 0:f.length)>0)h.push([S,-1,y]);else if(S.value){const w=document.createTextNode(S.value);l&&Sf.shouldBuildText(m)&&u.push(w),y.append(w)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const sr="http://www.w3.org/2000/svg",Ba=class Ba{};O(Ba,"CSS",96),O(Ba,"PDF",72),O(Ba,"PDF_TO_CSS_UNITS",Ba.CSS/Ba.PDF);let Ea=Ba;async function Em(n,t="text"){if(gd(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class Tm{constructor({viewBox:t,userUnit:e,scale:i,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=o,i*=e;const c=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,p=-p);let v,b,S,m;h===0?(v=Math.abs(u-t[1])*i+r,b=Math.abs(c-t[0])*i+o,S=(t[3]-t[1])*i,m=(t[2]-t[0])*i):(v=Math.abs(c-t[0])*i+r,b=Math.abs(u-t[1])*i+o,S=(t[2]-t[0])*i,m=(t[3]-t[1])*i),this.transform=[h*i,d*i,f*i,p*i,v-h*i*c-f*i*u,b-d*i*c-p*i*u],this.width=S,this.height=m}get rawDims(){const t=this.viewBox;return ht(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Tm({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){const i=[t,e];return K.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];K.applyTransform(e,this.transform);const i=[t[2],t[3]];return K.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return K.applyInverseTransform(i,this.transform),i}}class Kx extends xc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function N0(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function qx(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function lB(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function cB(n,t="document.pdf"){if(typeof n!="string")return t;if(N0(n))return at('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return t;const s=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},r=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(r.test(o))return s(o);if(i.searchParams.size>0){const l=Array.from(i.searchParams.values()).reverse();for(const u of l)if(r.test(u))return s(u);const c=Array.from(i.searchParams.keys()).reverse();for(const u of c)if(r.test(u))return s(u)}if(i.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(c)return s(c[0])}return t}class VC{constructor(){O(this,"started",Object.create(null));O(this,"times",[])}time(t){t in this.started&&at(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||at(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-s}ms
`);return t.join("")}}function gd(n,t){const e=t?URL.parse(n,t):URL.parse(n);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Ki(n){n.preventDefault()}function de(n){n.preventDefault(),n.stopPropagation()}function uB(n){console.log("Deprecated API usage: "+n)}var Tf;class Iy{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;a(this,Tf)||g(this,Tf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,Tf).exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,l+=d):u==="+"&&(o-=h,l-=d),new Date(Date.UTC(i,s,r,o,l,c))}}Tf=new WeakMap,x(Iy,Tf);function hB(n,{scale:t=1,rotation:e=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new Tm({viewBox:r,userUnit:1,scale:t,rotation:e})}function km(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(at(`Not a valid color format: "${n}"`),[0,0,0])}function dB(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,km(i))}t.remove()}function Jt(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform();return[t,e,i,s,r,o]}function As(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[t,e,i,s,r,o]}function gc(n,t,e=!1,i=!0){if(t instanceof Tm){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:o}=n,l=en.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${r}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,d=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}i&&n.setAttribute("data-main-rotation",t.rotation)}class tr{constructor(){const{pixelRatio:t}=tr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,s,r=-1){let o=1/0,l=1/0,c=1/0;i=tr.capPixels(i,r),i>0&&(o=Math.sqrt(i/(t*e))),s!==-1&&(l=s/t,c=s/e);const u=Math.min(o,l,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const Zw=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class fB{static get isDarkMode(){var t;return ht(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class pB{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),ht(this,"commentForegroundColor",km(i))}}function mB(n,t,e,i){i=Math.min(Math.max(i??1,0),1);const s=255*(1-i);return n=Math.round(n*i+s),t=Math.round(t*i+s),e=Math.round(e*i+s),[n,t,e]}function zC(n,t){const e=n[0]/255,i=n[1]/255,s=n[2]/255,r=Math.max(e,i,s),o=Math.min(e,i,s),l=(r+o)/2;if(r===o)t[0]=t[1]=0;else{const c=r-o;switch(t[1]=l<.5?c/(r+o):c/(2-r-o),r){case e:t[0]=((i-s)/c+(i<s?6:0))*60;break;case i:t[0]=((s-e)/c+2)*60;break;case s:t[0]=((e-i)/c+4)*60;break}}t[2]=l}function Jw(n,t){const e=n[0],i=n[1],s=n[2],r=(1-Math.abs(2*s-1))*i,o=r*(1-Math.abs(e/60%2-1)),l=s-r/2;switch(Math.floor(e/60)){case 0:t[0]=r+l,t[1]=o+l,t[2]=l;break;case 1:t[0]=o+l,t[1]=r+l,t[2]=l;break;case 2:t[0]=l,t[1]=r+l,t[2]=o+l;break;case 3:t[0]=l,t[1]=o+l,t[2]=r+l;break;case 4:t[0]=o+l,t[1]=l,t[2]=r+l;break;case 5:case 6:t[0]=r+l,t[1]=l,t[2]=o+l;break}}function UC(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function HC(n,t,e){Jw(n,e),e.map(UC);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];Jw(t,e),e.map(UC);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)}const $C=new Map;function gB(n,t){const e=n[0]+n[1]*256+n[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=$C.get(e);if(i)return i;const s=new Float32Array(9),r=s.subarray(0,3),o=s.subarray(3,6);zC(n,o);const l=s.subarray(6,9);zC(t,l);const c=l[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),HC(o,l,r)<u){let h,d;c?(h=o[2],d=1):(h=0,d=o[2]);const f=.005;for(;d-h>f;){const p=o[2]=(h+d)/2;c===HC(o,l,r)<u?h=p:d=p}o[2]=c?d:h}return Jw(o,r),i=K.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),$C.set(e,i),i}function dP({html:n,dir:t,className:e},i){const s=document.createDocumentFragment();if(typeof n=="string"){const r=document.createElement("p");r.dir=t||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let l=0,c=o.length;l<c;++l){const u=o[l];r.append(document.createTextNode(u)),l<c-1&&r.append(document.createElement("br"))}s.append(r)}else hP.render({xfaHtml:n,div:s,intent:"richText"});s.firstChild.classList.add("richText",e),i.append(s)}function fP(n){const t=new Path2D;if(!n)return t;for(let e=0,i=n.length;e<i;)switch(n[e++]){case od.moveTo:t.moveTo(n[e++],n[e++]);break;case od.lineTo:t.lineTo(n[e++],n[e++]);break;case od.curveTo:t.bezierCurveTo(n[e++],n[e++],n[e++],n[e++],n[e++],n[e++]);break;case od.quadraticCurveTo:t.quadraticCurveTo(n[e++],n[e++],n[e++],n[e++]);break;case od.closePath:t.closePath();break;default:at(`Unrecognized drawing path operator: ${n[e-1]}`);break}return t}var wo,bo,ki,_i,kf,xo,hu,du,_f,Xy,pP,Je,mP,gP,kc,yd;const lr=class lr{constructor(t){x(this,Je);x(this,wo,null);x(this,bo,null);x(this,ki);x(this,_i,null);x(this,kf,null);x(this,xo,null);x(this,hu,null);x(this,du,null);g(this,ki,t),a(lr,_f)||g(lr,_f,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=g(this,wo,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,ki)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Ki,{signal:e}),t.addEventListener("pointerdown",A(lr,Xy,pP),{signal:e}));const i=g(this,_i,document.createElement("div"));i.className="buttons",t.append(i);const s=a(this,ki).toolbarPosition;if(s){const{style:r}=t,o=a(this,ki)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return a(this,wo)}hide(){var t;a(this,wo).classList.add("hidden"),(t=a(this,bo))==null||t.hideDropdown()}show(){var t,e;a(this,wo).classList.remove("hidden"),(t=a(this,kf))==null||t.shown(),(e=a(this,xo))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=a(this,ki),i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",a(lr,_f)[t]),A(this,Je,kc).call(this,i)&&i.addEventListener("click",s=>{e.delete()},{signal:e._signal}),a(this,_i).append(i)}async addAltText(t){const e=await t.render();A(this,Je,kc).call(this,e),a(this,_i).append(e,a(this,Je,yd)),g(this,kf,t)}addComment(t,e=null){if(a(this,xo))return;const i=t.renderForToolbar();if(!i)return;A(this,Je,kc).call(this,i);const s=g(this,hu,a(this,Je,yd));e?(a(this,_i).insertBefore(i,e),a(this,_i).insertBefore(s,e)):a(this,_i).append(i,s),g(this,xo,t),t.toolbar=this}addColorPicker(t){if(a(this,bo))return;g(this,bo,t);const e=t.renderButton();A(this,Je,kc).call(this,e),a(this,_i).append(e,a(this,Je,yd))}async addEditSignatureButton(t){const e=g(this,du,await t.renderEditButton(a(this,ki)));A(this,Je,kc).call(this,e),a(this,_i).append(e,a(this,Je,yd))}removeButton(t){var e,i;switch(t){case"comment":(e=a(this,xo))==null||e.removeToolbarCommentButton(),g(this,xo,null),(i=a(this,hu))==null||i.remove(),g(this,hu,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,i){if(!e&&t==="comment")return;const s=a(this,_i).querySelector(i);s&&t==="comment"&&this.addComment(e,s)}updateEditSignatureButton(t){a(this,du)&&(a(this,du).title=t)}remove(){var t;a(this,wo).remove(),(t=a(this,bo))==null||t.destroy(),g(this,bo,null)}};wo=new WeakMap,bo=new WeakMap,ki=new WeakMap,_i=new WeakMap,kf=new WeakMap,xo=new WeakMap,hu=new WeakMap,du=new WeakMap,_f=new WeakMap,Xy=new WeakSet,pP=function(t){t.stopPropagation()},Je=new WeakSet,mP=function(t){a(this,ki)._focusEventsAllowed=!1,de(t)},gP=function(t){a(this,ki)._focusEventsAllowed=!0,de(t)},kc=function(t){const e=a(this,ki)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",A(this,Je,mP).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",A(this,Je,gP).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ki,{signal:e}),!0)},yd=function(){const t=document.createElement("div");return t.className="divider",t},x(lr,Xy),x(lr,_f,null);let tb=lr;var Pf,Ga,hr,so,yP,vP,eb;class yB{constructor(t){x(this,so);x(this,Pf,null);x(this,Ga,null);x(this,hr);g(this,hr,t)}show(t,e,i){const[s,r]=A(this,so,vP).call(this,e,i),{style:o}=a(this,Ga)||g(this,Ga,A(this,so,yP).call(this));t.append(a(this,Ga)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Ga).remove()}}Pf=new WeakMap,Ga=new WeakMap,hr=new WeakMap,so=new WeakSet,yP=function(){const t=g(this,Ga,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=a(this,hr)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Ki,{signal:e});const i=g(this,Pf,document.createElement("div"));return i.className="buttons",t.append(i),a(this,hr).hasCommentManager()&&A(this,so,eb).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{a(this,hr).commentSelection("floating_button")}),A(this,so,eb).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{a(this,hr).highlightSelection("floating_button")}),t},vP=function(t,e){let i=0,s=0;for(const r of t){const o=r.y+r.height;if(o<i)continue;const l=r.x+(e?r.width:0);if(o>i){s=l,i=o;continue}e?l>s&&(s=l):l<s&&(s=l)}return[e?1-s:s,i]},eb=function(t,e,i,s){const r=document.createElement("button");r.classList.add("basic",t),r.tabIndex=0,r.setAttribute("data-l10n-id",e);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",i);const l=a(this,hr)._signal;l instanceof AbortSignal&&!l.aborted&&(r.addEventListener("contextmenu",Ki,{signal:l}),r.addEventListener("click",s,{signal:l})),a(this,Pf).append(r)};function wP(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}var Xa,Ya,fu,Ka;const Mt=class Mt{static initializeAndAddPointerId(t){(a(Mt,Ya)||g(Mt,Ya,new Set)).add(t)}static setPointer(t,e){a(Mt,Xa)||g(Mt,Xa,e),a(Mt,Ka)??g(Mt,Ka,t)}static setTimeStamp(t){g(Mt,fu,t)}static isSamePointerId(t){return a(Mt,Xa)===t}static isSamePointerIdOrRemove(t){var e;return a(Mt,Xa)===t?!0:((e=a(Mt,Ya))==null||e.delete(t),!1)}static isSamePointerType(t){return a(Mt,Ka)===t}static isInitializedAndDifferentPointerType(t){return a(Mt,Ka)!==null&&!Mt.isSamePointerType(t)}static isSameTimeStamp(t){return a(Mt,fu)===t}static isUsingMultiplePointers(){var t;return((t=a(Mt,Ya))==null?void 0:t.size)>=1}static clearPointerType(){g(Mt,Ka,null)}static clearPointerIds(){g(Mt,Xa,NaN),g(Mt,Ya,null)}static clearTimeStamp(){g(Mt,fu,NaN)}};Xa=new WeakMap,Ya=new WeakMap,fu=new WeakMap,Ka=new WeakMap,x(Mt,Xa,NaN),x(Mt,Ya,null),x(Mt,fu,NaN),x(Mt,Ka,null);let an=Mt;var Yy;class vB{constructor(){x(this,Yy,0)}get id(){return`${xf}${Ce(this,Yy)._++}`}}Yy=new WeakMap;var pu,Mf,ln,mu,Tg;const sA=class sA{constructor(){x(this,mu);x(this,pu,cP());x(this,Mf,0);x(this,ln,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ht(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:i,size:s,type:r}=t;return A(this,mu,Tg).call(this,`${e}_${i}_${s}_${r}`,t)}async getFromUrl(t){return A(this,mu,Tg).call(this,t,t)}async getFromBlob(t,e){const i=await e;return A(this,mu,Tg).call(this,t,i)}async getFromId(t){a(this,ln)||g(this,ln,new Map);const e=a(this,ln).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,ln)||g(this,ln,new Map);let i=a(this,ln).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${a(this,pu)}_${Ce(this,Mf)._++}`,refCounter:1,isSvg:!1},a(this,ln).set(t,i),a(this,ln).set(i.id,i),i}getSvgUrl(t){const e=a(this,ln).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;a(this,ln)||g(this,ln,new Map);const e=a(this,ln).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,pu)}_`)}};pu=new WeakMap,Mf=new WeakMap,ln=new WeakMap,mu=new WeakSet,Tg=async function(t,e){a(this,ln)||g(this,ln,new Map);let i=a(this,ln).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${a(this,pu)}_${Ce(this,Mf)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(i.url=e,s=await Em(e,"blob")):e instanceof File?s=i.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=sA._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,h)=>{l.onload=()=>{i.bitmap=l,i.isSvg=!0,u()},o.onload=async()=>{const d=i.svgUrl=o.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=h});o.readAsDataURL(s),await c}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){at(s),i=null}return a(this,ln).set(t,i),i&&a(this,ln).set(i.id,i),i};let nb=sA;var fe,Ao,Df,Zt;class wB{constructor(t=128){x(this,fe,[]);x(this,Ao,!1);x(this,Df);x(this,Zt,-1);g(this,Df,t)}add({cmd:t,undo:e,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&t(),a(this,Ao))return;const c={cmd:t,undo:e,post:i,type:r};if(a(this,Zt)===-1){a(this,fe).length>0&&(a(this,fe).length=0),g(this,Zt,0),a(this,fe).push(c);return}if(o&&a(this,fe)[a(this,Zt)].type===r){l&&(c.undo=a(this,fe)[a(this,Zt)].undo),a(this,fe)[a(this,Zt)]=c;return}const u=a(this,Zt)+1;u===a(this,Df)?a(this,fe).splice(0,1):(g(this,Zt,u),u<a(this,fe).length&&a(this,fe).splice(u)),a(this,fe).push(c)}undo(){if(a(this,Zt)===-1)return;g(this,Ao,!0);const{undo:t,post:e}=a(this,fe)[a(this,Zt)];t(),e==null||e(),g(this,Ao,!1),g(this,Zt,a(this,Zt)-1)}redo(){if(a(this,Zt)<a(this,fe).length-1){g(this,Zt,a(this,Zt)+1),g(this,Ao,!0);const{cmd:t,post:e}=a(this,fe)[a(this,Zt)];t(),e==null||e(),g(this,Ao,!1)}}hasSomethingToUndo(){return a(this,Zt)!==-1}hasSomethingToRedo(){return a(this,Zt)<a(this,fe).length-1}cleanType(t){if(a(this,Zt)!==-1){for(let e=a(this,Zt);e>=0;e--)if(a(this,fe)[e].type!==t){a(this,fe).splice(e+1,a(this,Zt)-e),g(this,Zt,e);return}a(this,fe).length=0,g(this,Zt,-1)}}destroy(){g(this,fe,null)}}fe=new WeakMap,Ao=new WeakMap,Df=new WeakMap,Zt=new WeakMap;var Ky,bP;class _m{constructor(t){x(this,Ky);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=en.platform;for(const[i,s,r={}]of t)for(const o of i){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(A(this,Ky,bP).call(this,e));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:l=null}}=i;l&&!l(t,e)||(s.bind(t,...o,e)(),r||de(e))}}Ky=new WeakSet,bP=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const qy=class qy{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return dB(t),ht(this,"_colors",t)}convert(t){const e=km(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((r,o)=>r===e[o]))return qy._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?K.makeHexColor(...e):t}};O(qy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ib=qy;var gu,Xn,yu,re,ke,vu,Pi,wu,Mi,cn,So,Co,bu,Eo,Ts,Di,qa,Rf,Lf,xu,Nf,ks,To,Au,ko,_s,Qy,_o,Su,If,Po,Qa,Cu,Mo,Ff,be,Tt,dr,Do,Ro,Of,Eu,Bf,Lo,Ps,fr,jf,Vf,Ri,H,kg,sb,xP,AP,vd,SP,CP,EP,rb,TP,kP,_P,PP,gn,rr,MP,DP,ob,RP,wd,ab;const Jc=class Jc{constructor(t,e,i,s,r,o,l,c,u,h,d,f,p,v,b,S){x(this,H);x(this,gu,new AbortController);x(this,Xn,null);x(this,yu,null);x(this,re,new Map);x(this,ke,new Map);x(this,vu,null);x(this,Pi,null);x(this,wu,null);x(this,Mi,new wB);x(this,cn,null);x(this,So,null);x(this,Co,null);x(this,bu,0);x(this,Eo,new Set);x(this,Ts,null);x(this,Di,null);x(this,qa,new Set);O(this,"_editorUndoBar",null);x(this,Rf,!1);x(this,Lf,!1);x(this,xu,!1);x(this,Nf,null);x(this,ks,null);x(this,To,null);x(this,Au,null);x(this,ko,!1);x(this,_s,null);x(this,Qy,new vB);x(this,_o,!1);x(this,Su,!1);x(this,If,!1);x(this,Po,null);x(this,Qa,null);x(this,Cu,null);x(this,Mo,null);x(this,Ff,null);x(this,be,ct.NONE);x(this,Tt,new Set);x(this,dr,null);x(this,Do,null);x(this,Ro,null);x(this,Of,null);x(this,Eu,null);x(this,Bf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,Lo,[0,0]);x(this,Ps,null);x(this,fr,null);x(this,jf,null);x(this,Vf,null);x(this,Ri,null);const m=this._signal=a(this,gu).signal;g(this,fr,t),g(this,jf,e),g(this,Vf,i),g(this,vu,s),g(this,cn,r),g(this,Do,o),g(this,Eu,c),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:m}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),l._on("setpreference",this.onSetPreference.bind(this),{signal:m}),l._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:m}),window.addEventListener("pointerdown",()=>{g(this,Su,!0)},{capture:!0,signal:m}),window.addEventListener("pointerup",()=>{g(this,Su,!1)},{capture:!0,signal:m}),A(this,H,SP).call(this),A(this,H,PP).call(this),A(this,H,rb).call(this),g(this,Pi,c.annotationStorage),g(this,Nf,c.filterFactory),g(this,Ro,u),g(this,Au,h||null),g(this,Rf,d),g(this,Lf,f),g(this,xu,p),g(this,Ff,v||null),this.viewParameters={realScale:Ea.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=b||null,this._supportsPinchToZoom=S!==!1,r==null||r.setSidebarUiManager(this)}static get _keyboardManager(){const t=Jc.prototype,e=o=>a(o,fr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ht(this,"_keyboardManager",new _m([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,fr).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,fr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,i,s,r,o,l,c,u;(t=a(this,Ri))==null||t.resolve(),g(this,Ri,null),(e=a(this,gu))==null||e.abort(),g(this,gu,null),this._signal=null;for(const h of a(this,ke).values())h.destroy();a(this,ke).clear(),a(this,re).clear(),a(this,qa).clear(),(i=a(this,Mo))==null||i.clear(),g(this,Xn,null),a(this,Tt).clear(),a(this,Mi).destroy(),(s=a(this,vu))==null||s.destroy(),(r=a(this,cn))==null||r.destroy(),(o=a(this,Do))==null||o.destroy(),(l=a(this,_s))==null||l.hide(),g(this,_s,null),(c=a(this,Cu))==null||c.destroy(),g(this,Cu,null),g(this,yu,null),a(this,ks)&&(clearTimeout(a(this,ks)),g(this,ks,null)),a(this,Ps)&&(clearTimeout(a(this,Ps)),g(this,Ps,null)),(u=this._editorUndoBar)==null||u.destroy(),g(this,Eu,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,Ff)}get useNewAltTextFlow(){return a(this,Lf)}get useNewAltTextWhenAddingImage(){return a(this,xu)}get hcmFilter(){return ht(this,"hcmFilter",a(this,Ro)?a(this,Nf).addHCMFilter(a(this,Ro).foreground,a(this,Ro).background):"none")}get direction(){return ht(this,"direction",getComputedStyle(a(this,fr)).direction)}get _highlightColors(){return ht(this,"_highlightColors",a(this,Au)?new Map(a(this,Au).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return ht(this,"highlightColors",null);const e=new Map,i=!!a(this,Ro);for(const[s,r]of t){const o=s.endsWith("_HCM");if(i&&o){e.set(s.replace("_HCM",""),r);continue}!i&&!o&&e.set(s,r)}return ht(this,"highlightColors",e)}get highlightColorNames(){return ht(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),g(this,Co,t)}setMainHighlightColorPicker(t){g(this,Cu,t)}editAltText(t,e=!1){var i;(i=a(this,vu))==null||i.editAltText(this,t,e)}hasCommentManager(){return!!a(this,cn)}editComment(t,e,i,s){var r;(r=a(this,cn))==null||r.showDialog(this,t,e,i,s)}selectComment(t,e){const i=a(this,ke).get(t),s=i==null?void 0:i.getEditorByUID(e);s==null||s.toggleComment(!0,!0)}updateComment(t){var e;(e=a(this,cn))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=a(this,cn))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=a(this,cn))==null||e.removeComments([t.uid])}toggleComment(t,e,i=void 0){var s;(s=a(this,cn))==null||s.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){var i;return t&&((i=a(this,cn))==null?void 0:i.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=a(this,cn))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(a(this,ke).has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),s=r=>{r.pageNumber===t&&(this._eventBus._off("editorsrendered",s),e())};this._eventBus.on("editorsrendered",s),await i}getSignature(t){var e;(e=a(this,Do))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return a(this,Do)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":g(this,xu,e);break}}onPageChanging({pageNumber:t}){g(this,bu,t-1)}focusMainContainer(){a(this,fr).focus()}findParent(t,e){for(const i of a(this,ke).values()){const{x:s,y:r,width:o,height:l}=i.div.getBoundingClientRect();if(t>=s&&t<=s+o&&e>=r&&e<=r+l)return i}return null}disableUserSelect(t=!1){a(this,jf).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,qa).add(t)}removeShouldRescale(t){a(this,qa).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Ea.PDF_TO_CSS_UNITS;for(const i of a(this,qa))i.onScaleChanging();(e=a(this,Co))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:l}=i,c=i.toString(),h=A(this,H,kg).call(this,i).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;i.empty();const f=A(this,H,sb).call(this,h),p=a(this,be)===ct.NONE,v=()=>{const b=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:l,text:c});p&&this.showAllEditors("highlight",!0,!0),e&&(b==null||b.editComment())};if(p){this.switchToMode(ct.HIGHLIGHT,v);return}v()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!a(this,Pi))return null;const e=`${xf}${t}`,i=a(this,Pi).getRawValue(e);return i&&a(this,Pi).remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&a(this,Pi)&&!a(this,Pi).has(t.id)&&a(this,Pi).setValue(t.id,t)}a11yAlert(t,e=null){const i=a(this,Vf);i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,a(this,ko)&&(g(this,ko,!1),A(this,H,vd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,Tt))if(e.div.contains(t)){g(this,Qa,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,Qa))return;const[t,e]=a(this,Qa);g(this,Qa,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){A(this,H,rb).call(this),this.setEditingState(!0)}removeEditListeners(){A(this,H,TP).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of a(this,Di))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of a(this,Di))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=a(this,Xn))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of a(this,Tt)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of a(this,Di))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){at(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of i){const u=await s.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)A(this,H,ob).call(this,c);A(this,H,ab).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){at(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,be)!==ct.NONE&&!this.isEditorHandlingKeyboard&&Jc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,ko)&&(g(this,ko,!1),A(this,H,vd).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(A(this,H,CP).call(this),A(this,H,kP).call(this),A(this,H,gn).call(this,{isEditing:a(this,be)!==ct.NONE,isEmpty:A(this,H,wd).call(this),hasSomethingToUndo:a(this,Mi).hasSomethingToUndo(),hasSomethingToRedo:a(this,Mi).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,H,EP).call(this),A(this,H,_P).call(this),A(this,H,gn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,Di)){g(this,Di,t);for(const e of a(this,Di))A(this,H,rr).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,Qy).id}get currentLayer(){return a(this,ke).get(a(this,bu))}getLayer(t){return a(this,ke).get(t)}get currentPageIndex(){return a(this,bu)}addLayer(t){a(this,ke).set(t.pageIndex,t),a(this,_o)?t.enable():t.disable()}removeLayer(t){a(this,ke).delete(t.pageIndex)}async updateMode(t,e=null,i=!1,s=!1,r=!1){var o,l,c,u,h,d;if(a(this,be)!==t&&!(a(this,Ri)&&(await a(this,Ri).promise,!a(this,Ri)))){if(g(this,Ri,Promise.withResolvers()),(o=a(this,Co))==null||o.commitOrRemove(),a(this,be)===ct.POPUP&&((l=a(this,cn))==null||l.hideSidebar()),(c=a(this,cn))==null||c.destroyPopup(),g(this,be,t),t===ct.NONE){this.setEditingState(!1),A(this,H,DP).call(this);for(const f of a(this,re).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),a(this,Ri).resolve();return}for(const f of a(this,re).values())f.addStandaloneCommentButton();t===ct.SIGNATURE&&await((h=a(this,Do))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await A(this,H,MP).call(this),this.unselectAll();for(const f of a(this,ke).values())f.updateMode(t);if(t===ct.POPUP){a(this,yu)||g(this,yu,await a(this,Eu).getAnnotationsByType(new Set(a(this,Di).map(v=>v._editorType))));const f=new Set,p=[];for(const v of a(this,re).values()){const{annotationElementId:b,hasComment:S,deleted:m}=v;b&&f.add(b),S&&!m&&p.push(v.getData())}for(const v of a(this,yu)){const{id:b,popupRef:S,contentsObj:m}=v;S&&(m!=null&&m.str)&&!f.has(b)&&!a(this,Eo).has(b)&&p.push(v)}(d=a(this,cn))==null||d.showSidebar(p)}if(!e){i&&this.addNewEditorFromKeyboard(),a(this,Ri).resolve();return}for(const f of a(this,re).values())f.uid===e?(this.setSelected(f),r?f.editComment():s?f.enterInEditMode():f.focus()):f.unselect();a(this,Ri).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==a(this,be)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(a(this,Di)){switch(t){case vt.CREATE:this.currentLayer.addNewEditor(e);return;case vt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,Of)||g(this,Of,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of a(this,Tt))i.updateParams(t,e);else for(const i of a(this,Di))i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var r;for(const o of a(this,re).values())o.editorType===t&&o.show(e);(((r=a(this,Of))==null?void 0:r.get(vt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&A(this,H,rr).call(this,[[vt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,If)!==t){g(this,If,t);for(const e of a(this,ke).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of a(this,re).values())e.pageIndex===t&&(yield e)}getEditor(t){return a(this,re).get(t)}addEditor(t){a(this,re).set(t.id,t)}removeEditor(t){var e,i;t.div.contains(document.activeElement)&&(a(this,ks)&&clearTimeout(a(this,ks)),g(this,ks,setTimeout(()=>{this.focusMainContainer(),g(this,ks,null)},0))),a(this,re).delete(t.id),t.annotationElementId&&((e=a(this,Mo))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!a(this,Eo).has(t.annotationElementId))&&((i=a(this,Pi))==null||i.remove(t.id))}addDeletedAnnotationElement(t){a(this,Eo).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,Eo).has(t)}removeDeletedAnnotationElement(t){a(this,Eo).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,Xn)!==t&&(g(this,Xn,t),t&&A(this,H,rr).call(this,t.propertiesToUpdate))}updateUI(t){a(this,H,RP)===t&&A(this,H,rr).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){A(this,H,rr).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,Tt).has(t)){a(this,Tt).delete(t),t.unselect(),A(this,H,gn).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,Tt).add(t),t.select(),A(this,H,rr).call(this,t.propertiesToUpdate),A(this,H,gn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=a(this,Co))==null||e.commitOrRemove();for(const i of a(this,Tt))i!==t&&i.unselect();a(this,Tt).clear(),a(this,Tt).add(t),t.select(),A(this,H,rr).call(this,t.propertiesToUpdate),A(this,H,gn).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,Tt).has(t)}get firstSelectedEditor(){return a(this,Tt).values().next().value}unselect(t){t.unselect(),a(this,Tt).delete(t),A(this,H,gn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,Tt).size!==0}get isEnterHandled(){return a(this,Tt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,Mi).undo(),A(this,H,gn).call(this,{hasSomethingToUndo:a(this,Mi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,H,wd).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,Mi).redo(),A(this,H,gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Mi).hasSomethingToRedo(),isEmpty:A(this,H,wd).call(this)})}addCommands(t){a(this,Mi).add(t),A(this,H,gn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,H,wd).call(this)})}cleanUndoStack(t){a(this,Mi).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,Tt)],i=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},s=()=>{for(const o of e)A(this,H,ob).call(this,o)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=a(this,Xn))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,Xn)||this.hasSelection}selectAll(){for(const t of a(this,Tt))t.commit();A(this,H,ab).call(this,a(this,re).values())}unselectAll(){var t;if(!(a(this,Xn)&&(a(this,Xn).commitOrRemove(),a(this,be)!==ct.NONE))&&!((t=a(this,Co))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,Tt))e.unselect();a(this,Tt).clear(),A(this,H,gn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;a(this,Lo)[0]+=t,a(this,Lo)[1]+=e;const[s,r]=a(this,Lo),o=[...a(this,Tt)],l=1e3;a(this,Ps)&&clearTimeout(a(this,Ps)),g(this,Ps,setTimeout(()=>{g(this,Ps,null),a(this,Lo)[0]=a(this,Lo)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,re).has(c.id)&&(c.translateInPage(s,r),c.translationDone())},undo:()=>{for(const c of o)a(this,re).has(c.id)&&(c.translateInPage(-s,-r),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),g(this,Ts,new Map);for(const t of a(this,Tt))a(this,Ts).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Ts))return!1;this.disableUserSelect(!1);const t=a(this,Ts);g(this,Ts,null);let e=!1;for(const[{x:s,y:r,pageIndex:o},l]of t)l.newX=s,l.newY=r,l.newPageIndex=o,e||(e=s!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const i=(s,r,o,l)=>{if(a(this,re).has(s.id)){const c=a(this,ke).get(l);c?s._setParentAndPosition(c,r,o):(s.pageIndex=l,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:l}]of t)i(s,r,o,l)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:l}]of t)i(s,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,Ts))for(const i of a(this,Ts).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,Tt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,Xn)===t}getActive(){return a(this,Xn)}getMode(){return a(this,be)}isEditingMode(){return a(this,be)!==ct.NONE}get imageManager(){return ht(this,"imageManager",new nb)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(u,h,d,f)=>({x:(h-s)/o,y:1-(u+d-i)/r,width:f/o,height:d/r});break;case"180":l=(u,h,d,f)=>({x:1-(u+d-i)/r,y:1-(h+f-s)/o,width:d/r,height:f/o});break;case"270":l=(u,h,d,f)=>({x:1-(h+f-s)/o,y:(u-i)/r,width:f/o,height:d/r});break;default:l=(u,h,d,f)=>({x:(u-i)/r,y:(h-s)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:v,height:b}of d.getClientRects())v===0||b===0||c.push(l(f,p,v,b))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,wu)||g(this,wu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,wu))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=a(this,wu))==null?void 0:s.get(t.data.id);if(!e)return;const i=a(this,Pi).getRawValue(e);i&&(a(this,be)===ct.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){var r;const s=(r=a(this,Mo))==null?void 0:r.get(t);s&&(s.setCanvas(e,i),a(this,Mo).delete(t))}addMissingCanvas(t,e){(a(this,Mo)||g(this,Mo,new Map)).set(t,e)}};gu=new WeakMap,Xn=new WeakMap,yu=new WeakMap,re=new WeakMap,ke=new WeakMap,vu=new WeakMap,Pi=new WeakMap,wu=new WeakMap,Mi=new WeakMap,cn=new WeakMap,So=new WeakMap,Co=new WeakMap,bu=new WeakMap,Eo=new WeakMap,Ts=new WeakMap,Di=new WeakMap,qa=new WeakMap,Rf=new WeakMap,Lf=new WeakMap,xu=new WeakMap,Nf=new WeakMap,ks=new WeakMap,To=new WeakMap,Au=new WeakMap,ko=new WeakMap,_s=new WeakMap,Qy=new WeakMap,_o=new WeakMap,Su=new WeakMap,If=new WeakMap,Po=new WeakMap,Qa=new WeakMap,Cu=new WeakMap,Mo=new WeakMap,Ff=new WeakMap,be=new WeakMap,Tt=new WeakMap,dr=new WeakMap,Do=new WeakMap,Ro=new WeakMap,Of=new WeakMap,Eu=new WeakMap,Bf=new WeakMap,Lo=new WeakMap,Ps=new WeakMap,fr=new WeakMap,jf=new WeakMap,Vf=new WeakMap,Ri=new WeakMap,H=new WeakSet,kg=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},sb=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of a(this,ke).values())if(i.hasTextLayer(t))return i;return null},xP=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=A(this,H,kg).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(a(this,_s)||g(this,_s,new yB(this)),a(this,_s).show(i,s,this.direction==="ltr"))},AP=function(){var r,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,dr)&&((r=a(this,_s))==null||r.hide(),g(this,dr,null),A(this,H,gn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,dr))return;const s=A(this,H,kg).call(this,t).closest(".textLayer");if(!s){a(this,dr)&&((o=a(this,_s))==null||o.hide(),g(this,dr,null),A(this,H,gn).call(this,{hasSelectedText:!1}));return}if((l=a(this,_s))==null||l.hide(),g(this,dr,e),A(this,H,gn).call(this,{hasSelectedText:!0}),!(a(this,be)!==ct.HIGHLIGHT&&a(this,be)!==ct.NONE)&&(a(this,be)===ct.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),g(this,ko,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,be)===ct.HIGHLIGHT?A(this,H,sb).call(this,s):null;if(c==null||c.toggleDrawing(),a(this,Su)){const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&A(this,H,vd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else c==null||c.toggleDrawing(!0),A(this,H,vd).call(this,"main_toolbar")}},vd=function(t=""){a(this,be)===ct.HIGHLIGHT?this.highlightSelection(t):a(this,Rf)&&A(this,H,xP).call(this)},SP=function(){document.addEventListener("selectionchange",A(this,H,AP).bind(this),{signal:this._signal})},CP=function(){if(a(this,To))return;g(this,To,new AbortController);const t=this.combinedSignal(a(this,To));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},EP=function(){var t;(t=a(this,To))==null||t.abort(),g(this,To,null)},rb=function(){if(a(this,Po))return;g(this,Po,new AbortController);const t=this.combinedSignal(a(this,Po));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},TP=function(){var t;(t=a(this,Po))==null||t.abort(),g(this,Po,null)},kP=function(){if(a(this,So))return;g(this,So,new AbortController);const t=this.combinedSignal(a(this,So));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},_P=function(){var t;(t=a(this,So))==null||t.abort(),g(this,So,null)},PP=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},gn=function(t){Object.entries(t).some(([i,s])=>a(this,Bf)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Bf),t)}),a(this,be)===ct.HIGHLIGHT&&t.hasSelectedEditor===!1&&A(this,H,rr).call(this,[[vt.HIGHLIGHT_FREE,!0]]))},rr=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},MP=async function(){if(!a(this,_o)){g(this,_o,!0);const t=[];for(const e of a(this,ke).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,re).values())e.enable()}},DP=function(){if(this.unselectAll(),a(this,_o)){g(this,_o,!1);for(const t of a(this,ke).values())t.disable();for(const t of a(this,re).values())t.disable()}},ob=function(t){const e=a(this,ke).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},RP=function(){let t=null;for(t of a(this,Tt));return t},wd=function(){if(a(this,re).size===0)return!0;if(a(this,re).size===1)for(const t of a(this,re).values())return t.isEmpty();return!1},ab=function(t){for(const e of a(this,Tt))e.unselect();a(this,Tt).clear();for(const e of t)e.isEmpty()||(a(this,Tt).add(e),e.select());A(this,H,gn).call(this,{hasSelectedEditor:this.hasSelection})},O(Jc,"TRANSLATE_SMALL",1),O(Jc,"TRANSLATE_BIG",10);let yc=Jc;var Le,Ms,es,Tu,Ds,Yn,ku,Rs,Rn,pr,Za,Ls,No,ms,bd,_g;const yn=class yn{constructor(t){x(this,ms);x(this,Le,null);x(this,Ms,!1);x(this,es,null);x(this,Tu,null);x(this,Ds,null);x(this,Yn,null);x(this,ku,!1);x(this,Rs,null);x(this,Rn,null);x(this,pr,null);x(this,Za,null);x(this,Ls,!1);g(this,Rn,t),g(this,Ls,t._uiManager.useNewAltTextFlow),a(yn,No)||g(yn,No,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){yn._l10n??(yn._l10n=t)}async render(){const t=g(this,es,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=g(this,Tu,document.createElement("span"));t.append(e),a(this,Ls)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(yn,No).missing),e.setAttribute("data-l10n-id",a(yn,No)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=a(this,Rn)._uiManager._signal;t.addEventListener("contextmenu",Ki,{signal:i}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),a(this,Rn)._uiManager.editAltText(a(this,Rn)),a(this,Ls)&&a(this,Rn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,ms,bd)}})};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(g(this,ku,!0),s(r))},{signal:i}),await A(this,ms,_g).call(this),t}finish(){a(this,es)&&(a(this,es).focus({focusVisible:a(this,ku)}),g(this,ku,!1))}isEmpty(){return a(this,Ls)?a(this,Le)===null:!a(this,Le)&&!a(this,Ms)}hasData(){return a(this,Ls)?a(this,Le)!==null||!!a(this,pr):this.isEmpty()}get guessedText(){return a(this,pr)}async setGuessedText(t){a(this,Le)===null&&(g(this,pr,t),g(this,Za,await yn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),A(this,ms,_g).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,Ls)||a(this,Le)){(e=a(this,Rs))==null||e.remove(),g(this,Rs,null);return}if(!a(this,Rs)){const i=g(this,Rs,document.createElement("div"));i.className="noAltTextBadge",a(this,Rn).div.append(i)}a(this,Rs).classList.toggle("hidden",!t)}serialize(t){let e=a(this,Le);return!t&&a(this,pr)===e&&(e=a(this,Za)),{altText:e,decorative:a(this,Ms),guessedText:a(this,pr),textWithDisclaimer:a(this,Za)}}get data(){return{altText:a(this,Le),decorative:a(this,Ms)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(g(this,pr,i),g(this,Za,s)),!(a(this,Le)===t&&a(this,Ms)===e)&&(r||(g(this,Le,t),g(this,Ms,e)),A(this,ms,_g).call(this))}toggle(t=!1){a(this,es)&&(!t&&a(this,Yn)&&(clearTimeout(a(this,Yn)),g(this,Yn,null)),a(this,es).disabled=!t)}shown(){a(this,Rn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,ms,bd)}})}destroy(){var t,e;(t=a(this,es))==null||t.remove(),g(this,es,null),g(this,Tu,null),g(this,Ds,null),(e=a(this,Rs))==null||e.remove(),g(this,Rs,null)}};Le=new WeakMap,Ms=new WeakMap,es=new WeakMap,Tu=new WeakMap,Ds=new WeakMap,Yn=new WeakMap,ku=new WeakMap,Rs=new WeakMap,Rn=new WeakMap,pr=new WeakMap,Za=new WeakMap,Ls=new WeakMap,No=new WeakMap,ms=new WeakSet,bd=function(){return a(this,Le)&&"added"||a(this,Le)===null&&this.guessedText&&"review"||"missing"},_g=async function(){var s,r,o;const t=a(this,es);if(!t)return;if(a(this,Ls)){if(t.classList.toggle("done",!!a(this,Le)),t.setAttribute("data-l10n-id",a(yn,No)[a(this,ms,bd)]),(s=a(this,Tu))==null||s.setAttribute("data-l10n-id",a(yn,No)[`${a(this,ms,bd)}-label`]),!a(this,Le)){(r=a(this,Ds))==null||r.remove();return}}else{if(!a(this,Le)&&!a(this,Ms)){t.classList.remove("done"),(o=a(this,Ds))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,Ds);if(!e){g(this,Ds,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,Rn).id}`;const l=100,c=a(this,Rn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,Yn)),g(this,Yn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{g(this,Yn,setTimeout(()=>{g(this,Yn,null),a(this,Ds).classList.add("show"),a(this,Rn)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var u;a(this,Yn)&&(clearTimeout(a(this,Yn)),g(this,Yn,null)),(u=a(this,Ds))==null||u.classList.remove("show")},{signal:c})}a(this,Ms)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,Le)),e.parentNode||t.append(e);const i=a(this,Rn).getElementForAltText();i==null||i.setAttribute("aria-describedby",e.id)},x(yn,No,null),O(yn,"_l10n",null);let Fy=yn;var $e,Li,Ja,zt,zf,tl,ns,el,nl,il,Uf,lb;class Zm{constructor(t){x(this,Uf);x(this,$e,null);x(this,Li,null);x(this,Ja,!1);x(this,zt,null);x(this,zf,null);x(this,tl,null);x(this,ns,null);x(this,el,null);x(this,nl,!1);x(this,il,null);g(this,zt,t)}renderForToolbar(){const t=g(this,Li,document.createElement("button"));return t.className="comment",A(this,Uf,lb).call(this,t,!1)}renderForStandalone(){const t=g(this,$e,document.createElement("button"));t.className="annotationCommentButton";const e=a(this,zt).commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(a(this,zt)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const s=a(this,zt).commentButtonColor;s&&(i.backgroundColor=s)}return A(this,Uf,lb).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=a(this,$e)??a(this,Li))==null||t.focus()},0)}onUpdatedColor(){if(!a(this,$e))return;const t=a(this,zt).commentButtonColor;t&&(a(this,$e).style.backgroundColor=t),a(this,zt)._uiManager.updatePopupColor(a(this,zt))}get commentButtonWidth(){var t;return(((t=a(this,$e))==null?void 0:t.getBoundingClientRect().width)??0)/a(this,zt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(a(this,il))return a(this,il);if(!a(this,$e))return null;const{x:t,y:e,height:i}=a(this,$e).getBoundingClientRect(),{x:s,y:r,width:o,height:l}=a(this,zt).parent.boundingClientRect;return[(t-s)/o,(e+i-r)/l]}set commentPopupPositionInLayer(t){g(this,il,t)}hasDefaultPopupPosition(){return a(this,il)===null}removeStandaloneCommentButton(){var t;(t=a(this,$e))==null||t.remove(),g(this,$e,null)}removeToolbarCommentButton(){var t;(t=a(this,Li))==null||t.remove(),g(this,Li,null)}setCommentButtonStates({selected:t,hasPopup:e}){a(this,$e)&&(a(this,$e).classList.toggle("selected",t),a(this,$e).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let i,s;if(e)[i,s]=e;else{[i,s]=a(this,zt).commentButtonPosition;const{width:h,height:d,x:f,y:p}=a(this,zt);i=f+i*h,s=p+s*d}const r=a(this,zt).parent.boundingClientRect,{x:o,y:l,width:c,height:u}=r;a(this,zt)._uiManager.editComment(a(this,zt),o+i*c,l+s*u,{...t,parentDimensions:r})}finish(){a(this,Li)&&(a(this,Li).focus({focusVisible:a(this,Ja)}),g(this,Ja,!1))}isDeleted(){return a(this,nl)||a(this,ns)===""}isEmpty(){return a(this,ns)===null}hasBeenEdited(){return this.isDeleted()||a(this,ns)!==a(this,zf)}serialize(){return this.data}get data(){return{text:a(this,ns),richText:a(this,tl),date:a(this,el),deleted:this.isDeleted()}}set data(t){if(t!==a(this,ns)&&g(this,tl,null),t===null){g(this,ns,""),g(this,nl,!0);return}g(this,ns,t),g(this,el,new Date),g(this,nl,!1)}setInitialText(t,e=null){g(this,zf,t),this.data=t,g(this,el,null),g(this,tl,e)}shown(){}destroy(){var t,e;(t=a(this,Li))==null||t.remove(),g(this,Li,null),(e=a(this,$e))==null||e.remove(),g(this,$e,null),g(this,ns,""),g(this,tl,null),g(this,el,null),g(this,zt,null),g(this,Ja,!1),g(this,nl,!1)}}$e=new WeakMap,Li=new WeakMap,Ja=new WeakMap,zt=new WeakMap,zf=new WeakMap,tl=new WeakMap,ns=new WeakMap,el=new WeakMap,nl=new WeakMap,il=new WeakMap,Uf=new WeakSet,lb=function(t,e){if(!a(this,zt)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[a(this,zt)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=a(this,zt)._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",Ki,{signal:i}),e&&(t.addEventListener("focusin",r=>{a(this,zt)._focusEventsAllowed=!1,de(r)},{capture:!0,signal:i}),t.addEventListener("focusout",r=>{a(this,zt)._focusEventsAllowed=!0,de(r)},{capture:!0,signal:i})),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),t===a(this,Li)?this.edit():a(this,zt).toggleComment(!0)};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(g(this,Ja,!0),s(r))},{signal:i}),t.addEventListener("pointerenter",()=>{a(this,zt).toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{a(this,zt).toggleComment(!1,!1)},{signal:i}),t};var _u,sl,Hf,$f,Wf,Gf,Xf,mr,rl,gr,ol,yr,Ta,LP,NP,IP;const rA=class rA{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){x(this,Ta);x(this,_u);x(this,sl,!1);x(this,Hf,null);x(this,$f);x(this,Wf);x(this,Gf);x(this,Xf);x(this,mr,null);x(this,rl);x(this,gr,null);x(this,ol);x(this,yr,null);g(this,_u,t),g(this,Hf,i),g(this,$f,e),g(this,Wf,s),g(this,Gf,r),g(this,Xf,o),g(this,ol,new AbortController),g(this,rl,AbortSignal.any([l,a(this,ol).signal])),t.addEventListener("touchstart",A(this,Ta,LP).bind(this),{passive:!1,signal:a(this,rl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/tr.pixelRatio}destroy(){var t,e;(t=a(this,ol))==null||t.abort(),g(this,ol,null),(e=a(this,mr))==null||e.abort(),g(this,mr,null)}};_u=new WeakMap,sl=new WeakMap,Hf=new WeakMap,$f=new WeakMap,Wf=new WeakMap,Gf=new WeakMap,Xf=new WeakMap,mr=new WeakMap,rl=new WeakMap,gr=new WeakMap,ol=new WeakMap,yr=new WeakMap,Ta=new WeakSet,LP=function(t){var s,r,o;if((s=a(this,$f))!=null&&s.call(this))return;if(t.touches.length===1){if(a(this,mr))return;const l=g(this,mr,new AbortController),c=AbortSignal.any([a(this,rl),l.signal]),u=a(this,_u),h={capture:!0,signal:c,passive:!1},d=f=>{var p;f.pointerType==="touch"&&((p=a(this,mr))==null||p.abort(),g(this,mr,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(de(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!a(this,yr)){g(this,yr,new AbortController);const l=AbortSignal.any([a(this,rl),a(this,yr).signal]),c=a(this,_u),u={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",A(this,Ta,NP).bind(this),u);const h=A(this,Ta,IP).bind(this);c.addEventListener("touchend",h,u),c.addEventListener("touchcancel",h,u),u.capture=!0,c.addEventListener("pointerdown",de,u),c.addEventListener("pointermove",de,u),c.addEventListener("pointercancel",de,u),c.addEventListener("pointerup",de,u),(r=a(this,Wf))==null||r.call(this)}if(de(t),t.touches.length!==2||(o=a(this,Hf))!=null&&o.call(this)){g(this,gr,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),g(this,gr,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},NP=function(t){var C;if(!a(this,gr)||t.touches.length!==2)return;de(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:s,screenY:r}=e,{screenX:o,screenY:l}=i,c=a(this,gr),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,p=d-u,v=f-h,b=o-s,S=l-r,m=Math.hypot(b,S)||1,y=Math.hypot(p,v)||1;if(!a(this,sl)&&Math.abs(y-m)<=rA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,!a(this,sl)){g(this,sl,!0);return}const w=[(s+o)/2,(r+l)/2];(C=a(this,Gf))==null||C.call(this,w,y,m)},IP=function(t){var e;t.touches.length>=2||(a(this,yr)&&(a(this,yr).abort(),g(this,yr,null),(e=a(this,Xf))==null||e.call(this)),a(this,gr)&&(de(t),g(this,gr,null),g(this,sl,!1)))};let Oy=rA;var al,is,Yt,Ft,vr,Pu,Io,Yf,We,ll,wr,Ni,Fo,Kf,cl,Kn,qf,ul,br,Ns,Mu,Du,Ii,hl,Qf,Zy,it,cb,Zf,ub,Pg,FP,OP,hb,Mg,db,BP,jP,VP,fb,zP,pb,UP,HP,$P,mb,xd;const lt=class lt{constructor(t){x(this,it);x(this,al,null);x(this,is,null);x(this,Yt,null);x(this,Ft,null);x(this,vr,null);x(this,Pu,!1);x(this,Io,null);x(this,Yf,"");x(this,We,null);x(this,ll,null);x(this,wr,null);x(this,Ni,null);x(this,Fo,null);x(this,Kf,"");x(this,cl,!1);x(this,Kn,null);x(this,qf,!1);x(this,ul,!1);x(this,br,!1);x(this,Ns,null);x(this,Mu,0);x(this,Du,0);x(this,Ii,null);x(this,hl,null);O(this,"isSelected",!1);O(this,"_isCopy",!1);O(this,"_editToolbar",null);O(this,"_initialOptions",Object.create(null));O(this,"_initialData",null);O(this,"_isVisible",!0);O(this,"_uiManager",null);O(this,"_focusEventsAllowed",!0);x(this,Qf,!1);x(this,Zy,lt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=lt.prototype._resizeWithKeyboard,e=yc.TRANSLATE_SMALL,i=yc.TRANSLATE_BIG;return ht(this,"_resizerKeyboardManager",new _m([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],lt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ht(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new bB({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(lt._l10n??(lt._l10n=t),lt._l10nResizer||(lt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),lt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);lt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){jt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,Qf)}set _isDraggable(t){var e;g(this,Qf,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,Zy)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(A(this,it,xd).call(this),(e=a(this,Ni))==null||e.remove(),g(this,Ni,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,cl)?g(this,cl,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/r,this.y=(e+s)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s),this._onTranslated()}translate(t,e){A(this,it,cb).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,Kn)||g(this,Kn,[this.x,this.y,this.width,this.height]),A(this,it,cb).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){a(this,Kn)||g(this,Kn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[s,r]}=this;if(this.x+=t/s,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:h}=i;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,Kn)&&(a(this,Kn)[0]!==this.x||a(this,Kn)[1]!==this.y)}get _hasBeenResized(){return!!a(this,Kn)&&(a(this,Kn)[2]!==this.width||a(this,Kn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=lt,s=i/t,r=i/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,s]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=i,c*=s,r*=i,o*=s,this._mustFixPosition)switch(t){case 0:r=An(r,0,i-l),o=An(o,0,s-c);break;case 90:r=An(r,0,i-c),o=An(o,l,s);break;case 180:r=An(r,l,i),o=An(o,c,s);break;case 270:r=An(r,c,i),o=An(o,0,s-l);break}this.x=r/=i,this.y=o/=s;const[u,h]=this.getBaseTranslation();r+=u,o+=h,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return A(i=lt,Zf,ub).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return A(i=lt,Zf,ub).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,Yt))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||a(this,ul))return this._editToolbar;this._editToolbar=new tb(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=a(this,Yt))==null||e.destroy()}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return a(this,Yt)||(Fy.initialize(lt._l10n),g(this,Yt,new Fy(this)),a(this,al)&&(a(this,Yt).data=a(this,al),g(this,al,null))),a(this,Yt)}get altTextData(){var t;return(t=a(this,Yt))==null?void 0:t.data}set altTextData(t){a(this,Yt)&&(a(this,Yt).data=t)}get guessedAltText(){var t;return(t=a(this,Yt))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,Yt))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,Yt))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,Yt)&&!a(this,Yt).isEmpty()}hasAltTextData(){var t;return((t=a(this,Yt))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=a(this,Ft))==null||t.focusButton()}addCommentButton(){return this.canAddComment?a(this,Ft)||g(this,Ft,new Zm(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(a(this,vr)){this._uiManager.isEditingMode()&&a(this,vr).classList.remove("hidden");return}this.hasComment&&(g(this,vr,a(this,Ft).renderForStandalone()),this.div.append(a(this,vr)))}}removeStandaloneCommentButton(){a(this,Ft).removeStandaloneCommentButton(),g(this,vr,null)}hideStandaloneCommentButton(){var t;(t=a(this,vr))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:s}}=a(this,Ft);return{text:e,richText:t,date:i,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){a(this,Ft)||g(this,Ft,new Zm(this)),a(this,Ft).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(a(this,Ft)||g(this,Ft,new Zm(this)),a(this,Ft).setInitialText(t,i),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var t;return(t=a(this,Ft))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=a(this,Ft))==null?void 0:t.isDeleted()}get hasComment(){return!!a(this,Ft)&&!a(this,Ft).isEmpty()&&!a(this,Ft).isDeleted()}async editComment(t){a(this,Ft)||g(this,Ft,new Zm(this)),a(this,Ft).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){a(this,Ft).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,l=o+r+1,c=s-100,u=l+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,u,s]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){a(this,Ft).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=a(this,Pu)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),A(this,it,pb).call(this);const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),wP(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,hl)||g(this,hl,new Oy({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:A(this,it,BP).bind(this),onPinching:A(this,it,jP).bind(this),onPinchEnd:A(this,it,VP).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=en.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(g(this,cl,!0),this._isDraggable){A(this,it,zP).call(this,t);return}A(this,it,fb).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,Ns)&&clearTimeout(a(this,Ns)),g(this,Ns,setTimeout(()=>{var t;g(this,Ns,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=t/s,h=e/s,d=this.x*r,f=this.y*o,p=this.width*r,v=this.height*o;switch(i){case 0:return[d+u+l,o-f-h-v+c,d+u+p+l,o-f-h+c];case 90:return[d+h+l,o-f+u+c,d+h+v+l,o-f+u+p+c];case 180:return[d-u-p+l,o-f+h+c,d-u+l,o-f+h+v+c];case 270:return[d-h-v+l,o-f-u-p+c,d-h+l,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,r,o]=t,l=r-i,c=o-s;switch(this.rotation){case 0:return[i,e-o,l,c];case 90:return[i,e-s,c,l];case 180:return[r,e-s,l,c];case 270:return[r,e-o,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=a(this,Ft))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:s,deleted:r,richText:o},uid:l,pageIndex:c,creationDate:u,modificationDate:h}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:u,modificationDate:i||h,popupRef:!r,color:e,opacity:s}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),g(this,ul,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),g(this,ul,!1),!0):!1}isInEditMode(){return a(this,ul)}shouldGetKeyboardEvents(){return a(this,br)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&s>0&&t<r&&i>0}rebuild(){A(this,it,pb).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var i;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((i=this._initialData)==null?void 0:i.popupRef)||""}}static async deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});s.rotation=t.rotation,g(s,al,t.accessibilityData),s._isCopy=t.isCopy||!1;const[r,o]=s.pageDimensions,[l,c,u,h]=s.getRectInCurrentCoords(t.rect,o);return s.x=l/r,s.y=c/o,s.width=u/r,s.height=h/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,i;if((t=a(this,Fo))==null||t.abort(),g(this,Fo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),a(this,Ns)&&(clearTimeout(a(this,Ns)),g(this,Ns,null)),A(this,it,xd).call(this),this.removeEditToolbar(),a(this,Ii)){for(const s of a(this,Ii).values())clearTimeout(s);g(this,Ii,null)}this.parent=null,(e=a(this,hl))==null||e.destroy(),g(this,hl,null),(i=a(this,Ni))==null||i.remove(),g(this,Ni,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,it,FP).call(this),a(this,We).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,s,r,o]=this.getPDFRect();return[lt._round(i+(r-i)*t),lt._round(s+(o-s)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return a(this,Ft).commentPopupPositionInLayer}set commentPopupPosition(t){a(this,Ft).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return a(this,Ft).hasDefaultPopupPosition()}get commentButtonWidth(){return a(this,Ft).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=a(this,Ft))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),g(this,wr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,We).children;if(!a(this,is)){g(this,is,Array.from(e));const o=A(this,it,UP).bind(this),l=A(this,it,HP).bind(this),c=this._uiManager._signal;for(const u of a(this,is)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",A(this,it,$P).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",lt._l10nResizer[h])}}const i=a(this,is)[0];let s=0;for(const o of e){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,is).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)a(this,We).append(a(this,We).firstChild);else if(r>s)for(let l=0;l<r-s;l++)a(this,We).firstChild.before(a(this,We).lastChild);let o=0;for(const l of e){const u=a(this,is)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",lt._l10nResizer[u])}}A(this,it,mb).call(this,0),g(this,br,!0),a(this,We).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,br)&&A(this,it,db).call(this,a(this,Kf),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){A(this,it,xd).call(this),this.div.focus()}select(){var t,e,i;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(i=a(this,Yt))==null||i.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,i,s,r;this.isSelected&&(this.isSelected=!1,(t=a(this,We))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=a(this,Yt))==null||r.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,qf)}set isEditing(t){g(this,qf,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,Ii)||g(this,Ii,new Map);const{action:i}=t;let s=a(this,Ii).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),a(this,Ii).delete(i),a(this,Ii).size===0&&g(this,Ii,null)},lt._telemetryTimeout),a(this,Ii).set(i,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),g(this,Pu,!1)}disable(){this.div&&(this.div.tabIndex=-1),g(this,Pu,!0)}updateFakeAnnotationElement(t){if(!a(this,Ni)&&!this.deleted){g(this,Ni,t.addFakeAnnotation(this));return}if(this.deleted){a(this,Ni).remove(),g(this,Ni,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&a(this,Ni).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};al=new WeakMap,is=new WeakMap,Yt=new WeakMap,Ft=new WeakMap,vr=new WeakMap,Pu=new WeakMap,Io=new WeakMap,Yf=new WeakMap,We=new WeakMap,ll=new WeakMap,wr=new WeakMap,Ni=new WeakMap,Fo=new WeakMap,Kf=new WeakMap,cl=new WeakMap,Kn=new WeakMap,qf=new WeakMap,ul=new WeakMap,br=new WeakMap,Ns=new WeakMap,Mu=new WeakMap,Du=new WeakMap,Ii=new WeakMap,hl=new WeakMap,Qf=new WeakMap,Zy=new WeakMap,it=new WeakSet,cb=function([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Zf=new WeakSet,ub=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Pg=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},FP=function(){if(a(this,We))return;g(this,We,document.createElement("div")),a(this,We).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const s=document.createElement("div");a(this,We).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",A(this,it,OP).bind(this,i),{signal:e}),s.addEventListener("contextmenu",Ki,{signal:e}),s.tabIndex=-1}this.div.prepend(a(this,We))},OP=function(t,e){var h;e.preventDefault();const{isMac:i}=en.platform;if(e.button!==0||e.ctrlKey&&i)return;(h=a(this,Yt))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,g(this,ll,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,it,db).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",de,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ki,{signal:o}),g(this,wr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=a(this,Yt))==null||d.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=c,A(this,it,Mg).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},hb=function(t,e,i,s){this.width=i,this.height=s,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},Mg=function(){if(!a(this,wr))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=a(this,wr);g(this,wr,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===t&&o===e&&l===i&&c===s||this.addCommands({cmd:A(this,it,hb).bind(this,r,o,l,c),undo:A(this,it,hb).bind(this,t,e,i,s),mustExec:!0})},db=function(t,e){const[i,s]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,u=lt.MIN_SIZE/i,h=lt.MIN_SIZE/s,d=A(this,it,Pg).call(this,this.rotation),f=(G,j)=>[d[0]*G+d[2]*j,d[1]*G+d[3]*j],p=A(this,it,Pg).call(this,360-this.rotation),v=(G,j)=>[p[0]*G+p[2]*j,p[1]*G+p[3]*j];let b,S,m=!1,y=!1;switch(t){case"topLeft":m=!0,b=(G,j)=>[0,0],S=(G,j)=>[G,j];break;case"topMiddle":b=(G,j)=>[G/2,0],S=(G,j)=>[G/2,j];break;case"topRight":m=!0,b=(G,j)=>[G,0],S=(G,j)=>[0,j];break;case"middleRight":y=!0,b=(G,j)=>[G,j/2],S=(G,j)=>[0,j/2];break;case"bottomRight":m=!0,b=(G,j)=>[G,j],S=(G,j)=>[0,0];break;case"bottomMiddle":b=(G,j)=>[G/2,j],S=(G,j)=>[G/2,0];break;case"bottomLeft":m=!0,b=(G,j)=>[0,j],S=(G,j)=>[G,0];break;case"middleLeft":y=!0,b=(G,j)=>[0,j/2],S=(G,j)=>[G,j/2];break}const w=b(l,c),C=S(l,c);let E=f(...C);const k=lt._round(r+E[0]),_=lt._round(o+E[1]);let P=1,D=1,R,I;if(e.fromKeyboard)({deltaX:R,deltaY:I}=e);else{const{screenX:G,screenY:j}=e,[N,U]=a(this,ll);[R,I]=this.screenToPageTranslation(G-N,j-U),a(this,ll)[0]=G,a(this,ll)[1]=j}if([R,I]=v(R/i,I/s),m){const G=Math.hypot(l,c);P=D=Math.max(Math.min(Math.hypot(C[0]-w[0]-R,C[1]-w[1]-I)/G,1/l,1/c),u/l,h/c)}else y?P=An(Math.abs(C[0]-w[0]-R),u,1)/l:D=An(Math.abs(C[1]-w[1]-I),h,1)/c;const V=lt._round(l*P),Q=lt._round(c*D);E=f(...S(V,Q));const q=k-E[0],rt=_-E[1];a(this,Kn)||g(this,Kn,[this.x,this.y,this.width,this.height]),this.width=V,this.height=Q,this.x=q,this.y=rt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},BP=function(){var t;g(this,wr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,Yt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},jP=function(t,e,i){let r=.7*(i/e)+1-.7;if(r===1)return;const o=A(this,it,Pg).call(this,this.rotation),l=(k,_)=>[o[0]*k+o[2]*_,o[1]*k+o[3]*_],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,v=lt.MIN_SIZE/c,b=lt.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),v/f,b/p);const S=lt._round(f*r),m=lt._round(p*r);if(S===f&&m===p)return;a(this,Kn)||g(this,Kn,[h,d,f,p]);const y=l(f/2,p/2),w=lt._round(h+y[0]),C=lt._round(d+y[1]),E=l(S/2,m/2);this.x=w-E[0],this.y=C-E[1],this.width=S,this.height=m,this.setDims(),this.fixAndSetPosition(),this._onResizing()},VP=function(){var t;(t=a(this,Yt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),A(this,it,Mg).call(this)},fb=function(t){const{isMac:e}=en.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},zP=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},l=u=>{s.abort(),g(this,Io,null),g(this,cl,!1),this._uiManager.endDragSession()||A(this,it,fb).call(this,u),i&&this._onStopDragging()};e&&(g(this,Mu,t.clientX),g(this,Du,t.clientY),g(this,Io,t.pointerId),g(this,Yf,t.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==a(this,Io)){de(u);return}const[p,v]=this.screenToPageTranslation(h-a(this,Mu),d-a(this,Du));g(this,Mu,h),g(this,Du,d),this._uiManager.dragSelectedEditors(p,v)},o),window.addEventListener("touchmove",de,o),window.addEventListener("pointerdown",u=>{u.pointerType===a(this,Yf)&&(a(this,hl)||u.isPrimary)&&l(u),de(u)},o));const c=u=>{if(!a(this,Io)||a(this,Io)===u.pointerId){l(u);return}de(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},pb=function(){if(a(this,Fo)||!this.div)return;g(this,Fo,new AbortController);const t=this._uiManager.combinedSignal(a(this,Fo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},UP=function(t){lt._resizerKeyboardManager.exec(this,t)},HP=function(t){var e;a(this,br)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,We)&&A(this,it,xd).call(this)},$P=function(t){g(this,Kf,a(this,br)?t:"")},mb=function(t){if(a(this,is))for(const e of a(this,is))e.tabIndex=t},xd=function(){g(this,br,!1),A(this,it,mb).call(this,-1),A(this,it,Mg).call(this)},x(lt,Zf),O(lt,"_l10n",null),O(lt,"_l10nResizer",null),O(lt,"_borderLineWidth",-1),O(lt,"_colorManager",new ib),O(lt,"_zIndex",1),O(lt,"_telemetryTimeout",1e3);let Ht=lt;class bB extends Ht{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const WC=3285377520,Ci=4294901760,Ss=65535;class WP{constructor(t){this.h1=t?t&4294967295:WC,this.h2=t?t&4294967295:WC}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let b=0,S=t.length;b<S;b++){const m=t.charCodeAt(b);m<=255?e[i++]=m:(e[i++]=m>>>8,e[i++]=m&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(e.buffer,0,s);let l=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&Ss,v=f&Ss;for(let b=0;b<s;b++)b&1?(l=o[b],l=l*d&Ci|l*p&Ss,l=l<<15|l>>>17,l=l*f&Ci|l*v&Ss,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[b],c=c*d&Ci|c*p&Ss,c=c<<15|c>>>17,c=c*f&Ci|c*v&Ss,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*d&Ci|l*p&Ss,l=l<<15|l>>>17,l=l*f&Ci|l*v&Ss,s&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ci|t*36045&Ss,e=e*4283543511&Ci|((e<<16|t>>>16)*2950163797&Ci)>>>16,t^=e>>>1,t=t*444984403&Ci|t*60499&Ss,e=e*3301882366&Ci|((e<<16|t>>>16)*3120437893&Ci)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const gb=Object.freeze({map:null,hash:"",transfer:void 0});var dl,fl,xr,Ge,Jy,GP;class Qx{constructor(){x(this,Jy);x(this,dl,!1);x(this,fl,null);x(this,xr,null);x(this,Ge,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=a(this,Ge).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return a(this,Ge).get(t)}remove(t){const e=a(this,Ge).get(t);if(e!==void 0&&(e instanceof Ht&&a(this,xr).delete(e.annotationElementId),a(this,Ge).delete(t),a(this,Ge).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of a(this,Ge).values())if(i instanceof Ht)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=a(this,Ge).get(t);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(e))i[r]!==o&&(s=!0,i[r]=o);else s=!0,a(this,Ge).set(t,e);s&&A(this,Jy,GP).call(this),e instanceof Ht&&((a(this,xr)||g(this,xr,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return a(this,Ge).has(t)}get size(){return a(this,Ge).size}resetModified(){a(this,dl)&&(g(this,dl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new XP(this)}get serializable(){if(a(this,Ge).size===0)return gb;const t=new Map,e=new WP,i=[],s=Object.create(null);let r=!1;for(const[o,l]of a(this,Ge)){const c=l instanceof Ht?l.serialize(!1,s):l;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:gb}get editorStats(){let t=null;const e=new Map;let i=0,s=0;for(const r of a(this,Ge).values()){if(!(r instanceof Ht)){r.popup&&(r.popup.deleted?s+=1:i+=1);continue}r.isCommentDeleted?s+=1:r.hasEditedComment&&(i+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:l}=o;e.has(l)||e.set(l,Object.getPrototypeOf(r).constructor),t||(t=Object.create(null));const c=t[l]||(t[l]=new Map);for(const[u,h]of Object.entries(o)){if(u==="type")continue;let d=c.get(u);d||(d=new Map,c.set(u,d));const f=d.get(h)??0;d.set(h,f+1)}}if((s>0||i>0)&&(t||(t=Object.create(null)),t.comments={deleted:s,edited:i}),!t)return null;for(const[r,o]of e)t[r]=o.computeTelemetryFinalData(t[r]);return t}resetModifiedIds(){g(this,fl,null)}updateEditor(t,e){var s;const i=(s=a(this,xr))==null?void 0:s.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=a(this,xr))==null?void 0:e.get(t))||null}get modifiedIds(){if(a(this,fl))return a(this,fl);const t=[];if(a(this,xr))for(const e of a(this,xr).values())e.serialize()&&t.push(e.annotationElementId);return g(this,fl,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return a(this,Ge).entries()}}dl=new WeakMap,fl=new WeakMap,xr=new WeakMap,Ge=new WeakMap,Jy=new WeakSet,GP=function(){a(this,dl)||(g(this,dl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Jf;class XP extends Qx{constructor(e){super();x(this,Jf);const{map:i,hash:s,transfer:r}=e.serializable,o=structuredClone(i,r?{transfer:r}:null);g(this,Jf,{map:o,hash:s,transfer:r})}get print(){jt("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,Jf)}get modifiedIds(){return ht(this,"modifiedIds",{ids:new Set,hash:""})}}Jf=new WeakMap;var Ru;class xB{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){x(this,Ru,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,Ru).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||a(this,Ru).has(t.loadedName))){if(wt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=t,l=new FontFace(s,r,o);this.addNativeFontFace(l);try{await l.load(),a(this,Ru).add(s),i==null||i(t)}catch{at(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}jt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw at(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return ht(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return ht(this,"isSyncFontLoadingSupported",xn||en.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(wt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ht(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(C,E){return C.charCodeAt(E)<<24|C.charCodeAt(E+1)<<16|C.charCodeAt(E+2)<<8|C.charCodeAt(E+3)&255}function s(C,E,k,_){const P=C.substring(0,E),D=C.substring(E+k);return P+_+D}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function h(C,E){if(++u>30){at("Load test font never loaded."),E();return}if(c.font="30px "+C,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(h.bind(null,C,E))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const v=16,b=1482184792;let S=i(f,v);for(r=0,o=d.length-3;r<o;r+=4)S=S-b+i(d,r)|0;r<d.length&&(S=S-b+i(d+"XXX",r)|0),f=s(f,v,4,eB(S));const m=`url(data:font/opentype;base64,${btoa(f)});`,y=`@font-face {font-family:"${d}";src:${m}}`;this.insertRule(y);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const C of[t.loadedName,d]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=C,w.append(E)}this._document.body.append(w),h(d,()=>{w.remove(),e.complete()})}}Ru=new WeakMap;var Dt;class AB{constructor(t,e=null,i,s){x(this,Dt);this.compiledGlyphs=Object.create(null),g(this,Dt,t),this._inspectFont=e,i&&Object.assign(this,i),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${uP(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let s;try{s=t.get(i)}catch(o){at(`getPathGenerator - ignoring character: "${o}".`)}const r=fP(s);return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=r}get black(){return a(this,Dt).black}get bold(){return a(this,Dt).bold}get disableFontFace(){return a(this,Dt).disableFontFace??!1}get fontExtraProperties(){return a(this,Dt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return a(this,Dt).isInvalidPDFjsFont}get isType3Font(){return a(this,Dt).isType3Font}get italic(){return a(this,Dt).italic}get missingFile(){return a(this,Dt).missingFile}get remeasure(){return a(this,Dt).remeasure}get vertical(){return a(this,Dt).vertical}get ascent(){return a(this,Dt).ascent}get defaultWidth(){return a(this,Dt).defaultWidth}get descent(){return a(this,Dt).descent}get bbox(){return a(this,Dt).bbox}get fontMatrix(){return a(this,Dt).fontMatrix}get fallbackName(){return a(this,Dt).fallbackName}get loadedName(){return a(this,Dt).loadedName}get mimetype(){return a(this,Dt).mimetype}get name(){return a(this,Dt).name}get data(){return a(this,Dt).data}clearData(){a(this,Dt).clearData()}get cssFontInfo(){return a(this,Dt).cssFontInfo}get systemFontInfo(){return a(this,Dt).systemFontInfo}get defaultVMetrics(){return a(this,Dt).defaultVMetrics}}Dt=new WeakMap;var Lu,Nu,tp,Iu,Dg;const tu=class tu{constructor(t){x(this,Iu);x(this,Lu);x(this,Nu);x(this,tp);g(this,Lu,t),g(this,Nu,new DataView(a(this,Lu))),g(this,tp,new TextDecoder)}static write(t){const e=new TextEncoder,i={};let s=0;for(const u of tu.strings){const h=e.encode(t[u]);i[u]=h,s+=4+h.length}const r=new ArrayBuffer(s),o=new Uint8Array(r),l=new DataView(r);let c=0;for(const u of tu.strings){const h=i[u],d=h.length;l.setUint32(c,d),o.set(h,c+4),c+=4+d}return wt(c===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return A(this,Iu,Dg).call(this,0)}get fontWeight(){return A(this,Iu,Dg).call(this,1)}get italicAngle(){return A(this,Iu,Dg).call(this,2)}};Lu=new WeakMap,Nu=new WeakMap,tp=new WeakMap,Iu=new WeakSet,Dg=function(t){wt(t<tu.strings.length,"Invalid string index");let e=0;for(let s=0;s<t;s++)e+=a(this,Nu).getUint32(e)+4;const i=a(this,Nu).getUint32(e);return a(this,tp).decode(new Uint8Array(a(this,Lu),e+4,i))},O(tu,"strings",["fontFamily","fontWeight","italicAngle"]);let By=tu;var Oo,Is,pl,ml,Ad;const eu=class eu{constructor(t){x(this,ml);x(this,Oo);x(this,Is);x(this,pl);g(this,Oo,t),g(this,Is,new DataView(a(this,Oo))),g(this,pl,new TextDecoder)}static write(t){const e=new TextEncoder,i={};let s=0;for(const f of eu.strings){const p=e.encode(t[f]);i[f]=p,s+=4+p.length}s+=4;let r,o,l=1+s;t.style&&(r=e.encode(t.style.style),o=e.encode(t.style.weight),l+=4+r.length+4+o.length);const c=new ArrayBuffer(l),u=new Uint8Array(c),h=new DataView(c);let d=0;h.setUint8(d++,t.guessFallback?1:0),h.setUint32(d,0),d+=4,s=0;for(const f of eu.strings){const p=i[f],v=p.length;s+=4+v,h.setUint32(d,v),u.set(p,d+4),d+=4+v}return h.setUint32(d-s-4,s),t.style&&(h.setUint32(d,r.length),u.set(r,d+4),d+=4+r.length,h.setUint32(d,o.length),u.set(o,d+4),d+=4+o.length),wt(d<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(d)}get guessFallback(){return a(this,Is).getUint8(0)!==0}get css(){return A(this,ml,Ad).call(this,0)}get loadedName(){return A(this,ml,Ad).call(this,1)}get baseFontName(){return A(this,ml,Ad).call(this,2)}get src(){return A(this,ml,Ad).call(this,3)}get style(){let t=1;t+=4+a(this,Is).getUint32(t);const e=a(this,Is).getUint32(t),i=a(this,pl).decode(new Uint8Array(a(this,Oo),t+4,e));t+=4+e;const s=a(this,Is).getUint32(t),r=a(this,pl).decode(new Uint8Array(a(this,Oo),t+4,s));return{style:i,weight:r}}};Oo=new WeakMap,Is=new WeakMap,pl=new WeakMap,ml=new WeakSet,Ad=function(t){wt(t<eu.strings.length,"Invalid string index");let e=5;for(let s=0;s<t;s++)e+=a(this,Is).getUint32(e)+4;const i=a(this,Is).getUint32(e);return a(this,pl).decode(new Uint8Array(a(this,Oo),e+4,i))},O(eu,"strings",["css","loadedName","baseFontName","src"]);let jy=eu;var Fu,Ou,Bu,ju,qn,Fs,ep,Rt,ue,Qi,Rg,Sd;const ut=class ut{constructor({data:t,extra:e}){x(this,ue);x(this,Fs);x(this,ep);x(this,Rt);g(this,Fs,t),g(this,ep,new TextDecoder),g(this,Rt,new DataView(a(this,Fs))),e&&Object.assign(this,e)}get black(){return A(this,ue,Qi).call(this,0)}get bold(){return A(this,ue,Qi).call(this,1)}get disableFontFace(){return A(this,ue,Qi).call(this,2)}get fontExtraProperties(){return A(this,ue,Qi).call(this,3)}get isInvalidPDFjsFont(){return A(this,ue,Qi).call(this,4)}get isType3Font(){return A(this,ue,Qi).call(this,5)}get italic(){return A(this,ue,Qi).call(this,6)}get missingFile(){return A(this,ue,Qi).call(this,7)}get remeasure(){return A(this,ue,Qi).call(this,8)}get vertical(){return A(this,ue,Qi).call(this,9)}get ascent(){return A(this,ue,Rg).call(this,0)}get defaultWidth(){return A(this,ue,Rg).call(this,1)}get descent(){return A(this,ue,Rg).call(this,2)}get bbox(){let t=a(ut,Ou);if(a(this,Rt).getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<4;s++)i.push(a(this,Rt).getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=a(ut,Bu);if(a(this,Rt).getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<6;s++)i.push(a(this,Rt).getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=a(ut,ju);if(a(this,Rt).getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<3;s++)i.push(a(this,Rt).getInt16(t,!0)),t+=2;return i}get fallbackName(){return A(this,ue,Sd).call(this,0)}get loadedName(){return A(this,ue,Sd).call(this,1)}get mimetype(){return A(this,ue,Sd).call(this,2)}get name(){return A(this,ue,Sd).call(this,3)}get data(){let t=a(ut,qn);const e=a(this,Rt).getUint32(t);t+=4+e;const i=a(this,Rt).getUint32(t);t+=4+i;const s=a(this,Rt).getUint32(t);t+=4+s;const r=a(this,Rt).getUint32(t);if(r!==0)return new Uint8Array(a(this,Fs),t+4,r)}clearData(){let t=a(ut,qn);const e=a(this,Rt).getUint32(t);t+=4+e;const i=a(this,Rt).getUint32(t);t+=4+i;const s=a(this,Rt).getUint32(t);t+=4+s;const r=a(this,Rt).getUint32(t);new Uint8Array(a(this,Fs),t+4,r).fill(0),a(this,Rt).setUint32(t,0)}get cssFontInfo(){let t=a(ut,qn);const e=a(this,Rt).getUint32(t);t+=4+e;const i=a(this,Rt).getUint32(t);t+=4+i;const s=a(this,Rt).getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(a(this,Fs),t+4,s)),new By(r.buffer)}get systemFontInfo(){let t=a(ut,qn);const e=a(this,Rt).getUint32(t);t+=4+e;const i=a(this,Rt).getUint32(t);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(a(this,Fs),t+4,i)),new jy(s.buffer)}static write(t){const e=t.systemFontInfo?jy.write(t.systemFontInfo):null,i=t.cssFontInfo?By.write(t.cssFontInfo):null,s=new TextEncoder,r={};let o=0;for(const b of ut.strings)r[b]=s.encode(t[b]),o+=4+r[b].length;const l=a(ut,qn)+4+o+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),c=new ArrayBuffer(l),u=new Uint8Array(c),h=new DataView(c);let d=0;const f=ut.bools.length;let p=0,v=0;for(let b=0;b<f;b++){const S=t[ut.bools[b]];p|=(S===void 0?0:S?2:1)<<v,v+=2,(v===8||b===f-1)&&(h.setUint8(d++,p),p=0,v=0)}wt(d===a(ut,Fu),"FontInfo.write: Boolean properties offset mismatch");for(const b of ut.numbers)h.setFloat64(d,t[b]),d+=8;if(wt(d===a(ut,Ou),"FontInfo.write: Number properties offset mismatch"),t.bbox){h.setUint8(d++,4);for(const b of t.bbox)h.setInt16(d,b,!0),d+=2}else h.setUint8(d++,0),d+=2*4;if(wt(d===a(ut,Bu),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){h.setUint8(d++,6);for(const b of t.fontMatrix)h.setFloat64(d,b,!0),d+=8}else h.setUint8(d++,0),d+=8*6;if(wt(d===a(ut,ju),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){h.setUint8(d++,1);for(const b of t.defaultVMetrics)h.setInt16(d,b,!0),d+=2}else h.setUint8(d++,0),d+=3*2;wt(d===a(ut,qn),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(a(ut,qn),0),d+=4;for(const b of ut.strings){const S=r[b],m=S.length;h.setUint32(d,m),u.set(S,d+4),d+=4+m}if(h.setUint32(a(ut,qn),d-a(ut,qn)-4),!e)h.setUint32(d,0),d+=4;else{const b=e.byteLength;h.setUint32(d,b),wt(d+4+b<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(e),d+4),d+=4+b}if(!i)h.setUint32(d,0),d+=4;else{const b=i.byteLength;h.setUint32(d,b),wt(d+4+b<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(i),d+4),d+=4+b}return t.data===void 0?(h.setUint32(d,0),d+=4):(h.setUint32(d,t.data.length),u.set(t.data,d+4),d+=4+t.data.length),wt(d<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(d)}};Fu=new WeakMap,Ou=new WeakMap,Bu=new WeakMap,ju=new WeakMap,qn=new WeakMap,Fs=new WeakMap,ep=new WeakMap,Rt=new WeakMap,ue=new WeakSet,Qi=function(t){wt(t<ut.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,s=a(this,Rt).getUint8(e)>>i&3;return s===0?void 0:s===2},Rg=function(t){return wt(t<ut.numbers.length,"Invalid number index"),a(this,Rt).getFloat64(a(ut,Fu)+t*8)},Sd=function(t){wt(t<ut.strings.length,"Invalid string index");let e=a(ut,qn)+4;for(let r=0;r<t;r++)e+=a(this,Rt).getUint32(e)+4;const i=a(this,Rt).getUint32(e),s=new Uint8Array(i);return s.set(new Uint8Array(a(this,Fs),e+4,i)),a(this,ep).decode(s)},O(ut,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),O(ut,"numbers",["ascent","defaultWidth","descent"]),O(ut,"strings",["fallbackName","loadedName","mimetype","name"]),x(ut,Fu,Math.ceil(ut.bools.length*2/8)),x(ut,Ou,a(ut,Fu)+ut.numbers.length*8),x(ut,Bu,a(ut,Ou)+1+2*4),x(ut,ju,a(ut,Bu)+1+8*6),x(ut,qn,a(ut,ju)+1+2*3);let yb=ut;var np,ip,sp,rp,op,ap,lp,cp;const Vt=class Vt{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,i=null,s=[],r=[],o=[],l=[],c=null,u=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,i=t[2],o=t[3],e===1?s.push(...t[4],...t[5]):s.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,c=t[1],s=t[2],r=t[3],l=t[4]||[],i=t[6],u=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const h=Math.floor(s.length/2),d=Math.floor(r.length/3),f=o.length,p=l.length;let v=0;for(const E of l)v+=1,v=Math.ceil(v/4)*4,v+=4+E.coords.length*4,v+=4+E.colors.length*4,E.verticesPerRow!==void 0&&(v+=4);const b=20+h*8+d*3+f*8+(i?16:0)+(u?3:0)+v,S=new ArrayBuffer(b),m=new DataView(S),y=new Uint8Array(S);m.setUint8(a(Vt,np),e),m.setUint8(a(Vt,ip),i?1:0),m.setUint8(a(Vt,sp),u?1:0),m.setUint8(a(Vt,rp),c),m.setUint32(a(Vt,op),h,!0),m.setUint32(a(Vt,ap),d,!0),m.setUint32(a(Vt,lp),f,!0),m.setUint32(a(Vt,cp),p,!0);let w=20;new Float32Array(S,w,h*2).set(s),w+=h*8,y.set(r,w),w+=d*3;for(const[E,k]of o)m.setFloat32(w,E,!0),w+=4,m.setUint32(w,parseInt(k.slice(1),16),!0),w+=4;if(i)for(const E of i)m.setFloat32(w,E,!0),w+=4;u&&(y.set(u,w),w+=3);for(let E=0;E<l.length;E++){const k=l[E];m.setUint8(w,k.type),w+=1,w=Math.ceil(w/4)*4,m.setUint32(w,k.coords.length,!0),w+=4,new Int32Array(S,w,k.coords.length).set(k.coords),w+=k.coords.length*4,m.setUint32(w,k.colors.length,!0),w+=4,new Int32Array(S,w,k.colors.length).set(k.colors),w+=k.colors.length*4,k.verticesPerRow!==void 0&&(m.setUint32(w,k.verticesPerRow,!0),w+=4)}return S}getIR(){const t=this.view,e=this.data[a(Vt,np)],i=!!this.data[a(Vt,ip)],s=!!this.data[a(Vt,sp)],r=t.getUint32(a(Vt,op),!0),o=t.getUint32(a(Vt,ap),!0),l=t.getUint32(a(Vt,lp),!0),c=t.getUint32(a(Vt,cp),!0);let u=20;const h=new Float32Array(this.buffer,u,r*2);u+=r*8;const d=new Uint8Array(this.buffer,u,o*3);u+=o*3;const f=[];for(let S=0;S<l;++S){const m=t.getFloat32(u,!0);u+=4;const y=t.getUint32(u,!0);u+=4,f.push([m,`#${y.toString(16).padStart(6,"0")}`])}let p=null;if(i){p=[];for(let S=0;S<4;++S)p.push(t.getFloat32(u,!0)),u+=4}let v=null;s&&(v=new Uint8Array(this.buffer,u,3),u+=3);const b=[];for(let S=0;S<c;++S){const m=t.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const y=t.getUint32(u,!0);u+=4;const w=new Int32Array(this.buffer,u,y);u+=y*4;const C=t.getUint32(u,!0);u+=4;const E=new Int32Array(this.buffer,u,C);u+=C*4;const k={type:m,coords:w,colors:E};m===Kw.LATTICE&&(k.verticesPerRow=t.getUint32(u,!0),u+=4),b.push(k)}if(e===1)return["RadialAxial","axial",p,f,Array.from(h.slice(0,2)),Array.from(h.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",p,f,[h[0],h[1]],[h[3],h[4]],h[2],h[5]];if(e===3){const S=this.data[a(Vt,rp)];let m=null;if(h.length>0){let y=h[0],w=h[0],C=h[1],E=h[1];for(let k=0;k<h.length;k+=2){const _=h[k],P=h[k+1];y=y>_?_:y,C=C>P?P:C,w=w<_?_:w,E=E<P?P:E}m=[y,C,w,E]}return["Mesh",S,h,d,b,m,p,v]}throw new Error(`Unsupported pattern kind: ${e}`)}};np=new WeakMap,ip=new WeakMap,sp=new WeakMap,rp=new WeakMap,op=new WeakMap,ap=new WeakMap,lp=new WeakMap,cp=new WeakMap,x(Vt,np,0),x(Vt,ip,1),x(Vt,sp,2),x(Vt,rp,3),x(Vt,op,4),x(Vt,ap,8),x(Vt,lp,12),x(Vt,cp,16);let vb=Vt;function SB(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(xn)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function CB(n){if(xn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Cm(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Jm(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const wb=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,EB=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",TB=oB.bind(null,wb,EB);var Ar,t0;class kB{constructor(){x(this,Ar,new Map);x(this,t0,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};a(this,t0).then(()=>{for(const[s]of a(this,Ar))s.call(this,i)})}addEventListener(t,e,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){at("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,Ar).set(e,s)}removeEventListener(t,e){const i=a(this,Ar).get(e);i==null||i(),a(this,Ar).delete(e)}terminate(){for(const[,t]of a(this,Ar))t==null||t();a(this,Ar).clear()}}Ar=new WeakMap,t0=new WeakMap;const tg={DATA:1,ERROR:2},ve={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function GC(){}function Mn(n){if(n instanceof Ca||n instanceof qw||n instanceof BC||n instanceof Ny||n instanceof kv)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||jt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ca(n.message);case"InvalidPDFException":return new qw(n.message);case"PasswordException":return new BC(n.message,n.code);case"ResponseException":return new Ny(n.message,n.status,n.missing);case"UnknownErrorException":return new kv(n.message,n.details)}return new kv(n.message,n.toString())}var Vu,Gi,YP,KP,qP,Lg;class Cd{constructor(t,e,i){x(this,Gi);x(this,Vu,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",A(this,Gi,YP).bind(this),{signal:a(this,Vu).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,i,s){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:r,data:e,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:l,stream:ve.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{wt(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:ve.CANCEL,streamId:r,reason:Mn(u)}),h.promise}},i)}destroy(){var t;(t=a(this,Vu))==null||t.abort(),g(this,Vu,null)}}Vu=new WeakMap,Gi=new WeakSet,YP=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){A(this,Gi,qP).call(this,t);return}if(t.callback){const i=t.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===tg.DATA)s.resolve(t.data);else if(t.callback===tg.ERROR)s.reject(Mn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,s=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:i,targetName:s,callback:tg.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:i,targetName:s,callback:tg.ERROR,callbackId:t.callbackId,reason:Mn(o)})});return}if(t.streamId){A(this,Gi,KP).call(this,t);return}e(t.data)},KP=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:ve.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:ve.CLOSE,streamId:e}),delete o.streamSinks[e])},error(u){wt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:ve.ERROR,streamId:e,reason:Mn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){r.postMessage({sourceName:i,targetName:s,stream:ve.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:ve.START_COMPLETE,streamId:e,reason:Mn(u)})})},qP=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case ve.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Mn(t.reason));break;case ve.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Mn(t.reason));break;case ve.PULL:if(!l){r.postMessage({sourceName:i,targetName:s,stream:ve.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||GC).then(function(){r.postMessage({sourceName:i,targetName:s,stream:ve.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:ve.PULL_COMPLETE,streamId:e,reason:Mn(u)})});break;case ve.ENQUEUE:if(wt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case ve.CLOSE:if(wt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),A(this,Gi,Lg).call(this,o,e);break;case ve.ERROR:wt(o,"error should have stream controller"),o.controller.error(Mn(t.reason)),A(this,Gi,Lg).call(this,o,e);break;case ve.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Mn(t.reason)),A(this,Gi,Lg).call(this,o,e);break;case ve.CANCEL:if(!l)break;const c=Mn(t.reason);Promise.try(l.onCancel||GC,c).then(function(){r.postMessage({sourceName:i,targetName:s,stream:ve.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:ve.CANCEL_COMPLETE,streamId:e,reason:Mn(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Lg=async function(t,e){var i,s,r;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var up;class QP{constructor({enableHWA:t=!1}){x(this,up,!1);g(this,up,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!a(this,up)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){jt("Abstract method `_createCanvas` called.")}}up=new WeakMap;class _B extends QP{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class ZP{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){jt("Abstract method `_fetch` called.")}}class XC extends ZP{async _fetch(t){const e=await Em(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Cm(e)}}class JP{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,r){return"none"}destroy(t=!1){}}var gl,zu,Sr,Cr,un,yl,vl,W,on,Ed,_c,Ng,Pc,t2,bb,Mc,Td,kd,xb,_d;class PB extends JP{constructor({docId:e,ownerDocument:i=globalThis.document}){super();x(this,W);x(this,gl);x(this,zu);x(this,Sr);x(this,Cr);x(this,un);x(this,yl);x(this,vl,0);g(this,Cr,e),g(this,un,i)}addFilter(e){if(!e)return"none";let i=a(this,W,on).get(e);if(i)return i;const[s,r,o]=A(this,W,Ng).call(this,e),l=e.length===1?s:`${s}${r}${o}`;if(i=a(this,W,on).get(l),i)return a(this,W,on).set(e,i),i;const c=`g_${a(this,Cr)}_transfer_map_${Ce(this,vl)._++}`,u=A(this,W,Pc).call(this,c);a(this,W,on).set(e,u),a(this,W,on).set(l,u);const h=A(this,W,Mc).call(this,c);return A(this,W,kd).call(this,s,r,o,h),u}addHCMFilter(e,i){var v;const s=`${e}-${i}`,r="base";let o=a(this,W,Ed).get(r);if((o==null?void 0:o.key)===s||(o?((v=o.filter)==null||v.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},a(this,W,Ed).set(r,o)),!e||!i))return o.url;const l=A(this,W,_d).call(this,e);e=K.makeHexColor(...l);const c=A(this,W,_d).call(this,i);if(i=K.makeHexColor(...c),a(this,W,_c).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return o.url;const u=new Array(256);for(let b=0;b<=255;b++){const S=b/255;u[b]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=u.join(","),d=`g_${a(this,Cr)}_hcm_filter`,f=o.filter=A(this,W,Mc).call(this,d);A(this,W,kd).call(this,h,h,h,f),A(this,W,bb).call(this,f);const p=(b,S)=>{const m=l[b]/255,y=c[b]/255,w=new Array(S+1);for(let C=0;C<=S;C++)w[C]=m+C/S*(y-m);return w.join(",")};return A(this,W,kd).call(this,p(0,5),p(1,5),p(2,5),f),o.url=A(this,W,Pc).call(this,d),o.url}addAlphaFilter(e){let i=a(this,W,on).get(e);if(i)return i;const[s]=A(this,W,Ng).call(this,[e]),r=`alpha_${s}`;if(i=a(this,W,on).get(r),i)return a(this,W,on).set(e,i),i;const o=`g_${a(this,Cr)}_alpha_map_${Ce(this,vl)._++}`,l=A(this,W,Pc).call(this,o);a(this,W,on).set(e,l),a(this,W,on).set(r,l);const c=A(this,W,Mc).call(this,o);return A(this,W,xb).call(this,s,c),l}addLuminosityFilter(e){let i=a(this,W,on).get(e||"luminosity");if(i)return i;let s,r;if(e?([s]=A(this,W,Ng).call(this,[e]),r=`luminosity_${s}`):r="luminosity",i=a(this,W,on).get(r),i)return a(this,W,on).set(e,i),i;const o=`g_${a(this,Cr)}_luminosity_map_${Ce(this,vl)._++}`,l=A(this,W,Pc).call(this,o);a(this,W,on).set(e,l),a(this,W,on).set(r,l);const c=A(this,W,Mc).call(this,o);return A(this,W,t2).call(this,c),e&&A(this,W,xb).call(this,s,c),l}addHighlightHCMFilter(e,i,s,r,o){var y;const l=`${i}-${s}-${r}-${o}`;let c=a(this,W,Ed).get(e);if((c==null?void 0:c.key)===l||(c?((y=c.filter)==null||y.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,W,Ed).set(e,c)),!i||!s))return c.url;const[u,h]=[i,s].map(A(this,W,_d).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,v]=[r,o].map(A(this,W,_d).bind(this));f<d&&([d,f,p,v]=[f,d,v,p]),a(this,W,_c).style.color="";const b=(w,C,E)=>{const k=new Array(256),_=(f-d)/E,P=w/255,D=(C-w)/(255*E);let R=0;for(let I=0;I<=E;I++){const V=Math.round(d+I*_),Q=P+I*D;for(let q=R;q<=V;q++)k[q]=Q;R=V+1}for(let I=R;I<256;I++)k[I]=k[R-1];return k.join(",")},S=`g_${a(this,Cr)}_hcm_${e}_filter`,m=c.filter=A(this,W,Mc).call(this,S);return A(this,W,bb).call(this,m),A(this,W,kd).call(this,b(p[0],v[0],5),b(p[1],v[1],5),b(p[2],v[2],5),m),c.url=A(this,W,Pc).call(this,S),c.url}destroy(e=!1){var i,s,r,o;e&&((i=a(this,yl))!=null&&i.size)||((s=a(this,Sr))==null||s.parentNode.parentNode.remove(),g(this,Sr,null),(r=a(this,zu))==null||r.clear(),g(this,zu,null),(o=a(this,yl))==null||o.clear(),g(this,yl,null),g(this,vl,0))}}gl=new WeakMap,zu=new WeakMap,Sr=new WeakMap,Cr=new WeakMap,un=new WeakMap,yl=new WeakMap,vl=new WeakMap,W=new WeakSet,on=function(){return a(this,zu)||g(this,zu,new Map)},Ed=function(){return a(this,yl)||g(this,yl,new Map)},_c=function(){if(!a(this,Sr)){const e=a(this,un).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=a(this,un).createElementNS(sr,"svg");s.setAttribute("width",0),s.setAttribute("height",0),g(this,Sr,a(this,un).createElementNS(sr,"defs")),e.append(s),s.append(a(this,Sr)),a(this,un).body.append(e)}return a(this,Sr)},Ng=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,s,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,l[u]=s[u]/255,c[u]=r[u]/255;return[o.join(","),l.join(","),c.join(",")]},Pc=function(e){if(a(this,gl)===void 0){g(this,gl,"");const i=a(this,un).URL;i!==a(this,un).baseURI&&(N0(i)?at('#createUrl: ignore "data:"-URL for performance reasons.'):g(this,gl,aP(i,"")))}return`url(${a(this,gl)}#${e})`},t2=function(e){const i=a(this,un).createElementNS(sr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},bb=function(e){const i=a(this,un).createElementNS(sr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},Mc=function(e){const i=a(this,un).createElementNS(sr,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),a(this,W,_c).append(i),i},Td=function(e,i,s){const r=a(this,un).createElementNS(sr,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},kd=function(e,i,s,r){const o=a(this,un).createElementNS(sr,"feComponentTransfer");r.append(o),A(this,W,Td).call(this,o,"feFuncR",e),A(this,W,Td).call(this,o,"feFuncG",i),A(this,W,Td).call(this,o,"feFuncB",s)},xb=function(e,i){const s=a(this,un).createElementNS(sr,"feComponentTransfer");i.append(s),A(this,W,Td).call(this,s,"feFuncA",e)},_d=function(e){return a(this,W,_c).style.color=e,km(getComputedStyle(a(this,W,_c)).getPropertyValue("color"))};class e2{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){jt("Abstract method `_fetch` called.")}}class YC extends e2{async _fetch(t){const e=await Em(t,"arraybuffer");return new Uint8Array(e)}}class n2{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){jt("Abstract method `_fetch` called.")}}class KC extends n2{async _fetch(t){const e=await Em(t,"arraybuffer");return new Uint8Array(e)}}xn&&at("Please use the `legacy` build in Node.js environments.");async function Zx(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class MB extends JP{}class DB extends QP{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class RB extends ZP{async _fetch(t){return Zx(t)}}class LB extends e2{async _fetch(t){return Zx(t)}}class NB extends n2{async _fetch(t){return Zx(t)}}const Ec="__forcedDependency",{floor:qC,ceil:QC}=Math;function eg(n,t,e,i,s,r){n[t*4+0]=Math.min(n[t*4+0],e),n[t*4+1]=Math.min(n[t*4+1],i),n[t*4+2]=Math.max(n[t*4+2],s),n[t*4+3]=Math.max(n[t*4+3],r)}const Ab=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Uu,Bo;class IB{constructor(t,e){x(this,Uu);x(this,Bo);g(this,Uu,t),g(this,Bo,e)}get length(){return a(this,Uu).length}isEmpty(t){return a(this,Uu)[t]===Ab}minX(t){return a(this,Bo)[t*4+0]/256}minY(t){return a(this,Bo)[t*4+1]/256}maxX(t){return(a(this,Bo)[t*4+2]+1)/256}maxY(t){return(a(this,Bo)[t*4+3]+1)/256}}Uu=new WeakMap,Bo=new WeakMap;const ng=(n,t)=>{if(!n)return;let e=n.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},n.set(t,e)),e};var Ln,Nn,wl,ss,bl,Er,kt,Lt,Tr,In,hp,Hu,xl,Al,kr,hn,Os,dp,Sb;class FB{constructor(t,e,i=!1){x(this,dp);x(this,Ln,{__proto__:null});x(this,Nn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Ec]:[]});x(this,wl,new Map);x(this,ss,[]);x(this,bl,[]);x(this,Er,[[1,0,0,1,0,0]]);x(this,kt,[-1/0,-1/0,1/0,1/0]);x(this,Lt,new Float64Array([1/0,1/0,-1/0,-1/0]));x(this,Tr,-1);x(this,In,new Set);x(this,hp,new Map);x(this,Hu,new Map);x(this,xl);x(this,Al);x(this,kr);x(this,hn);x(this,Os);g(this,xl,t.width),g(this,Al,t.height),A(this,dp,Sb).call(this,e),i&&g(this,Os,new Map)}growOperationsCount(t){t>=a(this,hn).length&&A(this,dp,Sb).call(this,t,a(this,hn))}save(t){return g(this,Ln,{__proto__:a(this,Ln)}),g(this,Nn,{__proto__:a(this,Nn),transform:{__proto__:a(this,Nn).transform},moveText:{__proto__:a(this,Nn).moveText},sameLineText:{__proto__:a(this,Nn).sameLineText},[Ec]:{__proto__:a(this,Nn)[Ec]}}),g(this,kt,{__proto__:a(this,kt)}),a(this,ss).push(t),this}restore(t){var s;const e=Object.getPrototypeOf(a(this,Ln));if(e===null)return this;g(this,Ln,e),g(this,Nn,Object.getPrototypeOf(a(this,Nn))),g(this,kt,Object.getPrototypeOf(a(this,kt)));const i=a(this,ss).pop();return i!==void 0&&((s=ng(a(this,Os),t))==null||s.dependencies.add(i),a(this,hn)[t]=a(this,hn)[i]),this}recordOpenMarker(t){return a(this,ss).push(t),this}getOpenMarker(){return a(this,ss).length===0?null:a(this,ss).at(-1)}recordCloseMarker(t){var i;const e=a(this,ss).pop();return e!==void 0&&((i=ng(a(this,Os),t))==null||i.dependencies.add(e),a(this,hn)[t]=a(this,hn)[e]),this}beginMarkedContent(t){return a(this,bl).push(t),this}endMarkedContent(t){var i;const e=a(this,bl).pop();return e!==void 0&&((i=ng(a(this,Os),t))==null||i.dependencies.add(e),a(this,hn)[t]=a(this,hn)[e]),this}pushBaseTransform(t){return a(this,Er).push(K.multiplyByDOMMatrix(a(this,Er).at(-1),t.getTransform())),this}popBaseTransform(){return a(this,Er).length>1&&a(this,Er).pop(),this}recordSimpleData(t,e){return a(this,Ln)[t]=e,this}recordIncrementalData(t,e){return a(this,Nn)[t].push(e),this}resetIncrementalData(t,e){return a(this,Nn)[t].length=0,this}recordNamedData(t,e){return a(this,wl).set(t,e),this}recordSimpleDataFromNamed(t,e,i){a(this,Ln)[t]=a(this,wl).get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Ec,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in a(this,Ln)&&this.recordFutureForcedDependency(e,a(this,Ln)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of a(this,In))this.recordFutureForcedDependency(Ec,t);return this}resetBBox(t){return a(this,Tr)!==t&&(g(this,Tr,t),a(this,Lt)[0]=1/0,a(this,Lt)[1]=1/0,a(this,Lt)[2]=-1/0,a(this,Lt)[3]=-1/0),this}recordClipBox(t,e,i,s,r,o){const l=K.multiplyByDOMMatrix(a(this,Er).at(-1),e.getTransform()),c=[1/0,1/0,-1/0,-1/0];K.axialAlignedBoundingBox([i,r,s,o],l,c);const u=K.intersect(a(this,kt),c);return u?(a(this,kt)[0]=u[0],a(this,kt)[1]=u[1],a(this,kt)[2]=u[2],a(this,kt)[3]=u[3]):(a(this,kt)[0]=a(this,kt)[1]=1/0,a(this,kt)[2]=a(this,kt)[3]=-1/0),this}recordBBox(t,e,i,s,r,o){const l=a(this,kt);if(l[0]===1/0)return this;const c=K.multiplyByDOMMatrix(a(this,Er).at(-1),e.getTransform());if(l[0]===-1/0)return K.axialAlignedBoundingBox([i,r,s,o],c,a(this,Lt)),this;const u=[1/0,1/0,-1/0,-1/0];return K.axialAlignedBoundingBox([i,r,s,o],c,u),a(this,Lt)[0]=Math.min(a(this,Lt)[0],Math.max(u[0],l[0])),a(this,Lt)[1]=Math.min(a(this,Lt)[1],Math.max(u[1],l[1])),a(this,Lt)[2]=Math.max(a(this,Lt)[2],Math.min(u[2],l[2])),a(this,Lt)[3]=Math.max(a(this,Lt)[3],Math.min(u[3],l[3])),this}recordCharacterBBox(t,e,i,s=1,r=0,o=0,l){const c=i.bbox;let u,h;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&a(this,Hu).get(i),u!==!1&&(h=[0,0,0,0],K.axialAlignedBoundingBox(c,i.fontMatrix,h),(s!==1||r!==0||o!==0)&&K.scaleMinMax([s,0,0,-s,r,o],h),u)))return this.recordBBox(t,e,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(t);const d=l();return c&&h&&u===void 0&&(u=h[0]<=r-d.actualBoundingBoxLeft&&h[2]>=r+d.actualBoundingBoxRight&&h[1]<=o-d.actualBoundingBoxAscent&&h[3]>=o+d.actualBoundingBoxDescent,a(this,Hu).set(i,u),u)?this.recordBBox(t,e,h[0],h[2],h[1],h[3]):this.recordBBox(t,e,r-d.actualBoundingBoxLeft,r+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(t){return a(this,Lt)[0]=Math.max(0,a(this,kt)[0]),a(this,Lt)[1]=Math.max(0,a(this,kt)[1]),a(this,Lt)[2]=Math.min(a(this,xl),a(this,kt)[2]),a(this,Lt)[3]=Math.min(a(this,Al),a(this,kt)[3]),this}getSimpleIndex(t){return a(this,Ln)[t]}recordDependencies(t,e){const i=a(this,In),s=a(this,Ln),r=a(this,Nn);for(const o of e)o in a(this,Ln)?i.add(s[o]):o in r&&r[o].forEach(i.add,i);return this}recordNamedDependency(t,e){return a(this,wl).has(e)&&a(this,In).add(a(this,wl).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Ec]),a(this,Os)){const i=ng(a(this,Os),t),{dependencies:s}=i;a(this,In).forEach(s.add,s),a(this,ss).forEach(s.add,s),a(this,bl).forEach(s.add,s),s.delete(t),i.isRenderingOperation=!0}if(a(this,Tr)===t){const i=qC(a(this,Lt)[0]*256/a(this,xl)),s=qC(a(this,Lt)[1]*256/a(this,Al)),r=QC(a(this,Lt)[2]*256/a(this,xl)),o=QC(a(this,Lt)[3]*256/a(this,Al));eg(a(this,kr),t,i,s,r,o);for(const l of a(this,In))l!==t&&eg(a(this,kr),l,i,s,r,o);for(const l of a(this,ss))l!==t&&eg(a(this,kr),l,i,s,r,o);for(const l of a(this,bl))l!==t&&eg(a(this,kr),l,i,s,r,o);e||(a(this,In).clear(),g(this,Tr,-1))}return this}recordShowTextOperation(t,e=!1){const i=Array.from(a(this,In));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const s of i)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(t,e=!1){return a(this,Tr)===t&&(g(this,Tr,-1),a(this,kt)[0]=Math.max(a(this,kt)[0],a(this,Lt)[0]),a(this,kt)[1]=Math.max(a(this,kt)[1],a(this,Lt)[1]),a(this,kt)[2]=Math.min(a(this,kt)[2],a(this,Lt)[2]),a(this,kt)[3]=Math.min(a(this,kt)[3],a(this,Lt)[3]),e||a(this,In).clear()),this}_takePendingDependencies(){const t=a(this,In);return g(this,In,new Set),t}_extractOperation(t){const e=a(this,hp).get(t);return a(this,hp).delete(t),e}_pushPendingDependencies(t){for(const e of t)a(this,In).add(e)}take(){return a(this,Hu).clear(),new IB(a(this,hn),a(this,kr))}takeDebugMetadata(){return a(this,Os)}}Ln=new WeakMap,Nn=new WeakMap,wl=new WeakMap,ss=new WeakMap,bl=new WeakMap,Er=new WeakMap,kt=new WeakMap,Lt=new WeakMap,Tr=new WeakMap,In=new WeakMap,hp=new WeakMap,Hu=new WeakMap,xl=new WeakMap,Al=new WeakMap,kr=new WeakMap,hn=new WeakMap,Os=new WeakMap,dp=new WeakSet,Sb=function(t,e){const i=new ArrayBuffer(t*4);g(this,kr,new Uint8ClampedArray(i)),g(this,hn,new Uint32Array(i)),e&&e.length>0?(a(this,hn).set(e),a(this,hn).fill(Ab,e.length)):a(this,hn).fill(Ab)};var Ot,oe,rs,$u,Wu;const oA=class oA{constructor(t,e,i){x(this,Ot);x(this,oe);x(this,rs);x(this,$u,0);x(this,Wu,0);if(t instanceof oA&&a(t,rs)===!!i)return t;g(this,Ot,t),g(this,oe,e),g(this,rs,!!i)}growOperationsCount(){throw new Error("Unreachable")}save(t){return Ce(this,Wu)._++,a(this,Ot).save(a(this,oe)),this}restore(t){return a(this,Wu)>0&&(a(this,Ot).restore(a(this,oe)),Ce(this,Wu)._--),this}recordOpenMarker(t){return Ce(this,$u)._++,this}getOpenMarker(){return a(this,$u)>0?a(this,oe):a(this,Ot).getOpenMarker()}recordCloseMarker(t){return Ce(this,$u)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return a(this,Ot).pushBaseTransform(t),this}popBaseTransform(){return a(this,Ot).popBaseTransform(),this}recordSimpleData(t,e){return a(this,Ot).recordSimpleData(t,a(this,oe)),this}recordIncrementalData(t,e){return a(this,Ot).recordIncrementalData(t,a(this,oe)),this}resetIncrementalData(t,e){return a(this,Ot).resetIncrementalData(t,a(this,oe)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return a(this,Ot).recordSimpleDataFromNamed(t,e,a(this,oe)),this}recordFutureForcedDependency(t,e){return a(this,Ot).recordFutureForcedDependency(t,a(this,oe)),this}inheritSimpleDataAsFutureForcedDependencies(t){return a(this,Ot).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return a(this,Ot).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return a(this,rs)||a(this,Ot).resetBBox(a(this,oe)),this}recordClipBox(t,e,i,s,r,o){return a(this,rs)||a(this,Ot).recordClipBox(a(this,oe),e,i,s,r,o),this}recordBBox(t,e,i,s,r,o){return a(this,rs)||a(this,Ot).recordBBox(a(this,oe),e,i,s,r,o),this}recordCharacterBBox(t,e,i,s,r,o,l){return a(this,rs)||a(this,Ot).recordCharacterBBox(a(this,oe),e,i,s,r,o,l),this}recordFullPageBBox(t){return a(this,rs)||a(this,Ot).recordFullPageBBox(a(this,oe)),this}getSimpleIndex(t){return a(this,Ot).getSimpleIndex(t)}recordDependencies(t,e){return a(this,Ot).recordDependencies(a(this,oe),e),this}recordNamedDependency(t,e){return a(this,Ot).recordNamedDependency(a(this,oe),e),this}recordOperation(t){return a(this,Ot).recordOperation(a(this,oe),!0),this}recordShowTextOperation(t){return a(this,Ot).recordShowTextOperation(a(this,oe),!0),this}bboxToClipBoxDropOperation(t){return a(this,rs)||a(this,Ot).bboxToClipBoxDropOperation(a(this,oe),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Ot=new WeakMap,oe=new WeakMap,rs=new WeakMap,$u=new WeakMap,Wu=new WeakMap;let Vy=oA;const Ei={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Qe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Cb(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),n.clip(s)}class Jx{isModifyingCurrentTransform(){return!1}getPattern(){jt("Abstract method `getPattern` called.")}}class OB extends Jx{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let r;if(s===Qe.STROKE||s===Qe.FILL){const o=e.current.getClippedPathBoundingBox(s,Jt(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",l,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),i=K.transform(i,[1,0,0,1,o[0],o[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),Cb(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);r.setTransform(d)}else Cb(t,this._bbox),r=this._createGradient(t);return r}}function Mv(n,t,e,i,s,r,o,l){const c=t.coords,u=t.colors,h=n.data,d=n.width*4;let f;c[e+1]>c[i+1]&&(f=e,e=i,i=f,f=r,r=o,o=f),c[i+1]>c[s+1]&&(f=i,i=s,s=f,f=o,o=l,l=f),c[e+1]>c[i+1]&&(f=e,e=i,i=f,f=r,r=o,o=f);const p=(c[e]+t.offsetX)*t.scaleX,v=(c[e+1]+t.offsetY)*t.scaleY,b=(c[i]+t.offsetX)*t.scaleX,S=(c[i+1]+t.offsetY)*t.scaleY,m=(c[s]+t.offsetX)*t.scaleX,y=(c[s+1]+t.offsetY)*t.scaleY;if(v>=y)return;const w=u[r],C=u[r+1],E=u[r+2],k=u[o],_=u[o+1],P=u[o+2],D=u[l],R=u[l+1],I=u[l+2],V=Math.round(v),Q=Math.round(y);let q,rt,G,j,N,U,$,et;for(let nt=V;nt<=Q;nt++){if(nt<S){const Z=nt<v?0:(v-nt)/(v-S);q=p-(p-b)*Z,rt=w-(w-k)*Z,G=C-(C-_)*Z,j=E-(E-P)*Z}else{let Z;nt>y?Z=1:S===y?Z=0:Z=(S-nt)/(S-y),q=b-(b-m)*Z,rt=k-(k-D)*Z,G=_-(_-R)*Z,j=P-(P-I)*Z}let M;nt<v?M=0:nt>y?M=1:M=(v-nt)/(v-y),N=p-(p-m)*M,U=w-(w-D)*M,$=C-(C-R)*M,et=E-(E-I)*M;const L=Math.round(Math.min(q,N)),F=Math.round(Math.max(q,N));let tt=d*nt+L*4;for(let Z=L;Z<=F;Z++)M=(q-Z)/(q-N),M<0?M=0:M>1&&(M=1),h[tt++]=rt-(rt-U)*M|0,h[tt++]=G-(G-$)*M|0,h[tt++]=j-(j-et)*M|0,h[tt++]=255}}function BB(n,t,e){const i=t.coords,s=t.colors;let r,o;switch(t.type){case Kw.LATTICE:const l=t.verticesPerRow,c=Math.floor(i.length/l)-1,u=l-1;for(r=0;r<c;r++){let h=r*l;for(let d=0;d<u;d++,h++)Mv(n,e,i[h],i[h+1],i[h+l],s[h],s[h+1],s[h+l]),Mv(n,e,i[h+l+1],i[h+1],i[h+l],s[h+l+1],s[h+1],s[h+l])}break;case Kw.TRIANGLES:for(r=0,o=i.length;r<o;r+=3)Mv(n,e,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class jB extends Jx{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),p=u/d,v=h/f,b={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/v},S=d+2*2,m=f+2*2,y=i.getCanvas("mesh",S,m),w=y.context,C=w.createImageData(d,f);if(e){const k=C.data;for(let _=0,P=k.length;_<P;_+=4)k[_]=e[0],k[_+1]=e[1],k[_+2]=e[2],k[_+3]=255}for(const k of this._figures)BB(C,k,b);return w.putImageData(C,2,2),{canvas:y.canvas,offsetX:l-2*p,offsetY:c-2*v,scaleX:p,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,s){Cb(t,this._bbox);const r=new Float32Array(2);if(s===Qe.SHADING)K.singularValueDecompose2dScale(Jt(t),r);else if(this.matrix){K.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;K.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=l,r[1]*=c}else K.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,s===Qe.SHADING?null:this._background,e.cachedCanvases);return s!==Qe.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class VB extends Jx{getPattern(){return"hotpink"}}function zB(n){switch(n[0]){case"RadialAxial":return new OB(n);case"Mesh":return new jB(n);case"Dummy":return new VB}throw new Error(`Unknown IR type: ${n[0]}`)}const ZC={COLORED:1,UNCOLORED:2},e0=class e0{constructor(t,e,i,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(t,e){var U,$;const{bbox:i,operatorList:s,paintType:r,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),L0("TilingType: "+o);const d=i[0],f=i[1],p=i[2],v=i[3],b=p-d,S=v-f,m=new Float32Array(2);K.singularValueDecompose2dScale(this.matrix,m);const[y,w]=m;K.singularValueDecompose2dScale(this.baseTransform,m);const C=y*m[0],E=w*m[1];let k=b,_=S,P=!1,D=!1;const R=Math.ceil(u*C),I=Math.ceil(h*E),V=Math.ceil(b*C),Q=Math.ceil(S*E);R>=V?k=u:P=!0,I>=Q?_=h:D=!0;const q=this.getSizeAndScale(k,this.ctx.canvas.width,C),rt=this.getSizeAndScale(_,this.ctx.canvas.height,E),G=t.cachedCanvases.getCanvas("pattern",q.size,rt.size),j=G.context,N=c.createCanvasGraphics(j,e);if(N.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(N,r,l),j.translate(-q.scale*d,-rt.scale*f),N.transform(0,q.scale,0,0,rt.scale,0,0),j.save(),(U=N.dependencyTracker)==null||U.save(),this.clipBbox(N,d,f,p,v),N.baseTransform=Jt(N.ctx),N.executeOperatorList(s),N.endDrawing(),($=N.dependencyTracker)==null||$.restore(),j.restore(),P||D){const et=G.canvas;P&&(k=u),D&&(_=h);const nt=this.getSizeAndScale(k,this.ctx.canvas.width,C),M=this.getSizeAndScale(_,this.ctx.canvas.height,E),L=nt.size,F=M.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",L,F),Z=tt.context,Pt=P?Math.floor(b/u):0,ao=D?Math.floor(S/h):0;for(let bs=0;bs<=Pt;bs++)for(let pt=0;pt<=ao;pt++)Z.drawImage(et,L*bs,F*pt,L,F,0,0,L,F);return{canvas:tt.canvas,scaleX:nt.scale,scaleY:M.scale,offsetX:d,offsetY:f}}return{canvas:G.canvas,scaleX:q.scale,scaleY:rt.scale,offsetX:d,offsetY:f}}getSizeAndScale(t,e,i){const s=Math.max(e0.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=s?r=s:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,s,r){const o=s-e,l=r-i;t.ctx.rect(e,i,o,l),K.axialAlignedBoundingBox([e,i,s,r],Jt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,r=t.current;switch(e){case ZC.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;s.fillStyle=r.fillColor=o,s.strokeStyle=r.strokeColor=l;break;case ZC.UNCOLORED:s.fillStyle=s.strokeStyle=i,r.fillColor=r.strokeColor=i;break;default:throw new tB(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,s,r){let o=i;s!==Qe.SHADING&&(o=K.transform(o,e.baseTransform),this.matrix&&(o=K.transform(o,this.matrix)));const l=this.createPatternCanvas(e,r);let c=new DOMMatrix(o);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const u=t.createPattern(l.canvas,"repeat");return u.setTransform(c),u}};O(e0,"MAX_PATTERN_SIZE",3e3);let Eb=e0;function UB({src:n,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=en.isLittleEndian?4278190080:255,[c,u]=o?[r,l]:[l,r],h=i>>3,d=i&7,f=n.length;e=new Uint32Array(e.buffer);let p=0;for(let v=0;v<s;v++){for(const S=t+h;t<S;t++){const m=t<f?n[t]:255;e[p++]=m&128?u:c,e[p++]=m&64?u:c,e[p++]=m&32?u:c,e[p++]=m&16?u:c,e[p++]=m&8?u:c,e[p++]=m&4?u:c,e[p++]=m&2?u:c,e[p++]=m&1?u:c}if(d===0)continue;const b=t<f?n[t++]:255;for(let S=0;S<d;S++)e[p++]=b&1<<7-S?u:c}return{srcPos:t,destPos:p}}const JC=16,tE=100,HB=15,eE=10,jn=16,Dv=new DOMMatrix,fi=new Float32Array(2),Zc=new Float32Array([1/0,1/0,-1/0,-1/0]);function $B(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},n.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},n.transform=function(e,i,s,r,o,l){t.transform(e,i,s,r,o,l),this.__originalTransform(e,i,s,r,o,l)},n.setTransform=function(e,i,s,r,o,l){t.setTransform(e,i,s,r,o,l),this.__originalSetTransform(e,i,s,r,o,l)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,s,r,o,l){t.bezierCurveTo(e,i,s,r,o,l),this.__originalBezierCurveTo(e,i,s,r,o,l)},n.rect=function(e,i,s,r){t.rect(e,i,s,r),this.__originalRect(e,i,s,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class WB{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function ig(n,t,e,i,s,r,o,l,c,u){const[h,d,f,p,v,b]=Jt(n);if(d===0&&f===0){const y=o*h+v,w=Math.round(y),C=l*p+b,E=Math.round(C),k=(o+c)*h+v,_=Math.abs(Math.round(k)-w)||1,P=(l+u)*p+b,D=Math.abs(Math.round(P)-E)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),w,E),n.drawImage(t,e,i,s,r,0,0,_,D),n.setTransform(h,d,f,p,v,b),[_,D]}if(h===0&&p===0){const y=l*f+v,w=Math.round(y),C=o*d+b,E=Math.round(C),k=(l+u)*f+v,_=Math.abs(Math.round(k)-w)||1,P=(o+c)*d+b,D=Math.abs(Math.round(P)-E)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,w,E),n.drawImage(t,e,i,s,r,0,0,D,_),n.setTransform(h,d,f,p,v,b),[D,_]}n.drawImage(t,e,i,s,r,o,l,c,u);const S=Math.hypot(h,d),m=Math.hypot(f,p);return[S*c,m*u]}class nE{constructor(t,e,i){O(this,"alphaIsShape",!1);O(this,"fontSize",0);O(this,"fontSizeScale",1);O(this,"textMatrix",null);O(this,"textMatrixScale",1);O(this,"fontMatrix",Yw);O(this,"leading",0);O(this,"x",0);O(this,"y",0);O(this,"lineX",0);O(this,"lineY",0);O(this,"charSpacing",0);O(this,"wordSpacing",0);O(this,"textHScale",1);O(this,"textRenderingMode",He.FILL);O(this,"textRise",0);O(this,"fillColor","#000000");O(this,"strokeColor","#000000");O(this,"patternFill",!1);O(this,"patternStroke",!1);O(this,"fillAlpha",1);O(this,"strokeAlpha",1);O(this,"lineWidth",1);O(this,"activeSMask",null);O(this,"transferMaps","none");i==null||i(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Zc.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Qe.FILL,e=null){const i=this.minMax.slice();if(t===Qe.STROKE){e||jt("Stroke bounding box must include transform."),K.singularValueDecompose2dScale(e,fi);const s=fi[0]*this.lineWidth/2,r=fi[1]*this.lineWidth/2;i[0]-=s,i[1]-=r,i[2]+=s,i[3]+=r}return i}updateClipFromPath(){const t=K.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Zc,0)}getClippedPathBoundingBox(t=Qe.FILL,e=null){return K.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function iE(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%jn,r=(e-s)/jn,o=s===0?r:r+1,l=n.createImageData(i,jn);let c=0,u;const h=t.data,d=l.data;let f,p,v,b;if(t.kind===Cg.GRAYSCALE_1BPP){const S=h.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),y=m.length,w=i+7>>3,C=4294967295,E=en.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(v=f<r?jn:s,u=0,p=0;p<v;p++){const k=S-c;let _=0;const P=k>w?i:k*8-7,D=P&-8;let R=0,I=0;for(;_<D;_+=8)I=h[c++],m[u++]=I&128?C:E,m[u++]=I&64?C:E,m[u++]=I&32?C:E,m[u++]=I&16?C:E,m[u++]=I&8?C:E,m[u++]=I&4?C:E,m[u++]=I&2?C:E,m[u++]=I&1?C:E;for(;_<P;_++)R===0&&(I=h[c++],R=128),m[u++]=I&R?C:E,R>>=1}for(;u<y;)m[u++]=0;n.putImageData(l,0,f*jn)}}else if(t.kind===Cg.RGBA_32BPP){for(p=0,b=i*jn*4,f=0;f<r;f++)d.set(h.subarray(c,c+b)),c+=b,n.putImageData(l,0,p),p+=jn;f<o&&(b=i*s*4,d.set(h.subarray(c,c+b)),n.putImageData(l,0,p))}else if(t.kind===Cg.RGB_24BPP)for(v=jn,b=i*v,f=0;f<o;f++){for(f>=r&&(v=s,b=i*v),u=0,p=b;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(l,0,f*jn)}else throw new Error(`bad image kind: ${t.kind}`)}function sE(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%jn,r=(e-s)/jn,o=s===0?r:r+1,l=n.createImageData(i,jn);let c=0;const u=t.data,h=l.data;for(let d=0;d<o;d++){const f=d<r?jn:s;({srcPos:c}=UB({src:u,srcPos:c,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(l,0,d*jn)}}function ad(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function sg(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function rE(n,t){if(t)return!0;K.singularValueDecompose2dScale(n,fi);const e=Math.fround(tr.pixelRatio*Ea.PDF_TO_CSS_UNITS);return fi[0]<=e&&fi[1]<=e}const GB=["butt","round","square"],XB=["miter","round","bevel"],YB={},oE={};var ws,Tb,kb,_b;const aA=class aA{constructor(t,e,i,s,r,{optionalContentConfig:o,markedContentStack:l=null},c,u,h){x(this,ws);this.ctx=t,this.current=new nE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new WB(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(t,e,i=null){var s;return typeof e=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,i){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Jt(this.compositeCtx))}this.ctx.save(),sg(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Jt(this.ctx)}executeOperatorList(t,e,i,s,r){var m;const o=t.argsArray,l=t.fnArray;let c=e||0;const u=o.length;if(u===c)return c;const h=u-c>eE&&typeof i=="function",d=h?Date.now()+HB:0;let f=0;const p=this.commonObjs,v=this.objs;let b,S;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,i),c;if(!r||r(c))if(b=l[c],S=o[c]??null,b!==Af.dependency)S===null?this[b](c):this[b](c,...S);else for(const y of S){(m=this.dependencyTracker)==null||m.recordNamedData(y,c);const w=y.startsWith("g_")?p:v;if(!w.has(y))return w.get(y,i),c}if(c++,c===u)return c;if(h&&++f>eE){if(Date.now()>d)return i(),c;f=0}}}endDrawing(){A(this,ws,Tb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),A(this,ws,kb).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=i,c=s,u="prescale1",h,d;for(;r>2&&l>1||o>2&&c>1;){let f=l,p=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,l,c,0,0,f,p),t=h.canvas,l=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t,e){var R,I;const i=this.ctx,{width:s,height:r}=e,o=this.current.fillColor,l=this.current.patternFill,c=Jt(i);let u,h,d,f;if((e.bitmap||e.data)&&e.count>1){const V=e.bitmap||e.data.buffer;h=JSON.stringify(l?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(V),u||(u=new Map,this._cachedBitmapsMap.set(V,u));const Q=u.get(h);if(Q&&!l){const q=Math.round(Math.min(c[0],c[2])+c[4]),rt=Math.round(Math.min(c[1],c[3])+c[5]);return(R=this.dependencyTracker)==null||R.recordDependencies(t,Ei.transformAndFill),{canvas:Q,offsetX:q,offsetY:rt}}d=Q}d||(f=this.cachedCanvases.getCanvas("maskCanvas",s,r),sE(f.context,e));let p=K.transform(c,[1/s,0,0,-1/r,0,0]);p=K.transform(p,[1,0,0,1,0,-r]);const v=Zc.slice();K.axialAlignedBoundingBox([0,0,s,r],p,v);const[b,S,m,y]=v,w=Math.round(m-b)||1,C=Math.round(y-S)||1,E=this.cachedCanvases.getCanvas("fillCanvas",w,C),k=E.context,_=b,P=S;k.translate(-_,-P),k.transform(...p),d||(d=this._scaleImage(f.canvas,As(k)),d=d.img,u&&l&&u.set(h,d)),k.imageSmoothingEnabled=rE(Jt(k),e.interpolate),ig(k,d,0,0,d.width,d.height,0,0,s,r),k.globalCompositeOperation="source-in";const D=K.transform(As(k),[1,0,0,1,-_,-P]);return k.fillStyle=l?o.getPattern(i,this,D,Qe.FILL,t):o,k.fillRect(0,0,s,r),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,E.canvas)),(I=this.dependencyTracker)==null||I.recordDependencies(t,Ei.transformAndFill),{canvas:E.canvas,offsetX:Math.round(_),offsetY:Math.round(P)}}setLineWidth(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineCap",t),this.ctx.lineCap=GB[e]}setLineJoin(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineJoin",t),this.ctx.lineJoin=XB[e]}setMiterLimit(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var i,s,r,o,l;for(const[c,u]of e)switch(c){case"LW":this.setLineWidth(t,u);break;case"LC":this.setLineCap(t,u);break;case"LJ":this.setLineJoin(t,u);break;case"ML":this.setMiterLimit(t,u);break;case"D":this.setDash(t,u[0],u[1]);break;case"RI":this.setRenderingIntent(t,u);break;case"FL":this.setFlatness(t,u);break;case"Font":this.setFont(t,u[0],u[1]);break;case"CA":(i=this.dependencyTracker)==null||i.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=u;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",t),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,i);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),ad(this.suspendedCtx,o),$B(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ad(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const r=s[0],o=s[1],l=s[2]-r,c=s[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,i,l,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,r,o,l,c,u,h,d){let f=t.canvas,p=c-h,v=u-d;if(o)if(p<0||v<0||p+i>f.width||v+s>f.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,s),m=S.context;m.drawImage(f,-p,-v),m.globalCompositeOperation="destination-atop",m.fillStyle=o,m.fillRect(0,0,i,s),m.globalCompositeOperation="source-over",f=S.canvas,p=v=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(p,v,i,s),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(p,v,i,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const b=new Path2D;b.rect(c,u,i,s),e.clip(b),e.globalCompositeOperation="destination-in",e.drawImage(f,p,v,i,s,c,u,i,s),e.restore()}save(t){var i;this.inSMaskMode&&ad(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(i=this.dependencyTracker)==null||i.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&ad(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,s,r,o,l){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",t),this.ctx.transform(e,i,s,r,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,s){let[r]=i;if(!s){r||(r=i[0]=new Path2D),this[e](t,r);return}if(this.dependencyTracker!==null){const o=e===Af.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(t,["transform"])}r instanceof Path2D||(r=i[0]=fP(r)),K.axialAlignedBoundingBox(s,Jt(this.ctx),this.current.minMax),this[e](t,r),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){var o;const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const l=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,As(s),Qe.STROKE,t),l){const c=new Path2D;c.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=c}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);(o=this.dependencyTracker)==null||o.recordDependencies(t,Ei.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Qe.STROKE,Jt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){var u,h,d;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const f=r.isModifyingCurrentTransform()?s.getTransform():null;if((u=this.dependencyTracker)==null||u.save(t),s.save(),s.fillStyle=r.getPattern(s,this,As(s),Qe.FILL,t),f){const p=new Path2D;p.addPath(e,s.getTransform().invertSelf().multiplySelf(f)),e=p}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),(h=this.dependencyTracker)==null||h.recordDependencies(t,Ei.fill),l&&(s.restore(),(d=this.dependencyTracker)==null||d.restore(t)),i&&this.consumePath(t,e,c)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var i;this.ctx.fill(e),(i=this.dependencyTracker)==null||i.recordDependencies(t,Ei.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=YB}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=oE}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,r=i.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:u,path:h}of e)h&&s.addPath(h,new DOMMatrix(o).preMultiplySelf(r).translate(l,c).scale(u,-u));i.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){var d,f;(d=this.dependencyTracker)==null||d.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||Yw,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&at("Invalid font matrix for font "+e),i<0?(i=-i,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=i,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=((f=s.systemFontInfo)==null?void 0:f.css)||`"${o}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const u=s.italic?"italic":"normal";let h=i;i<JC?h=JC:i>tE&&(h=tE),this.current.fontSizeScale=i/h,this.ctx.font=`${u} ${c} ${h}px ${l}`}setTextRenderingMode(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,i,s,r,o){var m,y,w,C;const l=this.ctx,c=this.current,u=c.font,h=c.textRenderingMode,d=c.fontSize/c.fontSizeScale,f=h&He.FILL_STROKE_MASK,p=!!(h&He.ADD_TO_PATH_FLAG),v=c.patternFill&&!u.missingFile,b=c.patternStroke&&!u.missingFile;let S;if((u.disableFontFace||p||v||b)&&!u.missingFile&&(S=u.getPathGenerator(this.commonObjs,e)),S&&(u.disableFontFace||v||b)){l.save(),l.translate(i,s),l.scale(d,-d),(m=this.dependencyTracker)==null||m.recordCharacterBBox(t,l,u);let E;if(f===He.FILL||f===He.FILL_STROKE)if(r){E=l.getTransform(),l.setTransform(...r);const k=A(this,ws,_b).call(this,S,E,r);l.fill(k)}else l.fill(S);if(f===He.STROKE||f===He.FILL_STROKE)if(o){E||(E=l.getTransform()),l.setTransform(...o);const{a:k,b:_,c:P,d:D}=E,R=K.inverseTransform(o),I=K.transform([k,_,P,D,0,0],R);K.singularValueDecompose2dScale(I,fi),l.lineWidth*=Math.max(fi[0],fi[1])/d,l.stroke(A(this,ws,_b).call(this,S,E,o))}else l.lineWidth/=d,l.stroke(S);l.restore()}else(f===He.FILL||f===He.FILL_STROKE)&&(l.fillText(e,i,s),(y=this.dependencyTracker)==null||y.recordCharacterBBox(t,l,u,d,i,s,()=>l.measureText(e))),(f===He.STROKE||f===He.FILL_STROKE)&&(this.dependencyTracker&&((w=this.dependencyTracker)==null||w.recordCharacterBBox(t,l,u,d,i,s,()=>l.measureText(e)).recordDependencies(t,Ei.stroke)),l.strokeText(e,i,s));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Jt(l),x:i,y:s,fontSize:d,path:S}),(C=this.dependencyTracker)==null||C.recordCharacterBBox(t,l,u,d,i,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return ht(this,"isFontSubpixelAAEnabled",i)}showText(t,e){var P,D,R,I;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Ei.showText).resetBBox(t),this.current.textRenderingMode&He.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,s=i.font;if(s.isType3Font){this.showType3Text(t,e),(P=this.dependencyTracker)==null||P.recordShowTextOperation(t);return}const r=i.fontSize;if(r===0){(D=this.dependencyTracker)==null||D.recordOperation(t);return}const o=this.ctx,l=i.fontSizeScale,c=i.charSpacing,u=i.wordSpacing,h=i.fontDirection,d=i.textHScale*h,f=e.length,p=s.vertical,v=p?1:-1,b=s.defaultVMetrics,S=r*i.fontMatrix[0],m=i.textRenderingMode===He.FILL&&!s.disableFontFace&&!i.patternFill;o.save(),i.textMatrix&&o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),h>0?o.scale(d,-1):o.scale(d,1);let y,w;if(i.patternFill){o.save();const V=i.fillColor.getPattern(o,this,As(o),Qe.FILL,t);y=Jt(o),o.restore(),o.fillStyle=V}if(i.patternStroke){o.save();const V=i.strokeColor.getPattern(o,this,As(o),Qe.STROKE,t);w=Jt(o),o.restore(),o.strokeStyle=V}let C=i.lineWidth;const E=i.textMatrixScale;if(E===0||C===0){const V=i.textRenderingMode&He.FILL_STROKE_MASK;(V===He.STROKE||V===He.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=E;if(l!==1&&(o.scale(l,l),C/=l),o.lineWidth=C,s.isInvalidPDFjsFont){const V=[];let Q=0;for(const rt of e)V.push(rt.unicode),Q+=rt.width;const q=V.join("");if(o.fillText(q,0,0),this.dependencyTracker!==null){const rt=o.measureText(q);this.dependencyTracker.recordBBox(t,this.ctx,-rt.actualBoundingBoxLeft,rt.actualBoundingBoxRight,-rt.actualBoundingBoxAscent,rt.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=Q*S*d,o.restore(),this.compose();return}let k=0,_;for(_=0;_<f;++_){const V=e[_];if(typeof V=="number"){k+=v*V*r/1e3;continue}let Q=!1;const q=(V.isSpace?u:0)+c,rt=V.fontChar,G=V.accent;let j,N,U=V.width;if(p){const nt=V.vmetric||b,M=-(V.vmetric?nt[1]:U*.5)*S,L=nt[2]*S;U=nt?-nt[0]:U,j=M/l,N=(k+L)/l}else j=k/l,N=0;let $;if(s.remeasure&&U>0){$=o.measureText(rt);const nt=$.width*1e3/r*l;if(U<nt&&this.isFontSubpixelAAEnabled){const M=U/nt;Q=!0,o.save(),o.scale(M,1),j/=M}else U!==nt&&(j+=(U-nt)/2e3*r/l)}if(this.contentVisible&&(V.isInFont||s.missingFile)){if(m&&!G)o.fillText(rt,j,N),(R=this.dependencyTracker)==null||R.recordCharacterBBox(t,o,$?{bbox:null}:s,r/l,j,N,()=>$??o.measureText(rt));else if(this.paintChar(t,rt,j,N,y,w),G){const nt=j+r*G.offset.x/l,M=N-r*G.offset.y/l;this.paintChar(t,G.fontChar,nt,M,y,w)}}const et=p?U*S-q*h:U*S+q*h;k+=et,Q&&o.restore()}p?i.y-=k:i.x+=k*d,o.restore(),this.compose(),(I=this.dependencyTracker)==null||I.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,s=this.current,r=s.font,o=s.fontSize,l=s.fontDirection,c=r.vertical?1:-1,u=s.charSpacing,h=s.wordSpacing,d=s.textHScale*l,f=s.fontMatrix||Yw,p=e.length,v=s.textRenderingMode===He.INVISIBLE;let b,S,m,y;if(v||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),s.textMatrix&&i.transform(...s.textMatrix),i.translate(s.x,s.y+s.textRise),i.scale(d,l);const w=this.dependencyTracker;for(this.dependencyTracker=w?new Vy(w,t):null,b=0;b<p;++b){if(S=e[b],typeof S=="number"){y=c*S*o/1e3,this.ctx.translate(y,0),s.x+=y*d;continue}const C=(S.isSpace?h:0)+u,E=r.charProcOperatorList[S.operatorListId];E?this.contentVisible&&(this.save(),i.scale(o,o),i.transform(...f),this.executeOperatorList(E),this.restore()):at(`Type3 character "${S.operatorListId}" is not available.`);const k=[S.width,0];K.applyTransform(k,f),m=k[0]*o+C,i.translate(m,0),s.x+=m*d}i.restore(),w&&(this.dependencyTracker=w)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,s,r,o,l){var u;const c=new Path2D;c.rect(s,r,o-s,l-r),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(t,this.ctx,s,o,r,l).recordClipBox(t,this.ctx,s,o,r,l),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const s=this.baseTransform||Jt(this.ctx),r={createCanvasGraphics:(o,l)=>new aA(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Vy(this.dependencyTracker,l,!0):null)};i=new Eb(e,this.ctx,r,s)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=zB(this.getObject(t,e)),this.cachedPatterns.set(e,s)),i&&(s.matrix=i),s}shadingFill(t,e){var o;if(!this.contentVisible)return;const i=this.ctx;this.save(t);const s=this._getPattern(t,e);i.fillStyle=s.getPattern(i,this,As(i),Qe.SHADING,t);const r=As(i);if(r){const{width:l,height:c}=i.canvas,u=Zc.slice();K.axialAlignedBoundingBox([0,0,l,c],r,u);const[h,d,f,p]=u;this.ctx.fillRect(h,d,f-h,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Ei.transform).recordDependencies(t,Ei.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){jt("Should not call beginInlineImage")}beginImageData(){jt("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){var s;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Jt(this.ctx),i)){K.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[r,o,l,c]=i,u=new Path2D;u.rect(r,o,l-r,c-o),this.ctx.clip(u),(s=this.dependencyTracker)==null||s.recordClipBox(t,this.ctx,r,l,o,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var w;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||L0("TODO: Support non-isolated groups."),e.knockout&&at("Knockout groups not supported.");const s=Jt(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Zc.slice();K.axialAlignedBoundingBox(e.bbox,Jt(i),r);const o=[0,0,i.canvas.width,i.canvas.height];r=K.intersect(r,o)||[0,0,0,0];const l=Math.floor(r[0]),c=Math.floor(r[1]),u=Math.max(Math.ceil(r[2])-l,1),h=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,h]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,u,h),p=f.context;p.translate(-l,-c),p.transform(...s);let v=new Path2D;const[b,S,m,y]=e.bbox;if(v.rect(b,S,m-b,y-S),e.matrix){const C=new Path2D;C.addPath(v,new DOMMatrix(e.matrix)),v=C}p.clip(v),e.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:l,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(l,c),i.save()),ad(i,p),this.ctx=p,(w=this.dependencyTracker)==null||w.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){var r;if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Jt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=Zc.slice();K.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],o,l),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,i,s,r,o){if(A(this,ws,Tb).call(this),sg(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const l=i[2]-i[0],c=i[3]-i[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=i[0],s[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=l,i[3]=c,K.singularValueDecompose2dScale(Jt(this.ctx),fi);const{viewportScale:u}=this,h=Math.ceil(l*this.outputScaleX*u),d=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(fi[0],0,0,-fi[1],0,c*fi[1]),sg(this.ctx)}else{sg(this.ctx),this.endPath(t);const u=new Path2D;u.rect(i[0],i[1],l,c),this.ctx.clip(u)}}this.current=new nE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...r)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),A(this,ws,kb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var l;if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const s=this.ctx,r=this._createMaskCanvas(t,e),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(t).recordBBox(t,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,s=0,r=0,o,l){var d,f,p;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const c=this.ctx;c.save();const u=Jt(c);c.transform(i,s,r,o,0,0);const h=this._createMaskCanvas(t,e);c.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),(d=this.dependencyTracker)==null||d.resetBBox(t);for(let v=0,b=l.length;v<b;v+=2){const S=K.transform(u,[i,s,r,o,l[v],l[v+1]]);c.drawImage(h.canvas,S[4],S[5]),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,S[4],S[4]+h.canvas.width,S[5],S[5]+h.canvas.height)}c.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var o,l,c;if(!this.contentVisible)return;const i=this.ctx,s=this.current.fillColor,r=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(t).recordDependencies(t,Ei.transformAndFill);for(const u of e){const{data:h,width:d,height:f,transform:p}=u,v=this.cachedCanvases.getCanvas("maskCanvas",d,f),b=v.context;b.save();const S=this.getObject(t,h,u);sE(b,S),b.globalCompositeOperation="source-in",b.fillStyle=r?s.getPattern(b,this,As(i),Qe.FILL,t):s,b.fillRect(0,0,d,f),b.restore(),i.save(),i.transform(...p),i.scale(1,-1),ig(i,v.canvas,0,0,d,f,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(t,i,0,d,0,f),i.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){at("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,s,r){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){at("Dependent image isn't ready yet");return}const l=o.width,c=o.height,u=[];for(let h=0,d=r.length;h<d;h+=2)u.push({transform:[i,0,0,s,r[h],r[h+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(t,o,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t,e){var u;if(!this.contentVisible)return;const i=e.width,s=e.height,r=this.ctx;this.save(t);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/i,-1/s);let l;if(e.bitmap)l=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)l=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",i,s).context;iE(d,e),l=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(l,As(r));r.imageSmoothingEnabled=rE(Jt(r),e.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(t).recordBBox(t,r,0,i,-s,0).recordDependencies(t,Ei.imageXObject).recordOperation(t),ig(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,i,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){var o,l,c;if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const u=e.width,h=e.height,f=this.cachedCanvases.getCanvas("inlineImage",u,h).context;iE(f,e),r=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(t);for(const u of i)s.save(),s.transform(...u.transform),s.scale(1,-1),ig(s,r,u.x,u.y,u.w,u.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(t,s,0,1,-1,0),s.restore();(c=this.dependencyTracker)==null||c.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Ei.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){var o,l;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const r=this.ctx;this.pendingClip?(s||(this.pendingClip===oE?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(l=this.dependencyTracker)==null||l.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Jt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:r}=this.ctx.getTransform();let o,l;if(i===0&&s===0){const c=Math.abs(e),u=Math.abs(r);if(c===u)if(t===0)o=l=1/c;else{const h=c*t;o=l=h<1?1/h:1}else if(t===0)o=1/c,l=1/u;else{const h=c*t,d=u*t;o=h<1?1/h:1,l=d<1?1/d:1}}else{const c=Math.abs(e*r-i*s),u=Math.hypot(e,i),h=Math.hypot(s,r);if(t===0)o=h/c,l=u/c;else{const d=t*c;o=h>d?h/d:1,l=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:s}}=this,[r,o]=this.getScaleForStroking();if(r===o){i.lineWidth=(s||1)*r,i.stroke(t);return}const l=i.getLineDash();e&&i.save(),i.scale(r,o),Dv.a=1/r,Dv.d=1/o;const c=new Path2D;if(c.addPath(t,Dv),l.length>0){const u=Math.max(r,o);i.setLineDash(l.map(h=>h/u)),i.lineDashOffset/=u}i.lineWidth=s||1,i.stroke(c),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ws=new WeakSet,Tb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},kb=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},_b=function(t,e,i){const s=new Path2D;return s.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),s};let uu=aA;for(const n in Af)uu.prototype[n]!==void 0&&(uu.prototype[Af[n]]=uu.prototype[n]);var fp,pp;class Ks{static get workerPort(){return a(this,fp)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");g(this,fp,t)}static get workerSrc(){return a(this,pp)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");g(this,pp,t)}}fp=new WeakMap,pp=new WeakMap,x(Ks,fp,null),x(Ks,pp,"");var Gu,mp;class KB{constructor({parsedData:t,rawData:e}){x(this,Gu);x(this,mp);g(this,Gu,t),g(this,mp,e)}getRaw(){return a(this,mp)}get(t){return a(this,Gu).get(t)??null}[Symbol.iterator](){return a(this,Gu).entries()}}Gu=new WeakMap,mp=new WeakMap;const Dc=Symbol("INTERNAL");var gp,yp,vp,Xu;class qB{constructor(t,{name:e,intent:i,usage:s,rbGroups:r}){x(this,gp,!1);x(this,yp,!1);x(this,vp,!1);x(this,Xu,!0);g(this,gp,!!(t&hi.DISPLAY)),g(this,yp,!!(t&hi.PRINT)),this.name=e,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(a(this,vp))return a(this,Xu);if(!a(this,Xu))return!1;const{print:t,view:e}=this.usage;return a(this,gp)?(e==null?void 0:e.viewState)!=="OFF":a(this,yp)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==Dc&&jt("Internal method `_setVisible` called."),g(this,vp,i),g(this,Xu,e)}}gp=new WeakMap,yp=new WeakMap,vp=new WeakMap,Xu=new WeakMap;var jo,Nt,Yu,Ku,wp,Pb;class QB{constructor(t,e=hi.DISPLAY){x(this,wp);x(this,jo,null);x(this,Nt,new Map);x(this,Yu,null);x(this,Ku,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,g(this,Ku,t.order);for(const i of t.groups)a(this,Nt).set(i.id,new qB(e,i));if(t.baseState==="OFF")for(const i of a(this,Nt).values())i._setVisible(Dc,!1);for(const i of t.on)a(this,Nt).get(i)._setVisible(Dc,!0);for(const i of t.off)a(this,Nt).get(i)._setVisible(Dc,!1);g(this,Yu,this.getHash())}}isVisible(t){if(a(this,Nt).size===0)return!0;if(!t)return L0("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,Nt).has(t.id)?a(this,Nt).get(t.id).visible:(at(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return A(this,wp,Pb).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,Nt).has(e))return at(`Optional content group not found: ${e}`),!0;if(a(this,Nt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,Nt).has(e))return at(`Optional content group not found: ${e}`),!0;if(!a(this,Nt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,Nt).has(e))return at(`Optional content group not found: ${e}`),!0;if(!a(this,Nt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,Nt).has(e))return at(`Optional content group not found: ${e}`),!0;if(a(this,Nt).get(e).visible)return!1}return!0}return at(`Unknown optional content policy ${t.policy}.`),!0}return at(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var r;const s=a(this,Nt).get(t);if(!s){at(`Optional content group not found: ${t}`);return}if(i&&e&&s.rbGroups.length)for(const o of s.rbGroups)for(const l of o)l!==t&&((r=a(this,Nt).get(l))==null||r._setVisible(Dc,!1,!0));s._setVisible(Dc,!!e,!0),g(this,jo,null)}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=a(this,Nt).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}g(this,jo,null)}get hasInitialVisibility(){return a(this,Yu)===null||this.getHash()===a(this,Yu)}getOrder(){return a(this,Nt).size?a(this,Ku)?a(this,Ku).slice():[...a(this,Nt).keys()]:null}getGroup(t){return a(this,Nt).get(t)||null}getHash(){if(a(this,jo)!==null)return a(this,jo);const t=new WP;for(const[e,i]of a(this,Nt))t.update(`${e}:${i.visible}`);return g(this,jo,t.hexdigest())}[Symbol.iterator](){return a(this,Nt).entries()}}jo=new WeakMap,Nt=new WeakMap,Yu=new WeakMap,Ku=new WeakMap,wp=new WeakSet,Pb=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const r=t[s];let o;if(Array.isArray(r))o=A(this,wp,Pb).call(this,r);else if(a(this,Nt).has(r))o=a(this,Nt).get(r).visible;else return at(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class ZB{constructor(t,{disableRange:e=!1,disableStream:i=!1}){wt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),t.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(i),!0)});wt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,s,r;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){wt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new JB(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new tj(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class JB{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=qx(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class tj{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ej(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let h=l(e);return h=unescape(h),h=c(h),h=u(h),r(h)}if(e=o(n),e){const h=u(e);return r(h)}if(e=i("filename","i").exec(n),e){e=e[1];let h=l(e);return h=u(h),r(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Cm(d);d=f.decode(p),t=!1}catch{}}return d}function r(h){return t&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),t&&(h=s("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,b,S,m]=f;if(b=parseInt(b,10),b in d){if(b===0)break;continue}d[b]=[S,m]}const v=[];for(let b=0;b<d.length&&b in d;++b){let[S,m]=d[b];m=l(m),S&&(m=unescape(m),b===0&&(m=c(m))),v.push(m)}return v.join("")}function l(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),v=h.slice(d+1).replace(/^[^']*'/,"");return s(f,v)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,v){if(p==="q"||p==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,S){return String.fromCharCode(parseInt(S,16))}),s(f,v);try{v=atob(v)}catch{}return s(f,v)})}return""}function i2(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const i in t){const s=t[i];s!==void 0&&e.append(i,s)}return e}function I0(n){var t;return((t=URL.parse(n))==null?void 0:t.origin)??null}function s2({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function r2(n){const t=n.get("Content-Disposition");if(t){let e=ej(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(qx(e))return e}return null}function Pm(n,t){return new Ny(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function o2(n){return n===200||n===206}function a2(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function l2(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(at(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class nj{constructor(t){O(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=i2(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return wt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ij(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new sj(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class ij{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),s=e.url;fetch(s,a2(i,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=I0(r.url),!o2(r.status))throw Pm(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=s2({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=r2(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ca("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:l2(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class sj{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${i-1}`);const o=s.url;fetch(o,a2(r,this._withCredentials,this._abortController)).then(l=>{const c=I0(l.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!o2(l.status))throw Pm(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:l2(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Rv=200,Lv=206;function rj(n){const t=n.response;return typeof t!="string"?t:Cm(t).buffer}class oj{constructor({url:t,httpHeaders:e,withCredentials:i}){O(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=i2(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=Lv):s.expectedStatus=Rv,e.responseType="arraybuffer",wt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var s;const i=this.pendingRequests[t];i&&((s=i.onProgress)==null||s.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){i.onError(s.status);return}const r=s.status||Rv;if(!(r===Rv&&i.expectedStatus===Lv)&&r!==i.expectedStatus){i.onError(s.status);return}const l=rj(s);if(r===Lv){const c=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?i.onDone({begin:parseInt(u[1],10),chunk:l}):(at('Missing or invalid "Content-Range" header.'),i.onError(0))}else l?i.onDone({begin:0,chunk:l}):i.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class aj{constructor(t){this._source=t,this._manager=new oj(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return wt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new lj(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new cj(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class lj{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=I0(e.responseURL);const i=e.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=s2({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=r2(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Pm(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class cj{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=I0((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Pm(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const uj=/^[a-z][a-z0-9\-+.]+:/i;function hj(n){if(uj.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class dj{constructor(t){this.source=t,this.url=hj(t.url),wt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return wt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new fj(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new pj(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class fj{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Pm(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ca("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class pj{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ld=Symbol("INITIAL_DATA");var Qn,bp,Mb;class c2{constructor(){x(this,bp);x(this,Qn,Object.create(null))}get(t,e=null){if(e){const s=A(this,bp,Mb).call(this,t);return s.promise.then(()=>e(s.data)),null}const i=a(this,Qn)[t];if(!i||i.data===ld)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=a(this,Qn)[t];return!!e&&e.data!==ld}delete(t){const e=a(this,Qn)[t];return!e||e.data===ld?!1:(delete a(this,Qn)[t],!0)}resolve(t,e=null){const i=A(this,bp,Mb).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in a(this,Qn)){const{data:i}=a(this,Qn)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}g(this,Qn,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,Qn)){const{data:e}=a(this,Qn)[t];e!==ld&&(yield[t,e])}}}Qn=new WeakMap,bp=new WeakSet,Mb=function(t){var e;return(e=a(this,Qn))[t]||(e[t]={...Promise.withResolvers(),data:ld})};const mj=1e5,aE=30;var uE,Vo,Fn,xp,Ap,Sl,_r,Sp,Cp,Cl,qu,Qu,zo,Zu,Ep,Ju,El,Tp,kp,th,Tl,_p,Uo,eh,ro,u2,h2,Db,yi,Ig,Rb,d2,f2;const Ee=class Ee{constructor({textContentSource:t,container:e,viewport:i}){x(this,ro);x(this,Vo,Promise.withResolvers());x(this,Fn,null);x(this,xp,!1);x(this,Ap,!!((uE=globalThis.FontInspector)!=null&&uE.enabled));x(this,Sl,null);x(this,_r,null);x(this,Sp,0);x(this,Cp,0);x(this,Cl,null);x(this,qu,null);x(this,Qu,0);x(this,zo,0);x(this,Zu,Object.create(null));x(this,Ep,[]);x(this,Ju,null);x(this,El,[]);x(this,Tp,new WeakMap);x(this,kp,null);var c;if(t instanceof ReadableStream)g(this,Ju,t);else if(typeof t=="object")g(this,Ju,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');g(this,Fn,g(this,qu,e)),g(this,zo,i.scale*tr.pixelRatio),g(this,Qu,i.rotation),g(this,_r,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:l}=i.rawDims;g(this,kp,[1,0,0,-1,-o,l+r]),g(this,Cp,s),g(this,Sp,r),A(c=Ee,yi,d2).call(c),gc(e,i),a(this,Vo).promise.finally(()=>{a(Ee,eh).delete(this),g(this,_r,null),g(this,Zu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=en.platform;return ht(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,Cl).read().then(({value:e,done:i})=>{if(i){a(this,Vo).resolve();return}a(this,Sl)??g(this,Sl,e.lang),Object.assign(a(this,Zu),e.styles),A(this,ro,u2).call(this,e.items),t()},a(this,Vo).reject)};return g(this,Cl,a(this,Ju).getReader()),a(Ee,eh).add(this),t(),a(this,Vo).promise}update({viewport:t,onBefore:e=null}){var r;const i=t.scale*tr.pixelRatio,s=t.rotation;if(s!==a(this,Qu)&&(e==null||e(),g(this,Qu,s),gc(a(this,qu),{rotation:s})),i!==a(this,zo)){e==null||e(),g(this,zo,i);const o={div:null,properties:null,ctx:A(r=Ee,yi,Ig).call(r,a(this,Sl))};for(const l of a(this,El))o.properties=a(this,Tp).get(l),o.div=l,A(this,ro,Db).call(this,o)}}cancel(){var e;const t=new Ca("TextLayer task cancelled.");(e=a(this,Cl))==null||e.cancel(t).catch(()=>{}),g(this,Cl,null),a(this,Vo).reject(t)}get textDivs(){return a(this,El)}get textContentItemsStr(){return a(this,Ep)}static cleanup(){if(!(a(this,eh).size>0)){a(this,th).clear();for(const{canvas:t}of a(this,Tl).values())t.remove();a(this,Tl).clear()}}};Vo=new WeakMap,Fn=new WeakMap,xp=new WeakMap,Ap=new WeakMap,Sl=new WeakMap,_r=new WeakMap,Sp=new WeakMap,Cp=new WeakMap,Cl=new WeakMap,qu=new WeakMap,Qu=new WeakMap,zo=new WeakMap,Zu=new WeakMap,Ep=new WeakMap,Ju=new WeakMap,El=new WeakMap,Tp=new WeakMap,kp=new WeakMap,th=new WeakMap,Tl=new WeakMap,_p=new WeakMap,Uo=new WeakMap,eh=new WeakMap,ro=new WeakSet,u2=function(t){var s,r;if(a(this,xp))return;(r=a(this,_r)).ctx??(r.ctx=A(s=Ee,yi,Ig).call(s,a(this,Sl)));const e=a(this,El),i=a(this,Ep);for(const o of t){if(e.length>mj){at("Ignoring additional textDivs for performance reasons."),g(this,xp,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,Fn);g(this,Fn,document.createElement("span")),a(this,Fn).classList.add("markedContent"),o.id&&a(this,Fn).setAttribute("id",`${o.id}`),l.append(a(this,Fn))}else o.type==="endMarkedContent"&&g(this,Fn,a(this,Fn).parentNode);continue}i.push(o.str),A(this,ro,h2).call(this,o)}},h2=function(t){var b;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,El).push(e);const s=K.transform(a(this,kp),t.transform);let r=Math.atan2(s[1],s[0]);const o=a(this,Zu)[t.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,Ap)&&o.fontSubstitution||o.fontFamily;l=Ee.fontFamilyMap.get(l)||l;const c=Math.hypot(s[2],s[3]),u=c*A(b=Ee,yi,f2).call(b,l,o,a(this,Sl));let h,d;r===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(r),d=s[5]-u*Math.cos(r));const f="calc(var(--total-scale-factor) *",p=e.style;a(this,Fn)===a(this,qu)?(p.left=`${(100*h/a(this,Cp)).toFixed(2)}%`,p.top=`${(100*d/a(this,Sp)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(a(Ee,Uo)*c).toFixed(2)}px)`,p.fontFamily=l,i.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,Ap)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(i.angle=r*(180/Math.PI));let v=!1;if(t.str.length>1)v=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),m=Math.abs(t.transform[3]);S!==m&&Math.max(S,m)/Math.min(S,m)>1.5&&(v=!0)}if(v&&(i.canvasWidth=o.vertical?t.height:t.width),a(this,Tp).set(e,i),a(this,_r).div=e,a(this,_r).properties=i,A(this,ro,Db).call(this,a(this,_r)),i.hasText&&a(this,Fn).append(e),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),a(this,Fn).append(S)}},Db=function(t){var l;const{div:e,properties:i,ctx:s}=t,{style:r}=e;let o="";if(a(Ee,Uo)>1&&(o=`scale(${1/a(Ee,Uo)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=i;A(l=Ee,yi,Rb).call(l,s,h*a(this,zo),c);const{width:d}=s.measureText(e.textContent);d>0&&(o=`scaleX(${u*a(this,zo)/d}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(r.transform=o)},yi=new WeakSet,Ig=function(t=null){let e=a(this,Tl).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,Tl).set(t,e),a(this,_p).set(e,{size:0,family:""})}return e},Rb=function(t,e,i){const s=a(this,_p).get(t);e===s.size&&i===s.family||(t.font=`${e}px ${i}`,s.size=e,s.family=i)},d2=function(){if(a(this,Uo)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),g(this,Uo,t.getBoundingClientRect().height),t.remove()},f2=function(t,e,i){const s=a(this,th).get(t);if(s)return s;const r=A(this,yi,Ig).call(this,i);r.canvas.width=r.canvas.height=aE,A(this,yi,Rb).call(this,r,aE,t);const o=r.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let u=.8;return l?u=l/(l+c):(en.platform.isFirefox&&at("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),a(this,th).set(t,u),u},x(Ee,yi),x(Ee,th,new Map),x(Ee,Tl,new Map),x(Ee,_p,new WeakMap),x(Ee,Uo,null),x(Ee,eh,new Set);let Cf=Ee;const gj=100;function p2(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new Lb,{docId:e}=t,i=n.url?SB(n.url):null,s=n.data?CB(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,c=n.range instanceof m2?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof Ef?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!N0(n.docBaseUrl)?n.docBaseUrl:null,p=Jm(n.cMapUrl),v=n.cMapPacked!==!1,b=n.CMapReaderFactory||(xn?RB:XC),S=Jm(n.iccUrl),m=Jm(n.standardFontDataUrl),y=n.StandardFontDataFactory||(xn?LB:YC),w=Jm(n.wasmUrl),C=n.WasmFactory||(xn?NB:KC),E=n.stopAtErrors!==!0,k=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,_=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!xn,D=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!xn&&(en.platform.isFirefox||!globalThis.chrome),R=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,I=typeof n.disableFontFace=="boolean"?n.disableFontFace:xn,V=n.fontExtraProperties===!0,Q=n.enableXfa===!0,q=n.ownerDocument||globalThis.document,rt=n.disableRange===!0,G=n.disableStream===!0,j=n.disableAutoFetch===!0,N=n.pdfBug===!0,U=n.CanvasFactory||(xn?DB:_B),$=n.FilterFactory||(xn?MB:PB),et=n.enableHWA===!0,nt=n.useWasm!==!1,M=c?c.length:n.length??NaN,L=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!xn&&!I,F=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(b===XC&&y===YC&&C===KC&&p&&m&&w&&gd(p,document.baseURI)&&gd(m,document.baseURI)&&gd(w,document.baseURI)),tt=null;QO(d);const Z={canvasFactory:new U({ownerDocument:q,enableHWA:et}),filterFactory:new $({docId:e,ownerDocument:q}),cMapReaderFactory:F?null:new b({baseUrl:p,isCompressed:v}),standardFontDataFactory:F?null:new y({baseUrl:m}),wasmFactory:F?null:new C({baseUrl:w})};h||(h=Ef.create({verbosity:d,port:Ks.workerPort}),t._worker=h);const Pt={docId:e,apiVersion:"5.4.394",data:s,password:l,disableAutoFetch:j,rangeChunkSize:u,length:M,docBaseUrl:f,enableXfa:Q,evaluatorOptions:{maxImageSize:k,disableFontFace:I,ignoreErrors:E,isEvalSupported:_,isOffscreenCanvasSupported:P,isImageDecoderSupported:D,canvasMaxAreaInBytes:R,fontExtraProperties:V,useSystemFonts:L,useWasm:nt,useWorkerFetch:F,cMapUrl:p,iccUrl:S,standardFontDataUrl:m,wasmUrl:w}},ao={ownerDocument:q,pdfBug:N,styleElement:tt,loadingParams:{disableAutoFetch:j,enableXfa:Q}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const bs=h.messageHandler.sendWithPromise("GetDocRequest",Pt,s?[s.buffer]:null);let pt;if(c)pt=new ZB(c,{disableRange:rt,disableStream:G});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");const ot=gd(i)?nj:xn?dj:aj;pt=new ot({url:i,length:M,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:rt,disableStream:G})}return bs.then(ot=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ye=new Cd(e,ot,h.port),St=new wj(ye,t,pt,ao,Z,et);t._transport=St,ye.send("Ready",null)})}).catch(t._capability.reject),t}var n0;const i0=class i0{constructor(){O(this,"_capability",Promise.withResolvers());O(this,"_transport",null);O(this,"_worker",null);O(this,"docId",`d${Ce(i0,n0)._++}`);O(this,"destroyed",!1);O(this,"onPassword",null);O(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,i,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};n0=new WeakMap,x(i0,n0,0);let Lb=i0;var kl,Pp,Mp,Dp,Rp;class m2{constructor(t,e,i=!1,s=null){x(this,kl,Promise.withResolvers());x(this,Pp,[]);x(this,Mp,[]);x(this,Dp,[]);x(this,Rp,[]);this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s}addRangeListener(t){a(this,Rp).push(t)}addProgressListener(t){a(this,Dp).push(t)}addProgressiveReadListener(t){a(this,Mp).push(t)}addProgressiveDoneListener(t){a(this,Pp).push(t)}onDataRange(t,e){for(const i of a(this,Rp))i(t,e)}onDataProgress(t,e){a(this,kl).promise.then(()=>{for(const i of a(this,Dp))i(t,e)})}onDataProgressiveRead(t){a(this,kl).promise.then(()=>{for(const e of a(this,Mp))e(t)})}onDataProgressiveDone(){a(this,kl).promise.then(()=>{for(const t of a(this,Pp))t()})}transportReady(){a(this,kl).resolve()}requestDataRange(t,e){jt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}kl=new WeakMap,Pp=new WeakMap,Mp=new WeakMap,Dp=new WeakMap,Rp=new WeakMap;class yj{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ht(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Pr,_l,Pd;class vj{constructor(t,e,i,s=!1){x(this,_l);x(this,Pr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new VC:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new c2,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new Tm({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ht(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:s="display",annotationMode:r=vo.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:v=null}){var D,R,I;(D=this._stats)==null||D.time("Overall");const b=this._transport.getRenderingIntent(s,r,d,f),{renderingIntent:S,cacheKey:m}=b;g(this,Pr,!1),c||(c=this._transport.getOptionalContentConfig(S));let y=this._intentStates.get(m);y||(y=Object.create(null),this._intentStates.set(m,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const w=!!(S&hi.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(b));const C=!!(this._pdfBug&&((I=globalThis.StepperManager)!=null&&I.enabled)),E=!this.recordedBBoxes&&(p||C),k=V=>{var Q,q;if(y.renderTasks.delete(_),E){const rt=(Q=_.gfx)==null?void 0:Q.dependencyTracker.take();rt&&(_.stepper&&_.stepper.setOperatorBBoxes(rt,_.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=rt))}w&&g(this,Pr,!0),A(this,_l,Pd).call(this),V?(_.capability.reject(V),this._abortOperatorList({intentState:y,reason:V instanceof Error?V:new Error(V)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(q=globalThis.Stats)!=null&&q.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new Nb({callback:k,params:{canvas:e,canvasContext:t,dependencyTracker:E?new FB(e,y.operatorList.length,C):null,viewport:i,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:v});(y.renderTasks||(y.renderTasks=new Set)).add(_);const P=_.task;return Promise.all([y.displayReadyCapability.promise,c]).then(([V,Q])=>{var q;if(this.destroyed){k();return}if((q=this._stats)==null||q.time("Rendering"),!(Q.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:V,optionalContentConfig:Q}),_.operatorListChanged()}).catch(k),P}getOperatorList({intent:t="display",annotationMode:e=vo.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,i,s,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Sf.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function r(){o.read().then(function({value:c,done:u}){if(u){i(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},s)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),g(this,Pr,!1),Promise.all(t)}cleanup(t=!1){g(this,Pr,!0);const e=A(this,_l,Pd).call(this);return t&&e&&this._stats&&(this._stats=new VC),e}_startRenderPage(t,e){var s,r;const i=this._intentStates.get(e);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&A(this,_l,Pd).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:o}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},o).getReader(),u=this._intentStates.get(e);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();A(this,_l,Pd).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Kx){let s=gj;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Ca(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Pr=new WeakMap,_l=new WeakSet,Pd=function(){if(!a(this,Pr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),g(this,Pr,!1),!0};var Ho,os,Mr,Pl,s0,Ml,Dl,En,Fg,g2,y2,Md,nh,Og;const Xt=class Xt{constructor({name:t=null,port:e=null,verbosity:i=ZO()}={}){x(this,En);x(this,Ho,Promise.withResolvers());x(this,os,null);x(this,Mr,null);x(this,Pl,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(a(Xt,Dl).has(e))throw new Error("Cannot use more than one PDFWorker per port.");a(Xt,Dl).set(e,this),A(this,En,g2).call(this,e)}else A(this,En,y2).call(this)}get promise(){return a(this,Ho).promise}get port(){return a(this,Mr)}get messageHandler(){return a(this,os)}destroy(){var t,e;this.destroyed=!0,(t=a(this,Pl))==null||t.terminate(),g(this,Pl,null),a(Xt,Dl).delete(a(this,Mr)),g(this,Mr,null),(e=a(this,os))==null||e.destroy(),g(this,os,null)}static create(t){const e=a(this,Dl).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Xt(t)}static get workerSrc(){if(Ks.workerSrc)return Ks.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ht(this,"_setupFakeWorkerGlobal",(async()=>a(this,nh,Og)?a(this,nh,Og):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ho=new WeakMap,os=new WeakMap,Mr=new WeakMap,Pl=new WeakMap,s0=new WeakMap,Ml=new WeakMap,Dl=new WeakMap,En=new WeakSet,Fg=function(){a(this,Ho).resolve(),a(this,os).send("configure",{verbosity:this.verbosity})},g2=function(t){g(this,Mr,t),g(this,os,new Cd("main","worker",t)),a(this,os).on("ready",()=>{}),A(this,En,Fg).call(this)},y2=function(){if(a(Xt,Ml)||a(Xt,nh,Og)){A(this,En,Md).call(this);return}let{workerSrc:t}=Xt;try{Xt._isSameOrigin(window.location,t)||(t=Xt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Cd("main","worker",e),s=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?a(this,Ho).reject(new Error("Worker was destroyed")):A(this,En,Md).call(this)},r=new AbortController;e.addEventListener("error",()=>{a(this,Pl)||s()},{signal:r.signal}),i.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}g(this,os,i),g(this,Mr,e),g(this,Pl,e),A(this,En,Fg).call(this)}),i.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{A(this,En,Md).call(this)}});const o=()=>{const l=new Uint8Array;i.send("test",l,[l.buffer])};o();return}catch{L0("The worker has been disabled.")}A(this,En,Md).call(this)},Md=function(){a(Xt,Ml)||(at("Setting up fake worker."),g(Xt,Ml,!0)),Xt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){a(this,Ho).reject(new Error("Worker was destroyed"));return}const e=new kB;g(this,Mr,e);const i=`fake${Ce(Xt,s0)._++}`,s=new Cd(i+"_worker",i,e);t.setup(s,e),g(this,os,new Cd(i,i+"_worker",e)),A(this,En,Fg).call(this)}).catch(t=>{a(this,Ho).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},nh=new WeakSet,Og=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},x(Xt,nh),x(Xt,s0,0),x(Xt,Ml,!1),x(Xt,Dl,new WeakMap),xn&&(g(Xt,Ml,!0),Ks.workerSrc||(Ks.workerSrc="./pdf.worker.mjs")),Xt._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!(i!=null&&i.origin)||i.origin==="null")return!1;const s=new URL(e,i);return i.origin===s.origin},Xt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Xt.fromPort=t=>{if(uB("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Xt.create(t)};let Ef=Xt;var Dr,Bs,ih,sh,Rr,Rl,Dd;class wj{constructor(t,e,i,s,r,o){x(this,Rl);x(this,Dr,new Map);x(this,Bs,new Map);x(this,ih,new Map);x(this,sh,new Map);x(this,Rr,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new c2,this.fontLoader=new xB({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return ht(this,"annotationStorage",new Qx)}getRenderingIntent(t,e=vo.ENABLE,i=null,s=!1,r=!1){let o=hi.DISPLAY,l=gb;switch(t){case"any":o=hi.ANY;break;case"display":break;case"print":o=hi.PRINT;break;default:at(`getRenderingIntent - invalid intent: ${t}`)}const c=o&hi.PRINT&&i instanceof XP?i:this.annotationStorage;switch(e){case vo.DISABLE:o+=hi.ANNOTATIONS_DISABLE;break;case vo.ENABLE:break;case vo.ENABLE_FORMS:o+=hi.ANNOTATIONS_FORMS;break;case vo.ENABLE_STORAGE:o+=hi.ANNOTATIONS_STORAGE,l=c.serializable;break;default:at(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(o+=hi.IS_EDITING),r&&(o+=hi.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,l.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=a(this,Rr))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of a(this,Bs).values())t.push(s._destroy());a(this,Bs).clear(),a(this,ih).clear(),a(this,sh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,Dr).clear(),this.filterFactory.destroy(),Cf.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Ca("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{wt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}wt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async i=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(i,s)=>{wt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){s.close();return}wt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new yj(i,this))}),t.on("DocException",i=>{e._capability.reject(Mn(i))}),t.on("PasswordRequest",i=>{g(this,Rr,Promise.withResolvers());try{if(!e.onPassword)throw Mn(i);const s=r=>{r instanceof Error?a(this,Rr).reject(r):a(this,Rr).resolve({password:r})};e.onPassword(s,i.code)}catch(s){a(this,Rr).reject(s)}return a(this,Rr).promise}),t.on("DataLoaded",i=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;a(this,Bs).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in r){const f=r.error;at(`Error during font loading: ${f}`),this.commonObjs.resolve(i,f);break}const l=new yb(r),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,u=new AB(l,c,r.extra,r.charProcOperatorList);this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(i,u)});break;case"CopyLocalImage":const{imageRef:h}=r;wt(h,"The imageRef must be defined.");for(const f of a(this,Bs).values())for(const[,p]of f.objs)if((p==null?void 0:p.ref)===h)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(i,r);break;case"Pattern":const d=new vb(r);this.commonObjs.resolve(i,d.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,r,o])=>{var c;if(this.destroyed)return;const l=a(this,Bs).get(s);if(!l.objs.has(i)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",i=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[i.type];if(!s)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&at("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=a(this,ih).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,sh).set(r.refStr,t);const o=new vj(e,r,this,this._params.pdfBug);return a(this,Bs).set(e,o),o});return a(this,ih).set(e,s),s}getPageIndex(t){return wb(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return A(this,Rl,Dd).call(this,"GetFieldObjects")}hasJSActions(){return A(this,Rl,Dd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return A(this,Rl,Dd).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return A(this,Rl,Dd).call(this,"GetOptionalContentConfig").then(e=>new QB(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,Dr).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new KB(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,Dr).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,Bs).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,Dr).clear(),this.filterFactory.destroy(!0),Cf.cleanup()}}cachedPageNumber(t){if(!wb(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,sh).get(e)??null}}Dr=new WeakMap,Bs=new WeakMap,ih=new WeakMap,sh=new WeakMap,Rr=new WeakMap,Rl=new WeakSet,Dd=function(t,e=null){const i=a(this,Dr).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return a(this,Dr).set(t,s),s};var $o;class bj{constructor(t){x(this,$o,null);O(this,"onContinue",null);O(this,"onError",null);g(this,$o,t)}get promise(){return a(this,$o).capability.promise}cancel(t=0){a(this,$o).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,$o).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,$o);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}$o=new WeakMap;var Wo,Ll;const ja=class ja{constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:v=null}){x(this,Wo,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new bj(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=p,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=v}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,u;if(this.cancelled)return;if(this._canvas){if(a(ja,Ll).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(ja,Ll).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:s,background:r,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new uu(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:i,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(t=null,e=0){var i,s,r;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),a(this,Wo)&&(window.cancelAnimationFrame(a(this,Wo)),g(this,Wo,null)),a(ja,Ll).delete(this._canvas),t||(t=new Kx(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(s=this.task).onError)==null||r.call(s,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?g(this,Wo,window.requestAnimationFrame(()=>{g(this,Wo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(ja,Ll).delete(this._canvas),this.callback())))}};Wo=new WeakMap,Ll=new WeakMap,x(ja,Ll,new WeakSet);let Nb=ja;const xj="5.4.394",Aj="2cc809ade";var Zn,Nl,rh,_e,Lp,oh,Lr,Np,Go,as,Ip,It,Ib,Fb,Ob,Ia,v2,fo;const Dn=class Dn{constructor({editor:t=null,uiManager:e=null}){x(this,It);x(this,Zn,null);x(this,Nl,null);x(this,rh);x(this,_e,null);x(this,Lp,!1);x(this,oh,!1);x(this,Lr,null);x(this,Np);x(this,Go,null);x(this,as,null);var i,s;t?(g(this,oh,!1),g(this,Lr,t)):g(this,oh,!0),g(this,as,(t==null?void 0:t._uiManager)||e),g(this,Np,a(this,as)._eventBus),g(this,rh,((i=t==null?void 0:t.color)==null?void 0:i.toUpperCase())||((s=a(this,as))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),a(Dn,Ip)||g(Dn,Ip,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ht(this,"_keyboardManager",new _m([[["Escape","mac+Escape"],Dn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Dn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Dn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Dn.prototype._moveToPrevious],[["Home","mac+Home"],Dn.prototype._moveToBeginning],[["End","mac+End"],Dn.prototype._moveToEnd]]))}renderButton(){const t=g(this,Zn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",a(this,Lr)&&(t.ariaControls=`${a(this,Lr).id}_colorpicker_dropdown`);const e=a(this,as)._signal;t.addEventListener("click",A(this,It,Ia).bind(this),{signal:e}),t.addEventListener("keydown",A(this,It,Ob).bind(this),{signal:e});const i=g(this,Nl,document.createElement("span"));return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=a(this,rh),t.append(i),t}renderMainDropdown(){const t=g(this,_e,A(this,It,Ib).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===a(this,Zn)){A(this,It,Ia).call(this,t);return}const e=t.target.getAttribute("data-color");e&&A(this,It,Fb).call(this,e,t)}_moveToNext(t){var e,i;if(!a(this,It,fo)){A(this,It,Ia).call(this,t);return}if(t.target===a(this,Zn)){(e=a(this,_e).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=a(this,_e))==null?void 0:e.firstChild)||t.target===a(this,Zn)){a(this,It,fo)&&this._hideDropdownFromKeyboard();return}a(this,It,fo)||A(this,It,Ia).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!a(this,It,fo)){A(this,It,Ia).call(this,t);return}(e=a(this,_e).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,It,fo)){A(this,It,Ia).call(this,t);return}(e=a(this,_e).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,_e))==null||t.classList.add("hidden"),a(this,Zn).ariaExpanded="false",(e=a(this,Go))==null||e.abort(),g(this,Go,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,oh)){if(!a(this,It,fo)){(t=a(this,Lr))==null||t.unselect();return}this.hideDropdown(),a(this,Zn).focus({preventScroll:!0,focusVisible:a(this,Lp)})}}updateColor(t){if(a(this,Nl)&&(a(this,Nl).style.backgroundColor=t),!a(this,_e))return;const e=a(this,as).highlightColors.values();for(const i of a(this,_e).children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=a(this,Zn))==null||t.remove(),g(this,Zn,null),g(this,Nl,null),(e=a(this,_e))==null||e.remove(),g(this,_e,null)}};Zn=new WeakMap,Nl=new WeakMap,rh=new WeakMap,_e=new WeakMap,Lp=new WeakMap,oh=new WeakMap,Lr=new WeakMap,Np=new WeakMap,Go=new WeakMap,as=new WeakMap,Ip=new WeakMap,It=new WeakSet,Ib=function(){const t=document.createElement("div"),e=a(this,as)._signal;t.addEventListener("contextmenu",Ki,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),a(this,Lr)&&(t.id=`${a(this,Lr).id}_colorpicker_dropdown`);for(const[i,s]of a(this,as).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",a(Dn,Ip)[i]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.ariaSelected=s===a(this,rh),r.addEventListener("click",A(this,It,Fb).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",A(this,It,Ob).bind(this),{signal:e}),t},Fb=function(t,e){e.stopPropagation(),a(this,Np).dispatch("switchannotationeditorparams",{source:this,type:vt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},Ob=function(t){Dn._keyboardManager.exec(this,t)},Ia=function(t){if(a(this,It,fo)){this.hideDropdown();return}if(g(this,Lp,t.detail===0),a(this,Go)||(g(this,Go,new AbortController),window.addEventListener("pointerdown",A(this,It,v2).bind(this),{signal:a(this,as).combinedSignal(a(this,Go))})),a(this,Zn).ariaExpanded="true",a(this,_e)){a(this,_e).classList.remove("hidden");return}const e=g(this,_e,A(this,It,Ib).call(this));a(this,Zn).append(e)},v2=function(t){var e;(e=a(this,_e))!=null&&e.contains(t.target)||this.hideDropdown()},fo=function(){return a(this,_e)&&!a(this,_e).classList.contains("hidden")},x(Dn,Ip,null);let zy=Dn;var js,Fp,ah,Op;const Va=class Va{constructor(t){x(this,js,null);x(this,Fp,null);x(this,ah,null);g(this,Fp,t),g(this,ah,t._uiManager),a(Va,Op)||g(Va,Op,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(a(this,js))return a(this,js);const{editorType:t,colorType:e,color:i}=a(this,Fp),s=g(this,js,document.createElement("input"));return s.type="color",s.value=i||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",a(Va,Op)[t]),s.addEventListener("input",()=>{a(this,ah).updateParams(e,s.value)},{signal:a(this,ah)._signal}),s}update(t){a(this,js)&&(a(this,js).value=t)}destroy(){var t;(t=a(this,js))==null||t.remove(),g(this,js,null)}hideDropdown(){}};js=new WeakMap,Fp=new WeakMap,ah=new WeakMap,Op=new WeakMap,x(Va,Op,null);let Uy=Va;function lE(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function cd(n){return Math.max(0,Math.min(255,255*n))}class cE{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=cd(t),[t,t,t]}static G_HTML([t]){const e=lE(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(cd)}static RGB_HTML(t){return`#${t.map(lE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[cd(1-Math.min(1,t+s)),cd(1-Math.min(1,i+s)),cd(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,r=1-e,o=1-i,l=Math.min(s,r,o);return["CMYK",s,r,o,l]}}class Sj{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){jt("Abstract method `_createSVG` called.")}}class Hy extends Sj{_createSVG(t){return document.createElementNS(sr,t)}}const Cj=9,vc=new WeakSet,Ej=new Date().getTimezoneOffset()*60*1e3;class Nv{static create(t){switch(t.data.annotationType){case we.LINK:return new tA(t);case we.TEXT:return new kj(t);case we.WIDGET:switch(t.data.fieldType){case"Tx":return new _j(t);case"Btn":return t.data.radioButton?new x2(t):t.data.checkBox?new Mj(t):new Dj(t);case"Ch":return new Rj(t);case"Sig":return new Pj(t)}return new Ac(t);case we.POPUP:return new jb(t);case we.FREETEXT:return new T2(t);case we.LINE:return new Nj(t);case we.SQUARE:return new Ij(t);case we.CIRCLE:return new Fj(t);case we.POLYLINE:return new k2(t);case we.CARET:return new Bj(t);case we.INK:return new eA(t);case we.POLYGON:return new Oj(t);case we.HIGHLIGHT:return new _2(t);case we.UNDERLINE:return new jj(t);case we.SQUIGGLY:return new Vj(t);case we.STRIKEOUT:return new zj(t);case we.STAMP:return new P2(t);case we.FILEATTACHMENT:return new Uj(t);default:return new ie(t)}}}var Il,lh,Fi,Bp,Bb;const lA=class lA{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){x(this,Bp);x(this,Il,null);x(this,lh,!1);x(this,Fi,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return lA._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var i;const{data:t}=this,e=(i=this.annotationStorage)==null?void 0:i.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const t=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:s}=this.data;let r=-1/0,o=-1/0;if((e==null?void 0:e.length)>=8){for(let c=0;c<e.length;c+=8)e[c+1]>o?(o=e[c+1],r=e[c+2]):e[c+1]===o&&(r=Math.max(r,e[c+2]));return[r,o]}if((i==null?void 0:i.length)>=1){for(const c of i)for(let u=0,h=c.length;u<h;u+=2)c[u+1]>o?(o=c[u+1],r=c[u]):c[u+1]===o&&(r=Math.max(r,c[u]));if(r!==1/0)return[r,o]}return s?[s[2],s[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-r)/i,t[1]=100*(t[1]-o)/s,t}get commentText(){var e,i,s;const{data:t}=this;return((i=(e=this.annotationStorage.getRawValue(`${xf}${t.id}`))==null?void 0:e.popup)==null?void 0:i.contents)||((s=t.contentsObj)==null?void 0:s.str)||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${xf}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=a(this,Fi))==null?void 0:t.popup)||this.popup)==null||e.remove(),g(this,Fi,this.popup=null)}updateEdited(t){var r;if(!this.container)return;t.rect&&(a(this,Il)||g(this,Il,{rect:this.data.rect.slice(0)}));const{rect:e,popup:i}=t;e&&A(this,Bp,Bb).call(this,e);let s=((r=a(this,Fi))==null?void 0:r.popup)||this.popup;!s&&(i!=null&&i.text)&&(this._createPopup(i),s=a(this,Fi).popup),s&&(s.updateEdited(t),i!=null&&i.deleted&&(s.remove(),g(this,Fi,null),this.popup=null))}resetEdited(){var t;a(this,Il)&&(A(this,Bp,Bb).call(this,a(this,Il).rect),(t=a(this,Fi))==null||t.popup.resetEdited(),g(this,Il,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),!(this instanceof Ac)&&!(this instanceof tA)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof jb){const{rotation:b}=e;return!e.hasOwnCanvas&&b!==0&&this.setRotation(b,r),r}const{width:l,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const b=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(b>0||S>0){const y=`calc(${b}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;o.borderRadius=y}else if(this instanceof x2){const y=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=y}switch(e.borderStyle.style){case Tc.SOLID:o.borderStyle="solid";break;case Tc.DASHED:o.borderStyle="dashed";break;case Tc.BEVELED:at("Unimplemented border style: beveled");break;case Tc.INSET:at("Unimplemented border style: inset");break;case Tc.UNDERLINE:o.borderBottomStyle="solid";break}const m=e.borderColor||null;m?(g(this,lh,!0),o.borderColor=K.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):o.borderWidth=0}const u=K.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:v}=e;return e.hasOwnCanvas||v===0?(o.width=`${100*l/h}%`,o.height=`${100*c/d}%`):this.setRotation(v,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/i}%`,e.style.height=`${100*o/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const r=s.detail[e],o=r[0],l=r.slice(1);s.target.style[i]=cE[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[i]:cE[`${o}_rgb`](l)})};return ht(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||i[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,r]of Object.entries(e)){const o=i[s];if(o){const l={detail:{[s]:r},target:t};o(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,r]=this.data.rect.map(b=>Math.fround(b));if(t.length===8){const[b,S,m,y]=t.subarray(2,6);if(s===b&&r===S&&e===m&&i===y)return}const{style:o}=this.container;let l;if(a(this,lh)){const{borderColor:b,borderWidth:S}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const c=s-e,u=r-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),v=`clippath_${this.data.id}`;p.setAttribute("id",v),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let b=2,S=t.length;b<S;b+=8){const m=t[b],y=t[b+1],w=t[b+2],C=t[b+3],E=h.createElement("rect"),k=(w-e)/c,_=(r-y)/u,P=(m-w)/c,D=(y-C)/u;E.setAttribute("x",k),E.setAttribute("y",_),E.setAttribute("width",P),E.setAttribute("height",D),p.append(E),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${_}" width="${P}" height="${D}"/>`)}a(this,lh)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${v})`}_createPopup(t=null){const{data:e}=this;let i,s;t?(i={str:t.text},s=t.date):(i=e.contentsObj,s=e.modificationDate),g(this,Fi,new jb({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(a(this,Fi)||this.popup||this.data.popupRef)}get extraPopupElement(){return a(this,Fi)}render(){jt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:o,exportValues:l}of s){if(r===-1||o===e)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!vc.has(u)){at(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:c,domElement:u})}return i}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==e&&vc.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Il=new WeakMap,lh=new WeakMap,Fi=new WeakMap,Bp=new WeakSet,Bb=function(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;i==null||i.splice(0,4,...t),e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,s===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(s)};let ie=lA;class Tj extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var pi,Fa,w2,b2;class tA extends ie{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});x(this,pi);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(i.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),r=!0):e.attachment?(A(this,pi,w2).call(this,s,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(A(this,pi,b2).call(this,s,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=s,this.container.append(s)),this.container}_bindLink(e,i,s=""){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&A(this,pi,Fa).call(this),s&&(e.title=s)}_bindNamedAction(e,i,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(e.title=s),A(this,pi,Fa).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}i.overlaidText&&(e.title=i.overlaidText),e.onclick||(e.onclick=()=>!1),A(this,pi,Fa).call(this)}_bindResetFormAction(e,i){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),A(this,pi,Fa).call(this),!this._fieldObjects){at('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:l}=i,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const v=this._fieldObjects[p]||[];for(const{id:b}of v)f.add(b)}for(const p of Object.values(this._fieldObjects))for(const v of p)f.has(v.id)===l&&c.push(v)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const b=f.defaultValue||"";u.setValue(p,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;u.setValue(p,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";u.setValue(p,{value:b});break}default:continue}const v=document.querySelector(`[data-element-id="${p}"]`);if(v){if(!vc.has(v)){at(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}pi=new WeakSet,Fa=function(){this.container.setAttribute("data-internal-link","")},w2=function(e,i,s="",r=null){e.href=this.linkService.getAnchorUrl(""),i.description?e.title=i.description:s&&(e.title=s),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,r),!1},A(this,pi,Fa).call(this)},b2=function(e,i,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(e.title=s),A(this,pi,Fa).call(this)};class kj extends ie{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Ac extends ie{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return en.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,r){i.includes("mouse")?t.addEventListener(i,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{var l;if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(t,e,i,s){var r,o,l;for(const[c,u]of i)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":K.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||Cj,r=t.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(Tv*s))||1,d=u/h;o=Math.min(s,c(d/Tv))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(s,c(u/Tv))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=K.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class _j extends Ac{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),r.setValue(o.id,{[s]:i})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),vc.add(i),this.contentElement=i,i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:p}=this.data,v=!!f&&this.enableScripting;d&&(i.title=d),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",S=>{t.setValue(e,{value:S.target.value}),this.setPropertyOnSiblings(i,"value",S.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",S=>{const m=this.data.defaultFieldValue??"";i.value=h.userValue=m,h.formattedValue=null});let b=S=>{const{formattedValue:m}=h;m!=null&&(S.target.value=m),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",m=>{var w;if(h.focused)return;const{target:y}=m;if(v&&(y.type=f,p&&(y.step=p)),h.userValue){const C=h.userValue;if(v)if(f==="time"){const E=new Date(C),k=[E.getHours(),E.getMinutes(),E.getSeconds()];y.value=k.map(_=>_.toString().padStart(2,"0")).join(":")}else y.value=new Date(C-Ej).toISOString().split(f==="date"?"T":".",1)[0];else y.value=C}h.lastCommittedValue=y.value,h.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const y={value(w){h.userValue=w.detail.value??"",v||t.setValue(e,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:C}=w.detail;h.formattedValue=C,C!=null&&w.target!==document.activeElement&&(w.target.value=C);const E={formattedValue:C};v&&(E.value=C),t.setValue(e,E)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var _;const{charLimit:C}=w.detail,{target:E}=w;if(C===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",C);let k=h.userValue;!k||k.length<=C||(k=k.slice(0,C),E.value=h.userValue=k,t.setValue(e,{value:k}),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(y,m)}),i.addEventListener("keydown",m=>{var C;h.commitKey=1;let y=-1;if(m.key==="Escape"?y=0:m.key==="Enter"&&!this.data.multiLine?y=2:m.key==="Tab"&&(h.commitKey=3),y===-1)return;const{value:w}=m.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:y,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const S=b;b=null,i.addEventListener("blur",m=>{var C,E;if(!h.focused||!m.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(h.focused=!1);const{target:y}=m;let{value:w}=y;if(v){if(w&&f==="time"){const k=w.split(":").map(_=>parseInt(_,10));w=new Date(2e3,0,1,k[0],k[1],k[2]||0).valueOf(),y.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();y.type="text"}h.userValue=w,h.lastCommittedValue!==w&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:h.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),S(m)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",m=>{var D;h.lastCommittedValue=null;const{data:y,target:w}=m,{value:C,selectionStart:E,selectionEnd:k}=w;let _=E,P=k;switch(m.inputType){case"deleteWordBackward":{const R=C.substring(0,E).match(/\w*[^\w]*$/);R&&(_-=R[0].length);break}case"deleteWordForward":{const R=C.substring(E).match(/^[^\w]*\w*/);R&&(P+=R[0].length);break}case"deleteContentBackward":E===k&&(_-=1);break;case"deleteContentForward":E===k&&(P+=1);break}m.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,change:y||"",willCommit:!1,selStart:_,selEnd:P}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(b&&i.addEventListener("blur",b),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${m}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Pj extends Ac{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Mj extends Ac{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return vc.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,i)){const h=c&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class x2 extends Ac{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(vc.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,i))t.setValue(u.id,{value:!1});t.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Dj extends tA{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class Rj extends Ac{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");vc.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),o=()=>{h.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const l=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,v=>v.selected).map(v=>v[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,v=new Set(Array.isArray(p)?p:[p]);for(const b of s.options)b.selected=v.has(b.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,v=f.detail.remove;p[v].selected=!1,s.remove(v),p.length>0&&Array.prototype.findIndex.call(p,S=>S.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(f){const{index:p,displayValue:v,exportValue:b}=f.detail.insert,S=s.children[p],m=document.createElement("option");m.textContent=v,m.value=b,S?S.before(m):s.append(m),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const v of p){const{displayValue:b,exportValue:S}=v,m=document.createElement("option");m.textContent=b,m.value=S,s.append(m)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const p=new Set(f.detail.indices);for(const v of f.target.options)v.selected=p.has(v.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var p;const d=l(!0),f=l(!1);t.setValue(e,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var jp,Vb;class jb extends ie{constructor(e){const{data:i,elements:s,parent:r}=e,o=!!r._commentManager;super(e,{isRenderable:!o&&ie._hasPopupData(i)});x(this,jp);if(this.elements=s,o&&ie._hasPopupData(i)){const l=this.popup=A(this,jp,Vb).call(this);for(const c of s)c.popup=l}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const i=this.popup=A(this,jp,Vb).call(this),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Qc}${r}`).join(",")),this.container}}jp=new WeakSet,Vb=function(){return new Lj({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Jn,Xo,r0,o0,ch,uh,ae,Vs,Yo,Fl,hh,dh,zs,ti,Nr,Ir,le,Fr,Ko,Vp,Or,fh,Ol,qo,Ne,Qo,ft,Bg,zb,Ub,Hb,jg,$b,A2,S2,C2,E2,Vg,zg,Wb;class Lj{constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:u,parentRect:h,open:d,commentManager:f=null}){x(this,ft);x(this,Jn,null);x(this,Xo,A(this,ft,C2).bind(this));x(this,r0,A(this,ft,Wb).bind(this));x(this,o0,A(this,ft,zg).bind(this));x(this,ch,A(this,ft,Vg).bind(this));x(this,uh,null);x(this,ae,null);x(this,Vs,null);x(this,Yo,null);x(this,Fl,null);x(this,hh,null);x(this,dh,null);x(this,zs,!1);x(this,ti,null);x(this,Nr,null);x(this,Ir,null);x(this,le,null);x(this,Fr,null);x(this,Ko,null);x(this,Vp,null);x(this,Or,null);x(this,fh,null);x(this,Ol,null);x(this,qo,!1);x(this,Ne,null);x(this,Qo,null);g(this,ae,t),g(this,fh,s),g(this,Vs,o),g(this,Or,l),g(this,hh,c),g(this,uh,e),g(this,Vp,u),g(this,dh,h),g(this,Fl,i),g(this,Jn,f),g(this,Ne,i[0]),g(this,Yo,Iy.toDateObject(r)),this.trigger=i.flatMap(p=>p.getElementsToTriggerPopup()),f||(A(this,ft,Bg).call(this),a(this,ae).hidden=!0,d&&A(this,ft,Vg).call(this))}renderCommentButton(){if(a(this,le)){a(this,le).parentNode||a(this,Ne).container.after(a(this,le));return}if(a(this,Fr)||A(this,ft,zb).call(this),!a(this,Fr))return;const{signal:t}=g(this,Nr,new AbortController),e=a(this,Ne).hasOwnCommentButton,i=()=>{a(this,Jn).toggleCommentPopup(this,!0,void 0,!e)},s=()=>{a(this,Jn).toggleCommentPopup(this,!1,!0,!e)},r=()=>{a(this,Jn).toggleCommentPopup(this,!1,!1)};if(e){g(this,le,a(this,Ne).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",a(this,Xo),{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",s,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=g(this,le,document.createElement("button"));o.className="annotationCommentButton";const l=a(this,Ne).container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),A(this,ft,Hb).call(this),A(this,ft,Ub).call(this),o.addEventListener("keydown",a(this,Xo),{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",s,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),l.after(o)}}get commentButtonColor(){const{color:t,opacity:e}=a(this,Ne).commentData;return t?a(this,hh)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=a(this,le))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:s,modificationDate:r}=a(this,Ne).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:s,modificationDate:r}}get elementBeforePopup(){return a(this,le)}get comment(){return a(this,Qo)||g(this,Qo,a(this,Ne).commentText),a(this,Qo)}set comment(t){t!==this.comment&&(a(this,Ne).commentText=g(this,Qo,t))}focus(){var t;(t=a(this,Ne).container)==null||t.focus()}get parentBoundingClientRect(){return a(this,Ne).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){a(this,le)&&(a(this,le).classList.toggle("selected",t),a(this,le).ariaExpanded=e)}setSelectedCommentButton(t){a(this,le).classList.toggle("selected",t)}get commentPopupPosition(){if(a(this,Ko))return a(this,Ko);const{x:t,y:e,height:i}=a(this,le).getBoundingClientRect(),{x:s,y:r,width:o,height:l}=a(this,Ne).layer.getBoundingClientRect();return[(t-s)/o,(e+i-r)/l]}set commentPopupPosition(t){g(this,Ko,t)}hasDefaultPopupPosition(){return a(this,Ko)===null}get commentButtonPosition(){return a(this,Fr)}get commentButtonWidth(){return a(this,le).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=a(this,Ko)||this.commentButtonPosition.map(u=>u/100),s=this.parentBoundingClientRect,{x:r,y:o,width:l,height:c}=s;a(this,Jn).showDialog(null,this,r+e*l,o+i*c,{...t,parentDimensions:s})}render(){var i,s;if(a(this,ti))return;const t=g(this,ti,document.createElement("div"));if(t.className="popup",a(this,uh)){const r=t.style.outlineColor=K.makeHexColor(...a(this,uh));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");if(e.className="header",(i=a(this,fh))!=null&&i.str){const r=document.createElement("span");r.className="title",e.append(r),{dir:r.dir,str:r.textContent}=a(this,fh)}if(t.append(e),a(this,Yo)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Yo).valueOf()})),r.dateTime=a(this,Yo).toISOString(),e.append(r)}dP({html:a(this,ft,jg)||a(this,Vs).str,dir:(s=a(this,Vs))==null?void 0:s.dir,className:"popupContent"},t),a(this,ae).append(t)}updateEdited({rect:t,popup:e,deleted:i}){var s;if(a(this,Jn)){i?(this.remove(),g(this,Qo,null)):e&&(e.deleted?this.remove():(A(this,ft,Hb).call(this),g(this,Qo,e.text))),t&&(g(this,Fr,null),A(this,ft,zb).call(this),A(this,ft,Ub).call(this));return}if(i||e!=null&&e.deleted){this.remove();return}A(this,ft,Bg).call(this),a(this,Ol)||g(this,Ol,{contentsObj:a(this,Vs),richText:a(this,Or)}),t&&g(this,Ir,null),e&&e.text&&(g(this,Or,A(this,ft,S2).call(this,e.text)),g(this,Yo,Iy.toDateObject(e.date)),g(this,Vs,null)),(s=a(this,ti))==null||s.remove(),g(this,ti,null)}resetEdited(){var t;a(this,Ol)&&({contentsObj:Ce(this,Vs)._,richText:Ce(this,Or)._}=a(this,Ol),g(this,Ol,null),(t=a(this,ti))==null||t.remove(),g(this,ti,null),g(this,Ir,null))}remove(){var t,e,i;if((t=a(this,Nr))==null||t.abort(),g(this,Nr,null),(e=a(this,ti))==null||e.remove(),g(this,ti,null),g(this,qo,!1),g(this,zs,!1),(i=a(this,le))==null||i.remove(),g(this,le,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){g(this,qo,this.isVisible),a(this,qo)&&(a(this,ae).hidden=!0)}maybeShow(){a(this,Jn)||(A(this,ft,Bg).call(this),a(this,qo)&&(a(this,ti)||A(this,ft,zg).call(this),g(this,qo,!1),a(this,ae).hidden=!1))}get isVisible(){return a(this,Jn)?!1:a(this,ae).hidden===!1}}Jn=new WeakMap,Xo=new WeakMap,r0=new WeakMap,o0=new WeakMap,ch=new WeakMap,uh=new WeakMap,ae=new WeakMap,Vs=new WeakMap,Yo=new WeakMap,Fl=new WeakMap,hh=new WeakMap,dh=new WeakMap,zs=new WeakMap,ti=new WeakMap,Nr=new WeakMap,Ir=new WeakMap,le=new WeakMap,Fr=new WeakMap,Ko=new WeakMap,Vp=new WeakMap,Or=new WeakMap,fh=new WeakMap,Ol=new WeakMap,qo=new WeakMap,Ne=new WeakMap,Qo=new WeakMap,ft=new WeakSet,Bg=function(){var e;if(a(this,Nr))return;g(this,Nr,new AbortController);const{signal:t}=a(this,Nr);for(const i of this.trigger)i.addEventListener("click",a(this,ch),{signal:t}),i.addEventListener("pointerenter",a(this,o0),{signal:t}),i.addEventListener("pointerleave",a(this,r0),{signal:t}),i.classList.add("popupTriggerArea");for(const i of a(this,Fl))(e=i.container)==null||e.addEventListener("keydown",a(this,Xo),{signal:t})},zb=function(){const t=a(this,Fl).find(e=>e.hasCommentButton);t&&g(this,Fr,t._normalizePoint(t.commentButtonPosition))},Ub=function(){if(a(this,Ne).extraPopupElement&&!a(this,Ne).editor)return;a(this,le)||this.renderCommentButton();const[t,e]=a(this,Fr),{style:i}=a(this,le);i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`},Hb=function(){a(this,Ne).extraPopupElement||(a(this,le)||this.renderCommentButton(),a(this,le).style.backgroundColor=this.commentButtonColor||"")},jg=function(){const t=a(this,Or),e=a(this,Vs);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,Or).html||null},$b=function(){var t,e,i;return((i=(e=(t=a(this,ft,jg))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},A2=function(){var t,e,i;return((i=(e=(t=a(this,ft,jg))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},S2=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:a(this,ft,A2),fontSize:a(this,ft,$b)?`calc(${a(this,ft,$b)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return i},C2=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,zs))&&A(this,ft,Vg).call(this)},E2=function(){if(a(this,Ir)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:r}}}=a(this,hh);let o=!!a(this,dh),l=o?a(this,dh):a(this,Vp);for(const v of a(this,Fl))if(!l||K.intersect(v.data.rect,l)!==null){l=v.data.rect,o=!0;break}const c=K.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),h=o?l[2]-l[0]+5:0,d=c[0]+h,f=c[1];g(this,Ir,[100*(d-s)/e,100*(f-r)/i]);const{style:p}=a(this,ae);p.left=`${a(this,Ir)[0]}%`,p.top=`${a(this,Ir)[1]}%`},Vg=function(){if(a(this,Jn)){a(this,Jn).toggleCommentPopup(this,!1);return}g(this,zs,!a(this,zs)),a(this,zs)?(A(this,ft,zg).call(this),a(this,ae).addEventListener("click",a(this,ch)),a(this,ae).addEventListener("keydown",a(this,Xo))):(A(this,ft,Wb).call(this),a(this,ae).removeEventListener("click",a(this,ch)),a(this,ae).removeEventListener("keydown",a(this,Xo)))},zg=function(){a(this,ti)||this.render(),this.isVisible?a(this,zs)&&a(this,ae).classList.add("focused"):(A(this,ft,E2).call(this),a(this,ae).hidden=!1,a(this,ae).style.zIndex=parseInt(a(this,ae).style.zIndex)+1e3)},Wb=function(){a(this,ae).classList.remove("focused"),!(a(this,zs)||!this.isVisible)&&(a(this,ae).hidden=!0,a(this,ae).style.zIndex=parseInt(a(this,ae).style.zIndex)-1e3)};class T2 extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=ct.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var zp;class Nj extends ie{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,zp,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=g(this,zp,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,zp)}addHighlightArea(){this.container.classList.add("highlightArea")}}zp=new WeakMap;var Up;class Ij extends ie{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Up,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,l=g(this,Up,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",i-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,Up)}addHighlightArea(){this.container.classList.add("highlightArea")}}Up=new WeakMap;var Hp;class Fj extends ie{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Hp,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,l=g(this,Hp,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",i/2),l.setAttribute("cy",s/2),l.setAttribute("rx",i/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,Hp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hp=new WeakMap;var $p;class k2 extends ie{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,$p,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!i)return this.container;const c=this.svgFactory.create(o,l,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const p=i[d]-e[0],v=e[3]-i[d+1];u.push(`${p},${v}`)}u=u.join(" ");const h=g(this,$p,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return a(this,$p)}addHighlightArea(){this.container.classList.add("highlightArea")}}$p=new WeakMap;class Oj extends k2{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Bj extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Wp,Bl,Gp,Gb;class eA extends ie{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Gp);x(this,Wp,null);x(this,Bl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ct.HIGHLIGHT:ct.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:u}=A(this,Gp,Gb).call(this,i,e),h=this.svgFactory.create(c,u,!0),d=g(this,Wp,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,p=s.length;f<p;f++){const v=this.svgFactory.createElement(this.svgElementName);a(this,Bl).push(v),v.setAttribute("points",s[f].join(",")),d.append(v)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:s,rect:r}=e,o=a(this,Wp);if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let l=0,c=a(this,Bl).length;l<c;l++)a(this,Bl)[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:c,height:u}=A(this,Gp,Gb).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,Bl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wp=new WeakMap,Bl=new WeakMap,Gp=new WeakSet,Gb=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class _2 extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ct.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class jj extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class Vj extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class zj extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class P2 extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ct.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Xp,Yp,Xb;class Uj extends ie{constructor(e){var s;super(e,{isRenderable:!0});x(this,Yp);x(this,Xp,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",A(this,Yp,Xb).bind(this)),g(this,Xp,s);const{isMac:r}=en.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&A(this,Yp,Xb).call(this)}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return a(this,Xp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xp=new WeakMap,Yp=new WeakSet,Xb=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var jl,Vl,ph,Zo,Kp,zl,ei,qp,qr,Ug,Kb;const cA=class cA{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:l,commentManager:c,linkService:u,annotationStorage:h}){x(this,qr);x(this,jl,null);x(this,Vl,null);x(this,ph,null);x(this,Zo,new Map);x(this,Kp,null);x(this,zl,null);x(this,ei,[]);x(this,qp,!1);this.div=t,g(this,jl,e),g(this,Vl,i),g(this,Kp,l||null),g(this,zl,u||null),g(this,ph,h||new Qx),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=c||null}hasEditableAnnotations(){return a(this,Zo).size>0}async render(t){var l;const{annotations:e}=t,i=this.div;gc(i,this.viewport);const s=new Map,r=[],o={data:null,layer:i,linkService:a(this,zl),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Hy,annotationStorage:a(this,ph),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const u=c.annotationType===we.POPUP;if(u){const f=s.get(c.id);if(!f)continue;if(!this._commentManager){r.push(c);continue}o.elements=f}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;o.data=c;const h=Nv.create(o);if(!h.isRenderable)continue;if(!u&&(a(this,ei).push(h),c.popupRef)){const f=s.get(c.popupRef);f?f.push(h):s.set(c.popupRef,[h])}const d=h.render();c.hidden&&(d.style.visibility="hidden"),h._isEditable&&(a(this,Zo).set(h.data.id,h),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(h))}await A(this,qr,Ug).call(this);for(const c of r){const u=o.elements=s.get(c.id);o.data=c;const h=Nv.create(o);if(!h.isRenderable)continue;const d=h.render();h.contentElement.id=`${Qc}${c.id}`,c.hidden&&(d.style.visibility="hidden"),u.at(-1).container.after(d)}A(this,qr,Kb).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:a(this,zl),svgFactory:new Hy,parent:this};for(const i of t){i.borderStyle||(i.borderStyle=cA._defaultBorderStyle),e.data=i;const s=Nv.create(e);s.isRenderable&&(s.render(),s.contentElement.id=`${Qc}${i.id}`,a(this,ei).push(s))}await A(this,qr,Ug).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,gc(e,{rotation:t.rotation}),A(this,qr,Kb).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Zo).values())}getEditableAnnotation(t){return a(this,Zo).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:s}=t,r=new Tj({data:{id:i,rect:t.getPDFRect(),rotation:s},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:a(this,zl),annotationStorage:a(this,ph)});return r.render(),r.contentElement.id=`${Qc}${i}`,r.createOrUpdatePopup(),a(this,ei).push(r),r}removeAnnotation(t){var s;const e=a(this,ei).findIndex(r=>r.data.id===t);if(e<0)return;const[i]=a(this,ei).splice(e,1);(s=a(this,jl))==null||s.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);A(this,qr,Ug).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return ht(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Tc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};jl=new WeakMap,Vl=new WeakMap,ph=new WeakMap,Zo=new WeakMap,Kp=new WeakMap,zl=new WeakMap,ei=new WeakMap,qp=new WeakMap,qr=new WeakSet,Ug=async function(){var i,s,r;if(a(this,ei).length===0)return;this.div.replaceChildren();const t=[];if(!a(this,qp)){g(this,qp,!0);for(const{contentElement:o,data:{id:l}}of a(this,ei)){const c=o.id=`${Qc}${l}`;t.push((i=a(this,Kp))==null?void 0:i.getAriaAttributes(c).then(u=>{if(u)for(const[h,d]of u)o.setAttribute(h,d)}))}}a(this,ei).sort(({data:{rect:[o,l,c,u]}},{data:{rect:[h,d,f,p]}})=>{if(o===c&&l===u)return 1;if(h===f&&d===p)return-1;const v=u,b=l,S=(l+u)/2,m=p,y=d,w=(d+p)/2;if(S>=m&&w<=b)return-1;if(w>=v&&S<=y)return 1;const C=(o+c)/2,E=(h+f)/2;return C-E});const e=document.createDocumentFragment();for(const o of a(this,ei))e.append(o.container),this._commentManager?(r=((s=o.extraPopupElement)==null?void 0:s.popup)||o.popup)==null||r.renderCommentButton():o.extraPopupElement&&e.append(o.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),a(this,jl))for(const o of a(this,ei))a(this,jl).addPointerInTextLayer(o.contentElement,!1)},Kb=function(){var e;if(!a(this,Vl))return;const t=this.div;for(const[i,s]of a(this,Vl)){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=a(this,Zo).get(i);l&&(l._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(i,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}a(this,Vl).clear()};let Yb=cA;const rg=/\r\n?|\n/g;var ni,Qp,Ul,ii,Se,M2,D2,R2,Hg,Qr,$g,Wg,L2,Qb,N2;const Wt=class Wt extends Ht{constructor(e){super({...e,name:"freeTextEditor"});x(this,Se);x(this,ni,"");x(this,Qp,`${this.id}-editor`);x(this,Ul,null);x(this,ii);O(this,"_colorPicker",null);this.color=e.color||Wt._defaultColor||Ht._defaultLineColor,g(this,ii,e.fontSize||Wt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=Wt.prototype,i=o=>o.isEmpty(),s=yc.TRANSLATE_SMALL,r=yc.TRANSLATE_BIG;return ht(this,"_keyboardManager",new _m([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(e,i){Ht.initialize(e,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case vt.FREETEXT_SIZE:Wt._defaultFontSize=i;break;case vt.FREETEXT_COLOR:Wt._defaultColor=i;break}}updateParams(e,i){switch(e){case vt.FREETEXT_SIZE:A(this,Se,M2).call(this,i);break;case vt.FREETEXT_COLOR:A(this,Se,D2).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[vt.FREETEXT_SIZE,Wt._defaultFontSize],[vt.FREETEXT_COLOR,Wt._defaultColor||Ht._defaultLineColor]]}get propertiesToUpdate(){return[[vt.FREETEXT_SIZE,a(this,ii)],[vt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Uy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return vt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Wt._internalPadding*e,-(Wt._internalPadding+a(this,ii))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),g(this,Ul,new AbortController);const e=this._uiManager.combinedSignal(a(this,Ul));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,Qp)),this._isDraggable=!0,(e=a(this,Ul))==null||e.abort(),g(this,Ul,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,ni),i=g(this,ni,A(this,Se,R2).call(this).trimEnd());if(e===i)return;const s=r=>{if(g(this,ni,r),!r){this.remove();return}A(this,Se,Wg).call(this),this._uiManager.rebuild(this),A(this,Se,Hg).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(e)},mustExec:!1}),A(this,Se,Hg).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Wt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,i;(this._isCopy||this.annotationElementId)&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,Qp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${a(this,ii)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let v,b;switch(this.rotation){case 0:v=e+(l[0]-f)/h,b=i+this.height-(l[1]-p)/d;break;case 90:v=e+(l[0]-f)/h,b=i-(l[1]-p)/d,[c,u]=[u,-c];break;case 180:v=e-this.width+(l[0]-f)/h,b=i-(l[1]-p)/d,[c,u]=[-c,-u];break;case 270:v=e+(l[0]-f-this.height*d)/h,b=i+(l[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(v*r,b*o,c,u)}else this._moveAfterPaste(e,i);A(this,Se,Wg).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var v,b,S;const i=e.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=A(v=Wt,Qr,Qb).call(v,i.getData("text")||"").replaceAll(rg,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const m=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(rg,"")),m!==this.editorDiv){let y=h;for(const w of this.editorDiv.childNodes){if(w===m){y=d;continue}y.push(A(b=Wt,Qr,$g).call(b,w))}}h.push(c.nodeValue.slice(0,u).replaceAll(rg,""))}else if(c===this.editorDiv){let m=h,y=0;for(const w of this.editorDiv.childNodes)y++===u&&(m=d),m.push(A(S=Wt,Qr,$g).call(S,w))}g(this,ni,`${h.join(`
`)}${r}${d.join(`
`)}`),A(this,Se,Wg).call(this);const f=new Range;let p=Math.sumPrecise(h.map(m=>m.length));for(const{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){const y=m.nodeValue.length;if(p<=y){f.setStart(m,p),f.setEnd(m,p);break}p-=y}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Wt._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,i,s){var l;let r=null;if(e instanceof T2){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p,richText:v,contentsObj:b,creationDate:S,modificationDate:m},textContent:y,textPosition:w,parent:{page:{pageNumber:C}}}=e;if(!y||y.length===0)return null;r=e={annotationType:ct.FREETEXT,color:Array.from(u),fontSize:c,value:y.join(`
`),position:w,pageIndex:C-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(b==null?void 0:b.str)||null,richText:v,creationDate:S,modificationDate:m}}const o=await super.deserialize(e,i,s);return g(o,ii,e.fontSize),o.color=K.makeHexColor(...e.color),g(o,ni,A(l=Wt,Qr,Qb).call(l,e.value)),o._initialData=r,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Ht._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:i,fontSize:a(this,ii),value:A(this,Se,L2).call(this)});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!A(this,Se,N2).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${a(this,ii)}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of a(this,ni).split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),i.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:a(this,ni)}}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};ni=new WeakMap,Qp=new WeakMap,Ul=new WeakMap,ii=new WeakMap,Se=new WeakSet,M2=function(e){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,ii))*this.parentScale),g(this,ii,r),A(this,Se,Hg).call(this)},s=a(this,ii);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},D2=function(e){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},R2=function(){var s;const e=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(A(s=Wt,Qr,$g).call(s,r)),i=r);return e.join(`
`)},Hg=function(){const[e,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/i):(this.width=s.height/e,this.height=s.width/i),this.fixAndSetPosition()},Qr=new WeakSet,$g=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(rg,"")},Wg=function(){if(this.editorDiv.replaceChildren(),!!a(this,ni))for(const e of a(this,ni).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},L2=function(){return a(this,ni).replaceAll(""," ")},Qb=function(e){return e.replaceAll(" ","")},N2=function(e){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==i||e.fontSize!==s||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o},x(Wt,Qr),O(Wt,"_freeTextDefaultContent",""),O(Wt,"_internalPadding",0),O(Wt,"_defaultColor",null),O(Wt,"_defaultFontSize",10),O(Wt,"_type","freetext"),O(Wt,"_editorType",ct.FREETEXT);let qb=Wt;class X{toSVGPath(){jt("Abstract method `toSVGPath` must be implemented.")}get box(){jt("Abstract getter `box` must be implemented.")}serialize(t,e){jt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l]*s,o[l+1]=i+t[l+1]*r;return o}static _rescaleAndSwap(t,e,i,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l+1]*s,o[l+1]=i+t[l]*r;return o}static _translate(t,e,i,s){s||(s=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)s[r]=e+t[r],s[r+1]=i+t[r+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,s,r){switch(r){case 90:return[1-e/i,t/s];case 180:return[1-t/i,1-e/s];case 270:return[e/i,1-t/s];default:return[t/i,e/s]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,s,r,o){return[(t+5*i)/6,(e+5*s)/6,(5*i+r)/6,(5*s+o)/6,(i+r)/2,(s+o)/2]}}O(X,"PRECISION",1e-4);var si,ls,mh,gh,Us,mt,Hl,$l,Zp,Jp,yh,vh,Jo,tm,a0,l0,De,Rd,I2,F2,O2,B2,j2,V2;const cr=class cr{constructor({x:t,y:e},i,s,r,o,l=0){x(this,De);x(this,si);x(this,ls,[]);x(this,mh);x(this,gh);x(this,Us,[]);x(this,mt,new Float32Array(18));x(this,Hl);x(this,$l);x(this,Zp);x(this,Jp);x(this,yh);x(this,vh);x(this,Jo,[]);g(this,si,i),g(this,vh,r*s),g(this,gh,o),a(this,mt).set([NaN,NaN,NaN,NaN,t,e],6),g(this,mh,l),g(this,Jp,a(cr,tm)*s),g(this,Zp,a(cr,l0)*s),g(this,yh,s),a(this,Jo).push(t,e)}isEmpty(){return isNaN(a(this,mt)[8])}add({x:t,y:e}){var D;g(this,Hl,t),g(this,$l,e);const[i,s,r,o]=a(this,si);let[l,c,u,h]=a(this,mt).subarray(8,12);const d=t-u,f=e-h,p=Math.hypot(d,f);if(p<a(this,Zp))return!1;const v=p-a(this,Jp),b=v/p,S=b*d,m=b*f;let y=l,w=c;l=u,c=h,u+=S,h+=m,(D=a(this,Jo))==null||D.push(t,e);const C=-m/v,E=S/v,k=C*a(this,vh),_=E*a(this,vh);return a(this,mt).set(a(this,mt).subarray(2,8),0),a(this,mt).set([u+k,h+_],4),a(this,mt).set(a(this,mt).subarray(14,18),12),a(this,mt).set([u-k,h-_],16),isNaN(a(this,mt)[6])?(a(this,Us).length===0&&(a(this,mt).set([l+k,c+_],2),a(this,Us).push(NaN,NaN,NaN,NaN,(l+k-i)/r,(c+_-s)/o),a(this,mt).set([l-k,c-_],14),a(this,ls).push(NaN,NaN,NaN,NaN,(l-k-i)/r,(c-_-s)/o)),a(this,mt).set([y,w,l,c,u,h],6),!this.isEmpty()):(a(this,mt).set([y,w,l,c,u,h],6),Math.abs(Math.atan2(w-c,y-l)-Math.atan2(m,S))<Math.PI/2?([l,c,u,h]=a(this,mt).subarray(2,6),a(this,Us).push(NaN,NaN,NaN,NaN,((l+u)/2-i)/r,((c+h)/2-s)/o),[l,c,y,w]=a(this,mt).subarray(14,18),a(this,ls).push(NaN,NaN,NaN,NaN,((y+l)/2-i)/r,((w+c)/2-s)/o),!0):([y,w,l,c,u,h]=a(this,mt).subarray(0,6),a(this,Us).push(((y+5*l)/6-i)/r,((w+5*c)/6-s)/o,((5*l+u)/6-i)/r,((5*c+h)/6-s)/o,((l+u)/2-i)/r,((c+h)/2-s)/o),[u,h,l,c,y,w]=a(this,mt).subarray(12,18),a(this,ls).push(((y+5*l)/6-i)/r,((w+5*c)/6-s)/o,((5*l+u)/6-i)/r,((5*c+h)/6-s)/o,((l+u)/2-i)/r,((c+h)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,Us),e=a(this,ls);if(isNaN(a(this,mt)[6])&&!this.isEmpty())return A(this,De,I2).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);A(this,De,O2).call(this,i);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return A(this,De,F2).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,s,r,o){return new z2(t,e,i,s,r,o)}getOutlines(){var d;const t=a(this,Us),e=a(this,ls),i=a(this,mt),[s,r,o,l]=a(this,si),c=new Float32Array((((d=a(this,Jo))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(a(this,Jo)[f]-s)/o,c[f+1]=(a(this,Jo)[f+1]-r)/l;if(c[c.length-2]=(a(this,Hl)-s)/o,c[c.length-1]=(a(this,$l)-r)/l,isNaN(i[6])&&!this.isEmpty())return A(this,De,B2).call(this,c);const u=new Float32Array(a(this,Us).length+24+a(this,ls).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=A(this,De,V2).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+p],u[h+1]=e[f+p+1],h+=2}return A(this,De,j2).call(this,u,h),this.newFreeDrawOutline(u,c,a(this,si),a(this,yh),a(this,mh),a(this,gh))}};si=new WeakMap,ls=new WeakMap,mh=new WeakMap,gh=new WeakMap,Us=new WeakMap,mt=new WeakMap,Hl=new WeakMap,$l=new WeakMap,Zp=new WeakMap,Jp=new WeakMap,yh=new WeakMap,vh=new WeakMap,Jo=new WeakMap,tm=new WeakMap,a0=new WeakMap,l0=new WeakMap,De=new WeakSet,Rd=function(){const t=a(this,mt).subarray(4,6),e=a(this,mt).subarray(16,18),[i,s,r,o]=a(this,si);return[(a(this,Hl)+(t[0]-e[0])/2-i)/r,(a(this,$l)+(t[1]-e[1])/2-s)/o,(a(this,Hl)+(e[0]-t[0])/2-i)/r,(a(this,$l)+(e[1]-t[1])/2-s)/o]},I2=function(){const[t,e,i,s]=a(this,si),[r,o,l,c]=A(this,De,Rd).call(this);return`M${(a(this,mt)[2]-t)/i} ${(a(this,mt)[3]-e)/s} L${(a(this,mt)[4]-t)/i} ${(a(this,mt)[5]-e)/s} L${r} ${o} L${l} ${c} L${(a(this,mt)[16]-t)/i} ${(a(this,mt)[17]-e)/s} L${(a(this,mt)[14]-t)/i} ${(a(this,mt)[15]-e)/s} Z`},F2=function(t){const e=a(this,ls);t.push(`L${e[4]} ${e[5]} Z`)},O2=function(t){const[e,i,s,r]=a(this,si),o=a(this,mt).subarray(4,6),l=a(this,mt).subarray(16,18),[c,u,h,d]=A(this,De,Rd).call(this);t.push(`L${(o[0]-e)/s} ${(o[1]-i)/r} L${c} ${u} L${h} ${d} L${(l[0]-e)/s} ${(l[1]-i)/r}`)},B2=function(t){const e=a(this,mt),[i,s,r,o]=a(this,si),[l,c,u,h]=A(this,De,Rd).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-i)/r,(e[3]-s)/o,NaN,NaN,NaN,NaN,(e[4]-i)/r,(e[5]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-i)/r,(e[17]-s)/o,NaN,NaN,NaN,NaN,(e[14]-i)/r,(e[15]-s)/o],0),this.newFreeDrawOutline(d,t,a(this,si),a(this,yh),a(this,mh),a(this,gh))},j2=function(t,e){const i=a(this,ls);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},V2=function(t,e){const i=a(this,mt).subarray(4,6),s=a(this,mt).subarray(16,18),[r,o,l,c]=a(this,si),[u,h,d,f]=A(this,De,Rd).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c],e),e+=24},x(cr,tm,8),x(cr,a0,2),x(cr,l0,a(cr,tm)+a(cr,a0));let $y=cr;var wh,Wl,Br,em,ri,nm,pe,c0,U2;class z2 extends X{constructor(e,i,s,r,o,l){super();x(this,c0);x(this,wh);x(this,Wl,new Float32Array(4));x(this,Br);x(this,em);x(this,ri);x(this,nm);x(this,pe);g(this,pe,e),g(this,ri,i),g(this,wh,s),g(this,nm,r),g(this,Br,o),g(this,em,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],A(this,c0,U2).call(this,l);const[c,u,h,d]=a(this,Wl);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-c)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-c)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const e=[`M${a(this,pe)[4]} ${a(this,pe)[5]}`];for(let i=6,s=a(this,pe).length;i<s;i+=6){if(isNaN(a(this,pe)[i])){e.push(`L${a(this,pe)[i+4]} ${a(this,pe)[i+5]}`);continue}e.push(`C${a(this,pe)[i]} ${a(this,pe)[i+1]} ${a(this,pe)[i+2]} ${a(this,pe)[i+3]} ${a(this,pe)[i+4]} ${a(this,pe)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,s,r],o){const l=s-e,c=r-i;let u,h;switch(o){case 0:u=X._rescale(a(this,pe),e,r,l,-c),h=X._rescale(a(this,ri),e,r,l,-c);break;case 90:u=X._rescaleAndSwap(a(this,pe),e,i,l,c),h=X._rescaleAndSwap(a(this,ri),e,i,l,c);break;case 180:u=X._rescale(a(this,pe),s,i,-l,c),h=X._rescale(a(this,ri),s,i,-l,c);break;case 270:u=X._rescaleAndSwap(a(this,pe),s,r,-l,-c),h=X._rescaleAndSwap(a(this,ri),s,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return a(this,Wl)}newOutliner(e,i,s,r,o,l=0){return new $y(e,i,s,r,o,l)}getNewOutline(e,i){const[s,r,o,l]=a(this,Wl),[c,u,h,d]=a(this,wh),f=o*h,p=l*d,v=s*h+c,b=r*d+u,S=this.newOutliner({x:a(this,ri)[0]*f+v,y:a(this,ri)[1]*p+b},a(this,wh),a(this,nm),e,a(this,em),i??a(this,Br));for(let m=2;m<a(this,ri).length;m+=2)S.add({x:a(this,ri)[m]*f+v,y:a(this,ri)[m+1]*p+b});return S.getOutlines()}}wh=new WeakMap,Wl=new WeakMap,Br=new WeakMap,em=new WeakMap,ri=new WeakMap,nm=new WeakMap,pe=new WeakMap,c0=new WeakSet,U2=function(e){const i=a(this,pe);let s=i[4],r=i[5];const o=[s,r,s,r];let l=s,c=r,u=s,h=r;const d=e?Math.max:Math.min,f=new Float32Array(4);for(let v=6,b=i.length;v<b;v+=6){const S=i[v+4],m=i[v+5];isNaN(i[v])?(K.pointBoundingBox(S,m,o),c>m?(l=S,c=m):c===m&&(l=d(l,S)),h<m?(u=S,h=m):h===m&&(u=d(u,S))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,K.bezierBoundingBox(s,r,...i.slice(v,v+6),f),K.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(l=f[0],c=f[1]):c===f[1]&&(l=d(l,f[0])),h<f[3]?(u=f[2],h=f[3]):h===f[3]&&(u=d(u,f[2]))),s=S,r=m}const p=a(this,Wl);p[0]=o[0]-a(this,Br),p[1]=o[1]-a(this,Br),p[2]=o[2]-o[0]+2*a(this,Br),p[3]=o[3]-o[1]+2*a(this,Br),this.firstPoint=[l,c],this.lastPoint=[u,h]};var im,sm,rm,ta,cs,kn,H2,Gg,$2,W2,Jb;class Zb{constructor(t,e=0,i=0,s=!0){x(this,kn);x(this,im);x(this,sm);x(this,rm);x(this,ta,[]);x(this,cs,[]);const r=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:m,width:y,height:w}of t){const C=Math.floor((S-e)/l)*l,E=Math.ceil((S+y+e)/l)*l,k=Math.floor((m-e)/l)*l,_=Math.ceil((m+w+e)/l)*l,P=[C,k,_,!0],D=[E,k,_,!1];a(this,ta).push(P,D),K.rectBoundingBox(C,k,E,_,r)}const c=r[2]-r[0]+2*i,u=r[3]-r[1]+2*i,h=r[0]-i,d=r[1]-i;let f=s?-1/0:1/0,p=1/0;const v=a(this,ta).at(s?-1:-2),b=[v[0],v[2]];for(const S of a(this,ta)){const[m,y,w,C]=S;!C&&s?y<p?(p=y,f=m):y===p&&(f=Math.max(f,m)):C&&!s&&(y<p?(p=y,f=m):y===p&&(f=Math.min(f,m))),S[0]=(m-h)/c,S[1]=(y-d)/u,S[2]=(w-d)/u}g(this,im,new Float32Array([h,d,c,u])),g(this,sm,[f,p]),g(this,rm,b)}getOutlines(){a(this,ta).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of a(this,ta))e[3]?(t.push(...A(this,kn,Jb).call(this,e)),A(this,kn,$2).call(this,e)):(A(this,kn,W2).call(this,e),t.push(...A(this,kn,Jb).call(this,e)));return A(this,kn,H2).call(this,t)}}im=new WeakMap,sm=new WeakMap,rm=new WeakMap,ta=new WeakMap,cs=new WeakMap,kn=new WeakSet,H2=function(t){const e=[],i=new Set;for(const o of t){const[l,c,u]=o;e.push([l,c,o],[l,u,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],u=e[o+1][2];c.push(u),u.push(c),i.add(c),i.add(u)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[l,c,u,h,d]=o;i.delete(o);let f=l,p=c;for(r=[l,u],s.push(r);;){let v;if(i.has(h))v=h;else if(i.has(d))v=d;else break;i.delete(v),[l,c,u,h,d]=v,f!==l&&(r.push(f,p,l,p===c?c:u),f=l),p=p===c?u:c}r.push(f,p)}return new Hj(s,a(this,im),a(this,sm),a(this,rm))},Gg=function(t){const e=a(this,cs);let i=0,s=e.length-1;for(;i<=s;){const r=i+s>>1,o=e[r][0];if(o===t)return r;o<t?i=r+1:s=r-1}return s+1},$2=function([,t,e]){const i=A(this,kn,Gg).call(this,t);a(this,cs).splice(i,0,[t,e])},W2=function([,t,e]){const i=A(this,kn,Gg).call(this,t);for(let s=i;s<a(this,cs).length;s++){const[r,o]=a(this,cs)[s];if(r!==t)break;if(r===t&&o===e){a(this,cs).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=a(this,cs)[s];if(r!==t)break;if(r===t&&o===e){a(this,cs).splice(s,1);return}}},Jb=function(t){const[e,i,s]=t,r=[[e,i,s]],o=A(this,kn,Gg).call(this,s);for(let l=0;l<o;l++){const[c,u]=a(this,cs)[l];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([e,u,p])}}}return r};var om,bh;class Hj extends X{constructor(e,i,s,r){super();x(this,om);x(this,bh);g(this,bh,e),g(this,om,i),this.firstPoint=s,this.lastPoint=r}toSVGPath(){const e=[];for(const i of a(this,bh)){let[s,r]=i;e.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const l=i[o],c=i[o+1];l===s?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),s=l)}e.push("Z")}return e.join(" ")}serialize([e,i,s,r],o){const l=[],c=s-e,u=r-i;for(const h of a(this,bh)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*c,d[f+1]=r-h[f+1]*u;l.push(d)}return l}get box(){return a(this,om)}get classNamesForOutlining(){return["highlightOutline"]}}om=new WeakMap,bh=new WeakMap;class t1 extends $y{newFreeDrawOutline(t,e,i,s,r,o){return new $j(t,e,i,s,r,o)}}class $j extends z2{newOutliner(t,e,i,s,r,o=0){return new t1(t,e,i,s,r,o)}}var xh,am,jr,Gl,lm,On,cm,um,Xl,oi,ai,Xe,Ah,Sh,dn,Ch,Oi,hm,dt,e1,Xg,G2,X2,Y2,n1,Oa,zi,Rc,K2,Yg,Kg,q2,Q2,Z2,J2,tM;const Ct=class Ct extends Ht{constructor(e){super({...e,name:"highlightEditor"});x(this,dt);x(this,xh,null);x(this,am,0);x(this,jr);x(this,Gl,null);x(this,lm,null);x(this,On,null);x(this,cm,null);x(this,um,0);x(this,Xl,null);x(this,oi,null);x(this,ai,null);x(this,Xe,!1);x(this,Ah,null);x(this,Sh,null);x(this,dn,null);x(this,Ch,"");x(this,Oi);x(this,hm,"");this.color=e.color||Ct._defaultColor,g(this,Oi,e.thickness||Ct._defaultThickness),this.opacity=e.opacity||Ct._defaultOpacity,g(this,jr,e.boxes||null),g(this,hm,e.methodOfCreation||""),g(this,Ch,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(g(this,Xe,!0),A(this,dt,Xg).call(this,e),A(this,dt,Oa).call(this)):a(this,jr)&&(g(this,xh,e.anchorNode),g(this,am,e.anchorOffset),g(this,cm,e.focusNode),g(this,um,e.focusOffset),A(this,dt,e1).call(this),A(this,dt,Oa).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=Ct.prototype;return ht(this,"_keyboardManager",new _m([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,Xe)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:a(this,Oi),methodOfCreation:a(this,hm)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var s;Ht.initialize(e,i),Ct._defaultColor||(Ct._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case vt.HIGHLIGHT_COLOR:Ct._defaultColor=i;break;case vt.HIGHLIGHT_THICKNESS:Ct._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return a(this,Sh)}get commentButtonPosition(){return a(this,Ah)}updateParams(e,i){switch(e){case vt.HIGHLIGHT_COLOR:A(this,dt,G2).call(this,i);break;case vt.HIGHLIGHT_THICKNESS:A(this,dt,X2).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[vt.HIGHLIGHT_COLOR,Ct._defaultColor],[vt.HIGHLIGHT_THICKNESS,Ct._defaultThickness]]}get propertiesToUpdate(){return[[vt.HIGHLIGHT_COLOR,this.color||Ct._defaultColor],[vt.HIGHLIGHT_THICKNESS,a(this,Oi)||Ct._defaultThickness],[vt.HIGHLIGHT_FREE,a(this,Xe)]]}onUpdatedColor(){var e,i;(e=this.parent)==null||e.drawLayer.updateProperties(a(this,ai),{root:{fill:this.color,"fill-opacity":this.opacity}}),(i=a(this,lm))==null||i.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",g(this,lm,new zy({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,dt,Kg).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,A(this,dt,Kg).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){A(this,dt,n1).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,dt,Oa).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?A(this,dt,n1).call(this):e&&(A(this,dt,Oa).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var r,o,l;const{drawLayer:i}=this.parent;let s;a(this,Xe)?(e=(e-this.rotation+360)%360,s=A(r=Ct,zi,Rc).call(r,a(this,oi).box,e)):s=A(o=Ct,zi,Rc).call(o,[this.x,this.y,this.width,this.height],e),i.updateProperties(a(this,ai),{bbox:s,root:{"data-main-rotation":e}}),i.updateProperties(a(this,dn),{bbox:A(l=Ct,zi,Rc).call(l,a(this,On).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,Ch)&&(e.setAttribute("aria-label",a(this,Ch)),e.setAttribute("role","mark")),a(this,Xe)?e.classList.add("free"):this.div.addEventListener("keydown",A(this,dt,K2).bind(this),{signal:this._uiManager._signal});const i=g(this,Xl,document.createElement("div"));return e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=a(this,Gl),this.setDims(),wP(this,a(this,Xl),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,dn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,dn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:A(this,dt,Yg).call(this,!0);break;case 1:case 3:A(this,dt,Yg).call(this,!1);break}}select(){var e;super.select(),a(this,dn)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,dn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,dn)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,dn),{rootClass:{selected:!1}}),a(this,Xe)||A(this,dt,Yg).call(this,!1))}get _mustFixPosition(){return!a(this,Xe)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,ai),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,dn),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:s,x:r,y:o}){const{x:l,y:c,width:u,height:h}=s.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=v=>{d.abort(),A(this,zi,J2).call(this,e,v)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",de,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Ki,{signal:f}),s.addEventListener("pointermove",A(this,zi,Z2).bind(this,e),{signal:f}),this._freeHighlight=new t1({x:r,y:o},[l,c,u,h],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,s){var b,S,m,y;let r=null;if(e instanceof _2){const{data:{quadPoints:w,rect:C,rotation:E,id:k,color:_,opacity:P,popupRef:D,richText:R,contentsObj:I,creationDate:V,modificationDate:Q},parent:{page:{pageNumber:q}}}=e;r=e={annotationType:ct.HIGHLIGHT,color:Array.from(_),opacity:P,quadPoints:w,boxes:null,pageIndex:q-1,rect:C.slice(0),rotation:E,annotationElementId:k,id:k,deleted:!1,popupRef:D,richText:R,comment:(I==null?void 0:I.str)||null,creationDate:V,modificationDate:Q}}else if(e instanceof eA){const{data:{inkLists:w,rect:C,rotation:E,id:k,color:_,borderStyle:{rawWidth:P},popupRef:D,richText:R,contentsObj:I,creationDate:V,modificationDate:Q},parent:{page:{pageNumber:q}}}=e;r=e={annotationType:ct.HIGHLIGHT,color:Array.from(_),thickness:P,inkLists:w,boxes:null,pageIndex:q-1,rect:C.slice(0),rotation:E,annotationElementId:k,id:k,deleted:!1,popupRef:D,richText:R,comment:(I==null?void 0:I.str)||null,creationDate:V,modificationDate:Q}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=e,h=await super.deserialize(e,i,s);h.color=K.makeHexColor(...o),h.opacity=u||1,c&&g(h,Oi,e.thickness),h._initialData=r,e.comment&&h.setCommentData(e);const[d,f]=h.pageDimensions,[p,v]=h.pageTranslation;if(l){const w=g(h,jr,[]);for(let C=0;C<l.length;C+=8)w.push({x:(l[C]-p)/d,y:1-(l[C+1]-v)/f,width:(l[C+2]-l[C])/d,height:(l[C+1]-l[C+5])/f});A(b=h,dt,e1).call(b),A(S=h,dt,Oa).call(S),h.rotate(h.rotation)}else if(c){g(h,Xe,!0);const w=c[0],C={x:w[0]-p,y:f-(w[1]-v)},E=new t1(C,[0,0,d,f],1,a(h,Oi)/2,!0,.001);for(let P=0,D=w.length;P<D;P+=2)C.x=w[P]-p,C.y=f-(w[P+1]-v),E.add(C);const{id:k,clipPathId:_}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);A(m=h,dt,Xg).call(m,{highlightOutlines:E.getOutlines(),highlightId:k,clipPathId:_}),A(y=h,dt,Oa).call(y),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=Ht._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:i,opacity:this.opacity,thickness:a(this,Oi),quadPoints:A(this,dt,q2).call(this),outlines:A(this,dt,Q2).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!A(this,dt,tM).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};xh=new WeakMap,am=new WeakMap,jr=new WeakMap,Gl=new WeakMap,lm=new WeakMap,On=new WeakMap,cm=new WeakMap,um=new WeakMap,Xl=new WeakMap,oi=new WeakMap,ai=new WeakMap,Xe=new WeakMap,Ah=new WeakMap,Sh=new WeakMap,dn=new WeakMap,Ch=new WeakMap,Oi=new WeakMap,hm=new WeakMap,dt=new WeakSet,e1=function(){const e=new Zb(a(this,jr),.001);g(this,oi,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,oi).box;const i=new Zb(a(this,jr),.0025,.001,this._uiManager.direction==="ltr");g(this,On,i.getOutlines());const{firstPoint:s}=a(this,oi);g(this,Ah,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:r}=a(this,On);g(this,Sh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Xg=function({highlightOutlines:e,highlightId:i,clipPathId:s}){var f,p;if(g(this,oi,e),g(this,On,e.getNewOutline(a(this,Oi)/2+1.5,.0025)),i>=0)g(this,ai,i),g(this,Gl,s),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),g(this,dn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,On).box,path:{d:a(this,On).toSVGPath()}},!0));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,ai),{bbox:A(f=Ct,zi,Rc).call(f,a(this,oi).box,(v-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,dn),{bbox:A(p=Ct,zi,Rc).call(p,a(this,On).box,v),path:{d:a(this,On).toSVGPath()}})}const[o,l,c,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[v,b]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*b/v,this.height=u*v/b;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[v,b]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*b/v,this.height=u*v/b;break}}const{firstPoint:h}=e;g(this,Ah,[(h[0]-o)/c,(h[1]-l)/u]);const{lastPoint:d}=a(this,On);g(this,Sh,[(d[0]-o)/c,(d[1]-l)/u])},G2=function(e){const i=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,e,Ct._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},X2=function(e){const i=a(this,Oi),s=r=>{g(this,Oi,r),A(this,dt,Y2).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},Y2=function(e){a(this,Xe)&&(A(this,dt,Xg).call(this,{highlightOutlines:a(this,oi).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},n1=function(){a(this,ai)===null||!this.parent||(this.parent.drawLayer.remove(a(this,ai)),g(this,ai,null),this.parent.drawLayer.remove(a(this,dn)),g(this,dn,null))},Oa=function(e=this.parent){a(this,ai)===null&&({id:Ce(this,ai)._,clipPathId:Ce(this,Gl)._}=e.drawLayer.draw({bbox:a(this,oi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:a(this,Xe)},path:{d:a(this,oi).toSVGPath()}},!1,!0),g(this,dn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,Xe)},bbox:a(this,On).box,path:{d:a(this,On).toSVGPath()}},a(this,Xe))),a(this,Xl)&&(a(this,Xl).style.clipPath=a(this,Gl)))},zi=new WeakSet,Rc=function([e,i,s,r],o){switch(o){case 90:return[1-i-r,e,r,s];case 180:return[1-e-s,1-i-r,s,r];case 270:return[i,1-e-s,r,s]}return[e,i,s,r]},K2=function(e){Ct._keyboardManager.exec(this,e)},Yg=function(e){if(!a(this,xh))return;const i=window.getSelection();e?i.setPosition(a(this,xh),a(this,am)):i.setPosition(a(this,cm),a(this,um))},Kg=function(){return a(this,Xe)?this.rotation:0},q2=function(){if(a(this,Xe))return null;const[e,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=a(this,jr),l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*e+s,v=(1-h)*i+r;l[c]=l[c+4]=p,l[c+1]=l[c+3]=v,l[c+2]=l[c+6]=p+d*e,l[c+5]=l[c+7]=v-f*i,c+=8}return l},Q2=function(e){return a(this,oi).serialize(e,A(this,dt,Kg).call(this))},Z2=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},J2=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},tM=function(e){const{color:i}=this._initialData;return this.hasEditedComment||e.color.some((s,r)=>s!==i[r])},x(Ct,zi),O(Ct,"_defaultColor",null),O(Ct,"_defaultOpacity",1),O(Ct,"_defaultThickness",12),O(Ct,"_type","highlight"),O(Ct,"_editorType",ct.HIGHLIGHT),O(Ct,"_freeHighlightId",-1),O(Ct,"_freeHighlight",null),O(Ct,"_freeHighlightClipId","");let Wy=Ct;var Yl;class eM{constructor(){x(this,Yl,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){a(this,Yl)[t]=e}toSVGProperties(){const t=a(this,Yl);return g(this,Yl,Object.create(null)),{root:t}}reset(){g(this,Yl,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){jt("Not implemented")}}Yl=new WeakMap;var li,Eh,Ie,Kl,ql,xt,i1,s1,r1,Ld,nM,qg,Nd,Lc;const yt=class yt extends Ht{constructor(e){super(e);x(this,xt);x(this,li,null);x(this,Eh);O(this,"_colorPicker",null);O(this,"_drawId",null);g(this,Eh,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(A(this,xt,i1).call(this,e),A(this,xt,Ld).call(this))}static _mergeSVGProperties(e,i){const s=new Set(Object.keys(e));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){jt("Not implemented")}static get typesMap(){jt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(a(yt,Ie).updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)e.push([s,i[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)e.push([s,i[r]]);return e}_updateProperty(e,i,s){const r=this._drawingOptions,o=r[i],l=c=>{var h;r.updateProperty(i,c);const u=a(this,li).updateProperty(i,c);u&&A(this,xt,Nd).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,yt._mergeSVGProperties(a(this,li).getPathResizingSVGProperties(A(this,xt,qg).call(this)),{bbox:A(this,xt,Lc).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,yt._mergeSVGProperties(a(this,li).getPathResizedSVGProperties(A(this,xt,qg).call(this)),{bbox:A(this,xt,Lc).call(this)}))}_onTranslating(e,i){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:A(this,xt,Lc).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,yt._mergeSVGProperties(a(this,li).getPathTranslatedSVGProperties(A(this,xt,qg).call(this),this.parentDimensions),{bbox:A(this,xt,Lc).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,Eh)&&(g(this,Eh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){A(this,xt,r1).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,xt,Ld).call(this),A(this,xt,Nd).call(this,a(this,li).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),A(this,xt,r1).call(this)):e&&(this._uiManager.addShouldRescale(this),A(this,xt,Ld).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,yt._mergeSVGProperties({bbox:A(this,xt,Lc).call(this)},a(this,li).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&A(this,xt,Nd).call(this,a(this,li).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,i;this._isCopy&&(e=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,i),s}static createDrawerInstance(e,i,s,r,o){jt("Not implemented")}static startDrawing(e,i,s,r){var S;const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=r;if(an.isInitializedAndDifferentPointerType(h))return;const{viewport:{rotation:d}}=e,{width:f,height:p}=o.getBoundingClientRect(),v=g(yt,Kl,new AbortController),b=e.combinedSignal(v);if(an.setPointer(h,u),window.addEventListener("pointerup",m=>{an.isSamePointerIdOrRemove(m.pointerId)&&this._endDraw(m)},{signal:b}),window.addEventListener("pointercancel",m=>{an.isSamePointerIdOrRemove(m.pointerId)&&this._currentParent.endDrawingSession()},{signal:b}),window.addEventListener("pointerdown",m=>{an.isSamePointerType(m.pointerType)&&(an.initializeAndAddPointerId(m.pointerId),a(yt,Ie).isCancellable()&&(a(yt,Ie).removeLastElement(),a(yt,Ie).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Ki,{signal:b}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),o.addEventListener("touchmove",m=>{an.isSameTimeStamp(m.timeStamp)&&de(m)},{signal:b}),e.toggleDrawing(),(S=i._editorUndoBar)==null||S.hide(),a(yt,Ie)){e.drawLayer.updateProperties(this._currentDrawId,a(yt,Ie).startNew(l,c,f,p,d));return}i.updateUIForDefaultProperties(this),g(yt,Ie,this.createDrawerInstance(l,c,f,p,d)),g(yt,ql,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(yt,ql).toSVGProperties(),a(yt,Ie).defaultSVGProperties),!0,!1)}static _drawMove(e){if(an.isSameTimeStamp(e.timeStamp),!a(yt,Ie))return;const{offsetX:i,offsetY:s,pointerId:r}=e;if(an.isSamePointerId(r)){if(an.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(yt,Ie).add(i,s)),an.setTimeStamp(e.timeStamp),de(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,g(yt,Ie,null),g(yt,ql,null),an.clearPointerType(),an.clearTimeStamp()),a(yt,Kl)&&(a(yt,Kl).abort(),g(yt,Kl,null),an.clearPointerIds())}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,a(yt,Ie).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=a(yt,Ie),r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:vt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(vt.DRAW_STEP),!a(yt,Ie).isEmpty()){const{pageDimensions:[s,r],scale:o}=i,l=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(yt,Ie).getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(yt,ql),mustBeCommitted:!e});return this._cleanup(!0),l}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,s,r,o,l){jt("Not implemented")}static async deserialize(e,i,s){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=i.viewport,u=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),h=await super.deserialize(e,i,s);return h.createDrawingOptions(e),A(d=h,xt,i1).call(d,{drawOutlines:u}),A(f=h,xt,Ld).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,li).serialize([i,s,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};li=new WeakMap,Eh=new WeakMap,Ie=new WeakMap,Kl=new WeakMap,ql=new WeakMap,xt=new WeakSet,i1=function({drawOutlines:e,drawId:i,drawingOptions:s}){g(this,li,e),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=A(this,xt,s1).call(this,e,this.parent),A(this,xt,Nd).call(this,e.box)},s1=function(e,i){const{id:s}=i.drawLayer.draw(yt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},r1=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Ld=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=A(this,xt,s1).call(this,a(this,li),e)}},nM=function([e,i,s,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[i,1-e,s*(l/o),r*(o/l)];case 180:return[1-e,1-i,s,r];case 270:return[1-i,e,s*(l/o),r*(o/l)];default:return[e,i,s,r]}},qg=function(){const{x:e,y:i,width:s,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-i,e,s*(o/l),r*(l/o)];case 180:return[1-e,1-i,s,r];case 270:return[i,1-e,s*(o/l),r*(l/o)];default:return[e,i,s,r]}},Nd=function(e){[this.x,this.y,this.width,this.height]=A(this,xt,nM).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Lc=function(){const{x:e,y:i,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-i-r,e,r,s];case 2:return[1-e-s,1-i-r,s,r];case 3:return[i,1-e-s,r,s];case 4:return[e,i-s*(c/u),r*(u/c),s*(c/u)];case 5:return[1-i,e,s*(c/u),r*(u/c)];case 6:return[1-e-r*(u/c),1-i,r*(u/c),s*(c/u)];case 7:return[i-s*(c/u),1-e-r*(u/c),s*(c/u),r*(u/c)];case 8:return[e-s,i-r,s,r];case 9:return[1-i,e-s,r,s];case 10:return[1-e,1-i,s,r];case 11:return[i-r,1-e,r,s];case 12:return[e-r*(u/c),i,r*(u/c),s*(c/u)];case 13:return[1-i-s*(c/u),e-r*(u/c),s*(c/u),r*(u/c)];case 14:return[1-e,1-i-s*(c/u),r*(u/c),s*(c/u)];case 15:return[i,1-e,s*(c/u),r*(u/c)];default:return[e,i,s,r]}},O(yt,"_currentDrawId",-1),O(yt,"_currentParent",null),x(yt,Ie,null),x(yt,Kl,null),x(yt,ql,null),O(yt,"_INNER_MARGIN",3);let Gy=yt;var Hs,Fe,Oe,Ql,Th,vn,Ye,Bi,Zl,Jl,tc,kh,Qg;class Wj{constructor(t,e,i,s,r,o){x(this,kh);x(this,Hs,new Float64Array(6));x(this,Fe);x(this,Oe);x(this,Ql);x(this,Th);x(this,vn);x(this,Ye,"");x(this,Bi,0);x(this,Zl,new Mm);x(this,Jl);x(this,tc);g(this,Jl,i),g(this,tc,s),g(this,Ql,r),g(this,Th,o),[t,e]=A(this,kh,Qg).call(this,t,e);const l=g(this,Fe,[NaN,NaN,NaN,NaN,t,e]);g(this,vn,[t,e]),g(this,Oe,[{line:l,points:a(this,vn)}]),a(this,Hs).set(l,0)}updateProperty(t,e){t==="stroke-width"&&g(this,Th,e)}isEmpty(){return!a(this,Oe)||a(this,Oe).length===0}isCancellable(){return a(this,vn).length<=10}add(t,e){[t,e]=A(this,kh,Qg).call(this,t,e);const[i,s,r,o]=a(this,Hs).subarray(2,6),l=t-r,c=e-o;return Math.hypot(a(this,Jl)*l,a(this,tc)*c)<=2?null:(a(this,vn).push(t,e),isNaN(i)?(a(this,Hs).set([r,o,t,e],2),a(this,Fe).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Hs)[0])&&a(this,Fe).splice(6,6),a(this,Hs).set([i,s,r,o,t,e],0),a(this,Fe).push(...X.createBezierPoints(i,s,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(a(this,vn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,s,r){g(this,Jl,i),g(this,tc,s),g(this,Ql,r),[t,e]=A(this,kh,Qg).call(this,t,e);const o=g(this,Fe,[NaN,NaN,NaN,NaN,t,e]);g(this,vn,[t,e]);const l=a(this,Oe).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,Oe).push({line:o,points:a(this,vn)}),a(this,Hs).set(o,0),g(this,Bi,0),this.toSVGPath(),null}getLastElement(){return a(this,Oe).at(-1)}setLastElement(t){return a(this,Oe)?(a(this,Oe).push(t),g(this,Fe,t.line),g(this,vn,t.points),g(this,Bi,0),{path:{d:this.toSVGPath()}}):a(this,Zl).setLastElement(t)}removeLastElement(){if(!a(this,Oe))return a(this,Zl).removeLastElement();a(this,Oe).pop(),g(this,Ye,"");for(let t=0,e=a(this,Oe).length;t<e;t++){const{line:i,points:s}=a(this,Oe)[t];g(this,Fe,i),g(this,vn,s),g(this,Bi,0),this.toSVGPath()}return{path:{d:a(this,Ye)}}}toSVGPath(){const t=X.svgRound(a(this,Fe)[4]),e=X.svgRound(a(this,Fe)[5]);if(a(this,vn).length===2)return g(this,Ye,`${a(this,Ye)} M ${t} ${e} Z`),a(this,Ye);if(a(this,vn).length<=6){const s=a(this,Ye).lastIndexOf("M");g(this,Ye,`${a(this,Ye).slice(0,s)} M ${t} ${e}`),g(this,Bi,6)}if(a(this,vn).length===4){const s=X.svgRound(a(this,Fe)[10]),r=X.svgRound(a(this,Fe)[11]);return g(this,Ye,`${a(this,Ye)} L ${s} ${r}`),g(this,Bi,12),a(this,Ye)}const i=[];a(this,Bi)===0&&(i.push(`M ${t} ${e}`),g(this,Bi,6));for(let s=a(this,Bi),r=a(this,Fe).length;s<r;s+=6){const[o,l,c,u,h,d]=a(this,Fe).slice(s,s+6).map(X.svgRound);i.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}return g(this,Ye,a(this,Ye)+i.join(" ")),g(this,Bi,a(this,Fe).length),a(this,Ye)}getOutlines(t,e,i,s){const r=a(this,Oe).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,Zl).build(a(this,Oe),t,e,i,a(this,Ql),a(this,Th),s),g(this,Hs,null),g(this,Fe,null),g(this,Oe,null),g(this,Ye,null),a(this,Zl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Hs=new WeakMap,Fe=new WeakMap,Oe=new WeakMap,Ql=new WeakMap,Th=new WeakMap,vn=new WeakMap,Ye=new WeakMap,Bi=new WeakMap,Zl=new WeakMap,Jl=new WeakMap,tc=new WeakMap,kh=new WeakSet,Qg=function(t,e){return X._normalizePoint(t,e,a(this,Jl),a(this,tc),a(this,Ql))};var wn,dm,fm,ci,$s,Ws,_h,Ph,ec,Ze,or,iM,sM,rM;class Mm extends X{constructor(){super(...arguments);x(this,Ze);x(this,wn);x(this,dm,0);x(this,fm);x(this,ci);x(this,$s);x(this,Ws);x(this,_h);x(this,Ph);x(this,ec)}build(e,i,s,r,o,l,c){g(this,$s,i),g(this,Ws,s),g(this,_h,r),g(this,Ph,o),g(this,ec,l),g(this,fm,c??0),g(this,ci,e),A(this,Ze,sM).call(this)}get thickness(){return a(this,ec)}setLastElement(e){return a(this,ci).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,ci).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of a(this,ci)){if(e.push(`M${X.svgRound(i[4])} ${X.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12&&isNaN(i[6])){e.push(`L${X.svgRound(i[10])} ${X.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,l,c,u,h,d]=i.subarray(s,s+6).map(X.svgRound);e.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,i,s,r],o){const l=[],c=[],[u,h,d,f]=A(this,Ze,iM).call(this);let p,v,b,S,m,y,w,C,E;switch(a(this,Ph)){case 0:E=X._rescale,p=e,v=i+r,b=s,S=-r,m=e+u*s,y=i+(1-h-f)*r,w=e+(u+d)*s,C=i+(1-h)*r;break;case 90:E=X._rescaleAndSwap,p=e,v=i,b=s,S=r,m=e+h*s,y=i+u*r,w=e+(h+f)*s,C=i+(u+d)*r;break;case 180:E=X._rescale,p=e+s,v=i,b=-s,S=r,m=e+(1-u-d)*s,y=i+h*r,w=e+(1-u)*s,C=i+(h+f)*r;break;case 270:E=X._rescaleAndSwap,p=e+s,v=i+r,b=-s,S=-r,m=e+(1-h-f)*s,y=i+(1-u-d)*r,w=e+(1-h)*s,C=i+(1-u)*r;break}for(const{line:k,points:_}of a(this,ci))l.push(E(k,p,v,b,S,o?new Array(k.length):null)),c.push(E(_,p,v,b,S,o?new Array(_.length):null));return{lines:l,points:c,rect:[m,y,w,C]}}static deserialize(e,i,s,r,o,{paths:{lines:l,points:c},rotation:u,thickness:h}){const d=[];let f,p,v,b,S;switch(u){case 0:S=X._rescale,f=-e/s,p=i/r+1,v=1/s,b=-1/r;break;case 90:S=X._rescaleAndSwap,f=-i/r,p=-e/s,v=1/r,b=1/s;break;case 180:S=X._rescale,f=e/s+1,p=-i/r,v=-1/s,b=1/r;break;case 270:S=X._rescaleAndSwap,f=i/r+1,p=e/s+1,v=-1/r,b=-1/s;break}if(!l){l=[];for(const y of c){const w=y.length;if(w===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(w===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const C=new Float32Array(3*(w-2));l.push(C);let[E,k,_,P]=y.subarray(0,4);C.set([NaN,NaN,NaN,NaN,E,k],0);for(let D=4;D<w;D+=2){const R=y[D],I=y[D+1];C.set(X.createBezierPoints(E,k,_,P,R,I),(D-2)*3),[E,k,_,P]=[_,P,R,I]}}}for(let y=0,w=l.length;y<w;y++)d.push({line:S(l[y].map(C=>C??NaN),f,p,v,b),points:S(c[y].map(C=>C??NaN),f,p,v,b)});const m=new this.prototype.constructor;return m.build(d,s,r,1,u,h,o),m}get box(){return a(this,wn)}updateProperty(e,i){return e==="stroke-width"?A(this,Ze,rM).call(this,i):null}updateParentDimensions([e,i],s){const[r,o]=A(this,Ze,or).call(this);g(this,$s,e),g(this,Ws,i),g(this,_h,s);const[l,c]=A(this,Ze,or).call(this),u=l-r,h=c-o,d=a(this,wn);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return g(this,dm,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,wn).map(X.svgRound).join(" ")}get defaultProperties(){const[e,i]=a(this,wn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${X.svgRound(e)} ${X.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=a(this,wn);let s=0,r=0,o=0,l=0,c=0,u=0;switch(a(this,dm)){case 90:r=i/e,o=-e/i,c=e;break;case 180:s=-1,l=-1,c=e,u=i;break;case 270:r=-i/e,o=e/i,u=i;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${X.svgRound(c)} ${X.svgRound(u)})`}getPathResizingSVGProperties([e,i,s,r]){const[o,l]=A(this,Ze,or).call(this),[c,u,h,d]=a(this,wn);if(Math.abs(h-o)<=X.PRECISION||Math.abs(d-l)<=X.PRECISION){const S=e+s/2-(c+h/2),m=i+r/2-(u+d/2);return{path:{"transform-origin":`${X.svgRound(e)} ${X.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${m})`}}}const f=(s-2*o)/(h-2*o),p=(r-2*l)/(d-2*l),v=h/s,b=d/r;return{path:{"transform-origin":`${X.svgRound(c)} ${X.svgRound(u)}`,transform:`${this.rotationTransform} scale(${v} ${b}) translate(${X.svgRound(o)} ${X.svgRound(l)}) scale(${f} ${p}) translate(${X.svgRound(-o)} ${X.svgRound(-l)})`}}}getPathResizedSVGProperties([e,i,s,r]){const[o,l]=A(this,Ze,or).call(this),c=a(this,wn),[u,h,d,f]=c;if(c[0]=e,c[1]=i,c[2]=s,c[3]=r,Math.abs(d-o)<=X.PRECISION||Math.abs(f-l)<=X.PRECISION){const m=e+s/2-(u+d/2),y=i+r/2-(h+f/2);for(const{line:w,points:C}of a(this,ci))X._translate(w,m,y,w),X._translate(C,m,y,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${X.svgRound(e)} ${X.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(s-2*o)/(d-2*o),v=(r-2*l)/(f-2*l),b=-p*(u+o)+e+o,S=-v*(h+l)+i+l;if(p!==1||v!==1||b!==0||S!==0)for(const{line:m,points:y}of a(this,ci))X._rescale(m,b,S,p,v,m),X._rescale(y,b,S,p,v,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${X.svgRound(e)} ${X.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],s){const[r,o]=s,l=a(this,wn),c=e-l[0],u=i-l[1];if(a(this,$s)===r&&a(this,Ws)===o)for(const{line:h,points:d}of a(this,ci))X._translate(h,c,u,h),X._translate(d,c,u,d);else{const h=a(this,$s)/r,d=a(this,Ws)/o;g(this,$s,r),g(this,Ws,o);for(const{line:f,points:p}of a(this,ci))X._rescale(f,c,u,h,d,f),X._rescale(p,c,u,h,d,p);l[2]*=h,l[3]*=d}return l[0]=e,l[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${X.svgRound(e)} ${X.svgRound(i)}`}}}get defaultSVGProperties(){const e=a(this,wn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${X.svgRound(e[0])} ${X.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}wn=new WeakMap,dm=new WeakMap,fm=new WeakMap,ci=new WeakMap,$s=new WeakMap,Ws=new WeakMap,_h=new WeakMap,Ph=new WeakMap,ec=new WeakMap,Ze=new WeakSet,or=function(e=a(this,ec)){const i=a(this,fm)+e/2*a(this,_h);return a(this,Ph)%180===0?[i/a(this,$s),i/a(this,Ws)]:[i/a(this,Ws),i/a(this,$s)]},iM=function(){const[e,i,s,r]=a(this,wn),[o,l]=A(this,Ze,or).call(this,0);return[e+o,i+l,s-2*o,r-2*l]},sM=function(){const e=g(this,wn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,ci)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6)K.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],l=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,p,v,b]=r.subarray(c,c+6);K.bezierBoundingBox(o,l,h,d,f,p,v,b,e),o=v,l=b}}const[i,s]=A(this,Ze,or).call(this);e[0]=An(e[0]-i,0,1),e[1]=An(e[1]-s,0,1),e[2]=An(e[2]+i,0,1),e[3]=An(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},rM=function(e){const[i,s]=A(this,Ze,or).call(this);g(this,ec,e);const[r,o]=A(this,Ze,or).call(this),[l,c]=[r-i,o-s],u=a(this,wn);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};class F0 extends eM{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Ht._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new F0(this._viewParameters);return t.updateAll(this),t}}var u0,oM;const nu=class nu extends Gy{constructor(e){super({...e,name:"inkEditor"});x(this,u0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,i){Ht.initialize(e,i),this._defaultDrawingOptions=new F0(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return ht(this,"typesMap",new Map([[vt.INK_THICKNESS,"stroke-width"],[vt.INK_COLOR,"stroke"],[vt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,s,r,o){return new Wj(e,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,s,r,o,l){return Mm.deserialize(e,i,s,r,o,l)}static async deserialize(e,i,s){let r=null;if(e instanceof eA){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:v,richText:b,contentsObj:S,creationDate:m,modificationDate:y},parent:{page:{pageNumber:w}}}=e;r=e={annotationType:ct.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:l},boxes:null,pageIndex:w-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:v,richText:b,comment:(S==null?void 0:S.str)||null,creationDate:m,modificationDate:y}}const o=await super.deserialize(e,i,s);return o._initialData=r,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Uy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return vt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:s}){this._drawingOptions=nu.getDefaultDrawingOptions({stroke:K.makeHexColor(...e),"stroke-width":i,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(e),{color:Ht._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:i,points:s}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!A(this,u0,oM).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}};u0=new WeakSet,oM=function(e){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==i[c])||e.thickness!==s||e.opacity!==r||e.pageIndex!==o},O(nu,"_type","ink"),O(nu,"_editorType",ct.INK),O(nu,"_defaultDrawingOptions",null);let o1=nu;class a1 extends Mm{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const og=8,ud=3;var nc,Et,l1,us,aM,lM,c1,Zg,cM,uM,hM,u1,h1,dM;class Wr{static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:s},r,o,l,c){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${i} ${s} ${d}px ${e}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:v,actualBoundingBoxAscent:b,actualBoundingBoxDescent:S,fontBoundingBoxAscent:m,fontBoundingBoxDescent:y,width:w}=h.measureText(t),C=1.5,E=Math.ceil(Math.max(Math.abs(p)+Math.abs(v)||0,w)*C),k=Math.ceil(Math.max(Math.abs(b)+Math.abs(S)||d,Math.abs(m)+Math.abs(y)||d)*C);u=new OffscreenCanvas(E,k),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,E,k),h.fillStyle="black",h.fillText(t,E*(C-1)/2,k*(3-C)/2);const _=A(this,Et,u1).call(this,h.getImageData(0,0,E,k).data),P=A(this,Et,hM).call(this,_),D=A(this,Et,h1).call(this,P),R=A(this,Et,c1).call(this,_,E,k,D);return this.processDrawnLines({lines:{curves:R,width:E,height:k},pageWidth:r,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,i,s,r){const[o,l,c]=A(this,Et,dM).call(this,t),[u,h]=A(this,Et,uM).call(this,o,l,c,Math.hypot(l,c)*a(this,nc).sigmaSFactor,a(this,nc).sigmaR,a(this,nc).kernelSize),d=A(this,Et,h1).call(this,h),f=A(this,Et,c1).call(this,u,l,c,d);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:e,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:o,areContours:l}){s%180!==0&&([e,i]=[i,e]);const{curves:c,width:u,height:h}=t,d=t.thickness??0,f=[],p=Math.min(e/u,i/h),v=p/e,b=p/i,S=[];for(const{points:y}of c){const w=o?A(this,Et,cM).call(this,y):y;if(!w)continue;S.push(w);const C=w.length,E=new Float32Array(C),k=new Float32Array(3*(C===2?2:C-2));if(f.push({line:k,points:E}),C===2){E[0]=w[0]*v,E[1]=w[1]*b,k.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[_,P,D,R]=w;_*=v,P*=b,D*=v,R*=b,E.set([_,P,D,R],0),k.set([NaN,NaN,NaN,NaN,_,P],0);for(let I=4;I<C;I+=2){const V=E[I]=w[I]*v,Q=E[I+1]=w[I+1]*b;k.set(X.createBezierPoints(_,P,D,R,V,Q),(I-2)*3),[_,P,D,R]=[D,R,V,Q]}}if(f.length===0)return null;const m=l?new a1:new Mm;return m.build(f,e,i,1,s,l?0:d,r),{outline:m,newCurves:S,areContours:l,thickness:d,width:u,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:s,height:r}){let o=1/0,l=-1/0,c=0;for(const w of t){c+=w.length;for(let C=2,E=w.length;C<E;C++){const k=w[C]-w[C-2];o=Math.min(o,k),l=Math.max(l,k)}}let u;o>=-128&&l<=127?u=Int8Array:o>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const h=t.length,d=og+ud*h,f=new Uint32Array(d);let p=0;f[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=s,f[p++]=r,f[p++]=e?0:1,f[p++]=Math.max(0,Math.floor(i??0)),f[p++]=h,f[p++]=u.BYTES_PER_ELEMENT;for(const w of t)f[p++]=w.length-2,f[p++]=w[0],f[p++]=w[1];const v=new CompressionStream("deflate-raw"),b=v.writable.getWriter();await b.ready,b.write(f);const S=u.prototype.constructor;for(const w of t){const C=new S(w.length-2);for(let E=2,k=w.length;E<k;E++)C[E-2]=w[E]-w[E-2];b.write(C)}b.close();const m=await new Response(v.readable).arrayBuffer(),y=new Uint8Array(m);return uP(y)}static async decompressSignature(t){try{const e=aB(t),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,l=0;for await(const w of i)o||(o=new Uint8Array(new Uint32Array(w.buffer,0,4)[0])),o.set(w,l),l+=w.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=c[2],d=c[3],f=c[4]===0,p=c[5],v=c[6],b=c[7],S=[],m=(og+ud*v)*Uint32Array.BYTES_PER_ELEMENT;let y;switch(b){case Int8Array.BYTES_PER_ELEMENT:y=new Int8Array(o.buffer,m);break;case Int16Array.BYTES_PER_ELEMENT:y=new Int16Array(o.buffer,m);break;case Int32Array.BYTES_PER_ELEMENT:y=new Int32Array(o.buffer,m);break}l=0;for(let w=0;w<v;w++){const C=c[ud*w+og],E=new Float32Array(C+2);S.push(E);for(let k=0;k<ud-1;k++)E[k]=c[ud*w+og+k+1];for(let k=0;k<C;k++)E[k+2]=E[k]+y[l++]}return{areContours:f,thickness:p,outlines:S,width:h,height:d}}catch(e){return at(`decompressSignature: ${e}`),null}}}nc=new WeakMap,Et=new WeakSet,l1=function(t,e,i,s){return i-=t,s-=e,i===0?s>0?0:4:i===1?s+6:2-s},us=new WeakMap,aM=function(t,e,i,s,r,o,l){const c=A(this,Et,l1).call(this,i,s,r,o);for(let u=0;u<8;u++){const h=(-u+c-l+16)%8,d=a(this,us)[2*h],f=a(this,us)[2*h+1];if(t[(i+d)*e+(s+f)]!==0)return h}return-1},lM=function(t,e,i,s,r,o,l){const c=A(this,Et,l1).call(this,i,s,r,o);for(let u=0;u<8;u++){const h=(u+c+l+16)%8,d=a(this,us)[2*h],f=a(this,us)[2*h+1];if(t[(i+d)*e+(s+f)]!==0)return h}return-1},c1=function(t,e,i,s){const r=t.length,o=new Int32Array(r);for(let h=0;h<r;h++)o[h]=t[h]<=s?1:0;for(let h=1;h<i-1;h++)o[h*e]=o[h*e+e-1]=0;for(let h=0;h<e;h++)o[h]=o[e*i-1-h]=0;let l=1,c;const u=[];for(let h=1;h<i-1;h++){c=1;for(let d=1;d<e-1;d++){const f=h*e+d,p=o[f];if(p===0)continue;let v=h,b=d;if(p===1&&o[f-1]===0)l+=1,b-=1;else if(p>=1&&o[f+1]===0)l+=1,b+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const S=[d,h],m=b===d+1,y={isHole:m,points:S,id:l,parent:0};u.push(y);let w;for(const I of u)if(I.id===c){w=I;break}w?w.isHole?y.parent=m?w.parent:c:y.parent=m?c:w.parent:y.parent=m?c:0;const C=A(this,Et,aM).call(this,o,e,h,d,v,b,0);if(C===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let E=a(this,us)[2*C],k=a(this,us)[2*C+1];const _=h+E,P=d+k;v=_,b=P;let D=h,R=d;for(;;){const I=A(this,Et,lM).call(this,o,e,D,R,v,b,1);E=a(this,us)[2*I],k=a(this,us)[2*I+1];const V=D+E,Q=R+k;S.push(Q,V);const q=D*e+R;if(o[q+1]===0?o[q]=-l:o[q]===1&&(o[q]=l),V===h&&Q===d&&D===_&&R===P){o[f]!==1&&(c=Math.abs(o[f]));break}else v=D,b=R,D=V,R=Q}}}return u},Zg=function(t,e,i,s){if(i-e<=4){for(let _=e;_<i-2;_+=2)s.push(t[_],t[_+1]);return}const r=t[e],o=t[e+1],l=t[i-4]-r,c=t[i-3]-o,u=Math.hypot(l,c),h=l/u,d=c/u,f=h*o-d*r,p=c/l,v=1/u,b=Math.atan(p),S=Math.cos(b),m=Math.sin(b),y=v*(Math.abs(S)+Math.abs(m)),w=v*(1-y+y**2),C=Math.max(Math.atan(Math.abs(m+S)*w),Math.atan(Math.abs(m-S)*w));let E=0,k=e;for(let _=e+2;_<i-2;_+=2){const P=Math.abs(f-h*t[_+1]+d*t[_]);P>E&&(k=_,E=P)}E>(u*C)**2?(A(this,Et,Zg).call(this,t,e,k+2,s),A(this,Et,Zg).call(this,t,k,i,s)):s.push(r,o)},cM=function(t){const e=[],i=t.length;return A(this,Et,Zg).call(this,t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e},uM=function(t,e,i,s,r,o){const l=new Float32Array(o**2),c=-2*s**2,u=o>>1;for(let b=0;b<o;b++){const S=(b-u)**2;for(let m=0;m<o;m++)l[b*o+m]=Math.exp((S+(m-u)**2)/c)}const h=new Float32Array(256),d=-2*r**2;for(let b=0;b<256;b++)h[b]=Math.exp(b**2/d);const f=t.length,p=new Uint8Array(f),v=new Uint32Array(256);for(let b=0;b<i;b++)for(let S=0;S<e;S++){const m=b*e+S,y=t[m];let w=0,C=0;for(let k=0;k<o;k++){const _=b+k-u;if(!(_<0||_>=i))for(let P=0;P<o;P++){const D=S+P-u;if(D<0||D>=e)continue;const R=t[_*e+D],I=l[k*o+P]*h[Math.abs(R-y)];w+=R*I,C+=I}}const E=p[m]=Math.round(w/C);v[E]++}return[p,v]},hM=function(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e},u1=function(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let s=-1/0,r=1/0;for(let l=0,c=i.length;l<c;l++){const u=i[l]=t[l<<2];s=Math.max(s,u),r=Math.min(r,u)}const o=255/(s-r);for(let l=0,c=i.length;l<c;l++)i[l]=(i[l]-r)*o;return i},h1=function(t){let e,i=-1/0,s=-1/0;const r=t.findIndex(c=>c!==0);let o=r,l=r;for(e=r;e<256;e++){const c=t[e];c>i&&(e-o>s&&(s=e-o,l=e-1),i=c,o=e)}for(e=l-1;e>=0&&!(t[e]>t[e+1]);e--);return e},dM=function(t){const e=t,{width:i,height:s}=t,{maxDim:r}=a(this,nc);let o=i,l=s;if(i>r||s>r){let f=i,p=s,v=Math.log2(Math.max(i,s)/r);const b=Math.floor(v);v=v===b?b-1:b;for(let m=0;m<v;m++){o=Math.ceil(f/2),l=Math.ceil(p/2);const y=new OffscreenCanvas(o,l);y.getContext("2d").drawImage(t,0,0,f,p,0,0,o,l),f=o,p=l,t!==e&&t.close(),t=y.transferToImageBitmap()}const S=Math.min(r/o,r/l);o=Math.round(o*S),l=Math.round(l*S)}const u=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,l),u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,o,l);const h=u.getImageData(0,0,o,l).data;return[A(this,Et,u1).call(this,h),o,l]},x(Wr,Et),x(Wr,nc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),x(Wr,us,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class nA extends eM{constructor(){super(),super.updateProperties({fill:Ht._defaultLineColor,"stroke-width":0})}clone(){const t=new nA;return t.updateAll(this),t}}class iA extends F0{constructor(t){super(t),super.updateProperties({stroke:Ht._defaultLineColor,"stroke-width":1})}clone(){const t=new iA(this._viewParameters);return t.updateAll(this),t}}var ea,Gs,na,ic;const Gn=class Gn extends Gy{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});x(this,ea,!1);x(this,Gs,null);x(this,na,null);x(this,ic,null);this._willKeepAspectRatio=!0,g(this,na,e.signatureData||null),g(this,Gs,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,i){Ht.initialize(e,i),this._defaultDrawingOptions=new nA,this._defaultDrawnSignatureOptions=new iA(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return ht(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,Gs)}}static computeTelemetryFinalData(e){const i=e.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,i=this.y),super.render(),this._drawId===null)if(a(this,na)){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:u,heightInPage:h}=a(this,na),{rawDims:{pageWidth:d,pageHeight:f},rotation:p}=this.parent.viewport,v=Wr.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:p,innerMargin:Gn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(v,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:a(this,Gs)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,i)),this.div}setUuid(e){g(this,ic,e),this.addEditToolbar()}getUuid(){return a(this,ic)}get description(){return a(this,Gs)}set description(e){g(this,Gs,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(i=>{i==null||i.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:i,thickness:s,width:r,height:o}=a(this,na),l=Math.max(r,o),c=Wr.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,i,s,r){const{x:o,y:l}=this,{outline:c}=g(this,na,e);g(this,ea,c instanceof a1),this.description=s;let u;a(this,ea)?u=Gn.getDefaultDrawingOptions():(u=Gn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,h]=this.pageDimensions;let d=i/h;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Wr.process(e,i,s,r,Gn._INNER_MARGIN)}getFromText(e,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return Wr.extractContoursFromText(e,i,s,r,o,Gn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Wr.processDrawnLines({lines:e,pageWidth:i,pageHeight:s,rotation:r,innerMargin:Gn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:i}){e?this._drawingOptions=Gn.getDefaultDrawingOptions():(this._drawingOptions=Gn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:a(this,ea),color:[0,0,0],thickness:a(this,ea)?0:r});return this.addComment(o),e?(o.paths={lines:i,points:s},o.uuid=a(this,ic),o.isCopy=!0):o.lines=i,a(this,Gs)&&(o.accessibilityData={type:"Figure",alt:a(this,Gs)}),o}static deserializeDraw(e,i,s,r,o,l){return l.areContours?a1.deserialize(e,i,s,r,o,l):Mm.deserialize(e,i,s,r,o,l)}static async deserialize(e,i,s){var o;const r=await super.deserialize(e,i,s);return g(r,ea,e.areContours),r.description=((o=e.accessibilityData)==null?void 0:o.alt)||"",g(r,ic,e.uuid),r}};ea=new WeakMap,Gs=new WeakMap,na=new WeakMap,ic=new WeakMap,O(Gn,"_type","signature"),O(Gn,"_editorType",ct.SIGNATURE),O(Gn,"_defaultDrawingOptions",null);let d1=Gn;var Kt,Be,ia,Vr,sa,Mh,zr,sc,Xs,ui,Dh,At,Id,Fd,Jg,ty,ey,p1,ny,fM;class f1 extends Ht{constructor(e){super({...e,name:"stampEditor"});x(this,At);x(this,Kt,null);x(this,Be,null);x(this,ia,null);x(this,Vr,null);x(this,sa,null);x(this,Mh,"");x(this,zr,null);x(this,sc,!1);x(this,Xs,null);x(this,ui,!1);x(this,Dh,!1);g(this,Vr,e.bitmapUrl),g(this,sa,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,i){Ht.initialize(e,i)}static isHandlingMimeForPasting(e){return Zw.includes(e)}static paste(e,i){i.pasteEditor({mode:ct.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;a(this,Be)&&(g(this,Kt,null),this._uiManager.imageManager.deleteId(a(this,Be)),(e=a(this,zr))==null||e.remove(),g(this,zr,null),a(this,Xs)&&(clearTimeout(a(this,Xs)),g(this,Xs,null))),super.remove()}rebuild(){if(!this.parent){a(this,Be)&&A(this,At,Jg).call(this);return}super.rebuild(),this.div!==null&&(a(this,Be)&&a(this,zr)===null&&A(this,At,Jg).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,ia)||a(this,Kt)||a(this,Vr)||a(this,sa)||a(this,Be)||a(this,sc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;return this._isCopy&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),a(this,sc)||(a(this,Kt)?A(this,At,ty).call(this):A(this,At,Jg).call(this)),this._isCopy&&this._moveAfterPaste(e,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(g(this,Be,s),r&&g(this,Kt,r),g(this,sc,!1),A(this,At,ty).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,Xs)!==null&&clearTimeout(a(this,Xs)),g(this,Xs,setTimeout(()=>{g(this,Xs,null),A(this,At,p1).call(this)},200))}copyCanvas(e,i,s=!1){e||(e=224);const{width:r,height:o}=a(this,Kt),l=new tr;let c=a(this,Kt),u=r,h=o,d=null;if(i){if(r>i||o>i){const _=Math.min(i/r,i/o);u=Math.floor(r*_),h=Math.floor(o*_)}d=document.createElement("canvas");const p=d.width=Math.ceil(u*l.sx),v=d.height=Math.ceil(h*l.sy);a(this,ui)||(c=A(this,At,ey).call(this,p,v));const b=d.getContext("2d");b.filter=this._uiManager.hcmFilter;let S="white",m="#cfcfd8";this._uiManager.hcmFilter!=="none"?m="black":fB.isDarkMode&&(S="#8f8f9d",m="#42414d");const y=15,w=y*l.sx,C=y*l.sy,E=new OffscreenCanvas(w*2,C*2),k=E.getContext("2d");k.fillStyle=S,k.fillRect(0,0,w*2,C*2),k.fillStyle=m,k.fillRect(0,0,w,C),k.fillRect(w,C,w,C),b.fillStyle=b.createPattern(E,"repeat"),b.fillRect(0,0,p,v),b.drawImage(c,0,0,c.width,c.height,0,0,p,v)}let f=null;if(s){let p,v;if(l.symmetric&&c.width<e&&c.height<e)p=c.width,v=c.height;else if(c=a(this,Kt),r>e||o>e){const m=Math.min(e/r,e/o);p=Math.floor(r*m),v=Math.floor(o*m),a(this,ui)||(c=A(this,At,ey).call(this,p,v))}const S=new OffscreenCanvas(p,v).getContext("2d",{willReadFrequently:!0});S.drawImage(c,0,0,c.width,c.height,0,0,p,v),f={width:p,height:v,data:S.getImageData(0,0,p,v).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(e,i,s){var S;let r=null,o=!1;if(e instanceof P2){const{data:{rect:m,rotation:y,id:w,structParent:C,popupRef:E,richText:k,contentsObj:_,creationDate:P,modificationDate:D},container:R,parent:{page:{pageNumber:I}},canvas:V}=e;let Q,q;V?(delete e.canvas,{id:Q,bitmap:q}=s.imageManager.getFromCanvas(R.id,V),V.remove()):(o=!0,e._hasNoCanvas=!0);const rt=((S=await i._structTree.getAriaAttributes(`${Qc}${w}`))==null?void 0:S.get("aria-label"))||"";r=e={annotationType:ct.STAMP,bitmapId:Q,bitmap:q,pageIndex:I-1,rect:m.slice(0),rotation:y,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:rt},isSvg:!1,structParent:C,popupRef:E,richText:k,comment:(_==null?void 0:_.str)||null,creationDate:P,modificationDate:D}}const l=await super.deserialize(e,i,s),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:p}=e;o?(s.addMissingCanvas(e.id,l),g(l,sc,!0)):d&&s.imageManager.isValidId(d)?(g(l,Be,d),u&&g(l,Kt,u)):g(l,Vr,h),g(l,ui,f);const[v,b]=l.pageDimensions;return l.width=(c[2]-c[0])/v,l.height=(c[3]-c[1])/b,p&&(l.altTextData=p),l._initialData=r,e.comment&&l.setCommentData(e),g(l,Dh,!!r),l}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:a(this,Be),isSvg:a(this,ui)});if(this.addComment(s),e)return s.bitmapUrl=A(this,At,ny).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=A(this,At,fM).call(this,s);return c.isSame?null:(c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||(i.stamps=new Map);const l=a(this,ui)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(a(this,Be)))i.stamps.set(a(this,Be),{area:l,serialized:s}),s.bitmap=A(this,At,ny).call(this,!1);else if(a(this,ui)){const c=i.stamps.get(a(this,Be));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,At,ny).call(this,!1))}return s}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Kt=new WeakMap,Be=new WeakMap,ia=new WeakMap,Vr=new WeakMap,sa=new WeakMap,Mh=new WeakMap,zr=new WeakMap,sc=new WeakMap,Xs=new WeakMap,ui=new WeakMap,Dh=new WeakMap,At=new WeakSet,Id=function(e,i=!1){if(!e){this.remove();return}g(this,Kt,e.bitmap),i||(g(this,Be,e.id),g(this,ui,e.isSvg)),e.file&&g(this,Mh,e.file.name),A(this,At,ty).call(this)},Fd=function(){if(g(this,ia,null),this._uiManager.enableWaiting(!1),!!a(this,zr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Kt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Kt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Jg=function(){if(a(this,Be)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,Be)).then(s=>A(this,At,Id).call(this,s,!0)).finally(()=>A(this,At,Fd).call(this));return}if(a(this,Vr)){const s=a(this,Vr);g(this,Vr,null),this._uiManager.enableWaiting(!0),g(this,ia,this._uiManager.imageManager.getFromUrl(s).then(r=>A(this,At,Id).call(this,r)).finally(()=>A(this,At,Fd).call(this)));return}if(a(this,sa)){const s=a(this,sa);g(this,sa,null),this._uiManager.enableWaiting(!0),g(this,ia,this._uiManager.imageManager.getFromFile(s).then(r=>A(this,At,Id).call(this,r)).finally(()=>A(this,At,Fd).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Zw.join(",");const i=this._uiManager._signal;g(this,ia,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,At,Id).call(this,r)}s()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>A(this,At,Fd).call(this))),e.click()},ty=function(){var u;const{div:e}=this;let{width:i,height:s}=a(this,Kt);const[r,o]=this.pageDimensions,l=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>l*r||s>l*o){const h=Math.min(l*r/i,l*o/s);i*=h,s*=h}this._uiManager.enableWaiting(!1);const c=g(this,zr,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=i/r,this.height=s/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),A(this,At,p1).call(this),a(this,Dh)||(this.parent.addUndoableEditor(this),g(this,Dh,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,Mh)&&this.div.setAttribute("aria-description",a(this,Mh)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},ey=function(e,i){const{width:s,height:r}=a(this,Kt);let o=s,l=r,c=a(this,Kt);for(;o>2*e||l>2*i;){const u=o,h=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*i&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,l),c=d.transferToImageBitmap()}return c},p1=function(){const[e,i]=this.parentDimensions,{width:s,height:r}=this,o=new tr,l=Math.ceil(s*e*o.sx),c=Math.ceil(r*i*o.sy),u=a(this,zr);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=a(this,ui)?a(this,Kt):A(this,At,ey).call(this,l,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,l,c)},ny=function(e){if(e){if(a(this,ui)){const r=this._uiManager.imageManager.getSvgUrl(a(this,Be));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=a(this,Kt),i.getContext("2d").drawImage(a(this,Kt),0,0),i.toDataURL()}if(a(this,ui)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*Ea.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Ea.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,Kt),0,0,a(this,Kt).width,a(this,Kt).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,Kt))},fM=function(e){var l;const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===i,o=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},O(f1,"_type","stamp"),O(f1,"_editorType",ct.STAMP);var rc,Rh,ra,oa,Ur,Bn,aa,Lh,Nh,hs,Hr,je,$r,la,Ih,J,ca,Bt,g1,pM,Cs,y1,v1,iy;const Ji=class Ji{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:h}){x(this,Bt);x(this,rc);x(this,Rh,!1);x(this,ra,null);x(this,oa,null);x(this,Ur,null);x(this,Bn,new Map);x(this,aa,!1);x(this,Lh,!1);x(this,Nh,!1);x(this,hs,null);x(this,Hr,null);x(this,je,null);x(this,$r,null);x(this,la,null);x(this,Ih,-1);x(this,J);const d=[...a(Ji,ca).values()];if(!Ji._initialized){Ji._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),g(this,J,t),this.pageIndex=e,this.div=i,g(this,rc,r),g(this,ra,o),this.viewport=u,g(this,je,c),this.drawLayer=l,this._structTree=s,a(this,J).addLayer(this)}get isEmpty(){return a(this,Bn).size===0}get isInvisible(){return this.isEmpty&&a(this,J).getMode()===ct.NONE}updateToolbar(t){a(this,J).updateToolbar(t)}updateMode(t=a(this,J).getMode()){switch(A(this,Bt,iy).call(this),t){case ct.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ct.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ct.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===ct.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of a(Ji,ca).values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,je))==null?void 0:e.div)}setEditingState(t){a(this,J).setEditingState(t)}addCommands(t){a(this,J).addCommands(t)}cleanUndoStack(t){a(this,J).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,ra))==null||e.togglePointerEvents(t)}async enable(){var i;g(this,Nh,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(i=a(this,la))==null||i.abort(),g(this,la,null);const t=new Set;for(const s of a(this,Bt,g1))s.enableEditing(),s.show(!0),s.annotationElementId&&(a(this,J).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=a(this,ra);if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),a(this,J).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}g(this,Nh,!1),a(this,J)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(g(this,Lh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),a(this,je)&&!a(this,la)){g(this,la,new AbortController);const r=a(this,J).combinedSignal(a(this,la));a(this,je).div.addEventListener("pointerdown",o=>{const{clientX:c,clientY:u,timeStamp:h}=o,d=a(this,Ih);if(h-d>500){g(this,Ih,h);return}g(this,Ih,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(c,u);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let v;const b=new RegExp(`^${xf}[0-9]+$`);for(const m of p)if(b.test(m.id)){v=m.id;break}if(!v)return;const S=a(this,Bn).get(v);(S==null?void 0:S.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),S.dblclick(o))},{signal:r,capture:!0})}const t=a(this,ra),e=[];if(t){const r=new Map,o=new Map;for(const c of a(this,Bt,g1)){if(c.disableEditing(),!c.annotationElementId){e.push(c);continue}if(c.serialize()!==null){r.set(c.annotationElementId,c);continue}else o.set(c.annotationElementId,c);(s=this.getEditableAnnotation(c.annotationElementId))==null||s.show(),c.remove()}const l=t.getEditableAnnotations();for(const c of l){const{id:u}=c.data;if(a(this,J).isDeletedAnnotationElement(u)){c.updateEdited({deleted:!0});continue}let h=o.get(u);if(h){h.resetAnnotationElement(c),h.show(!1),c.show();continue}h=r.get(u),h&&(a(this,J).addChangedExistingAnnotation(h),h.renderAnnotationElement(c)&&h.show(!1)),c.show()}}A(this,Bt,iy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of a(Ji,ca).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),g(this,Lh,!1)}getEditableAnnotation(t){var e;return((e=a(this,ra))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,J).getActive()!==t&&a(this,J).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,je))!=null&&t.div&&!a(this,$r)){g(this,$r,new AbortController);const e=a(this,J).combinedSignal(a(this,$r));a(this,je).div.addEventListener("pointerdown",A(this,Bt,pM).bind(this),{signal:e}),a(this,je).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,je))!=null&&t.div&&a(this,$r)&&(a(this,$r).abort(),g(this,$r,null),a(this,je).div.classList.remove("highlighting"))}enableClick(){if(a(this,oa))return;g(this,oa,new AbortController);const t=a(this,J).combinedSignal(a(this,oa));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,oa))==null||t.abort(),g(this,oa,null)}attach(t){a(this,Bn).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,J).isDeletedAnnotationElement(e)&&a(this,J).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,Bn).delete(t.id),(e=a(this,rc))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,Lh)&&t.annotationElementId&&a(this,J).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,J).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,J).addDeletedAnnotationElement(t.annotationElementId),Ht.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,J).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,Nh)),a(this,J).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,Ur)&&(t._focusEventsAllowed=!1,g(this,Ur,setTimeout(()=>{g(this,Ur,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,J)._signal}),e.focus())},0))),t._structTreeParentId=(i=a(this,rc))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of a(this,Bn).values())if(e.uid===t)return e;return null}getNextId(){return a(this,J).getId()}combinedSignal(t){return a(this,J).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,Bt,Cs))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await a(this,J).updateMode(t.mode);const{offsetX:i,offsetY:s}=A(this,Bt,v1).call(this),r=this.getNextId(),o=A(this,Bt,y1).call(this,{parent:this,id:r,x:i,y:s,uiManager:a(this,J),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=a(Ji,ca).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,J)))||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),r=A(this,Bt,y1).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:a(this,J),isCentered:e,...i});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(A(this,Bt,v1).call(this),!0,t)}setSelected(t){a(this,J).setSelected(t)}toggleSelected(t){a(this,J).toggleSelected(t)}unselect(t){a(this,J).unselect(t)}pointerup(t){var s;const{isMac:e}=en.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!a(this,aa)||(g(this,aa,!1),(s=a(this,Bt,Cs))!=null&&s.isDrawer&&a(this,Bt,Cs).supportMultipleDrawings))return;if(!a(this,Rh)){g(this,Rh,!0);return}const i=a(this,J).getMode();if(i===ct.STAMP||i===ct.SIGNATURE){a(this,J).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(a(this,J).getMode()===ct.HIGHLIGHT&&this.enableTextSelection(),a(this,aa)){g(this,aa,!1);return}const{isMac:e}=en.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(g(this,aa,!0),(s=a(this,Bt,Cs))!=null&&s.isDrawer){this.startDrawingSession(t);return}const i=a(this,J).getActive();g(this,Rh,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),a(this,hs)){a(this,Bt,Cs).startDrawing(this,a(this,J),!1,t);return}a(this,J).setCurrentDrawingSession(this),g(this,hs,new AbortController);const e=a(this,J).combinedSignal(a(this,hs));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(g(this,Hr,null),this.commitOrRemove())},{signal:e}),a(this,Bt,Cs).startDrawing(this,a(this,J),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&g(this,Hr,e);return}a(this,Hr)&&setTimeout(()=>{var e;(e=a(this,Hr))==null||e.focus(),g(this,Hr,null)},0)}endDrawingSession(t=!1){return a(this,hs)?(a(this,J).setCurrentDrawingSession(null),a(this,hs).abort(),g(this,hs,null),g(this,Hr,null),a(this,Bt,Cs).endDrawing(t)):null}findNewParent(t,e,i){const s=a(this,J).findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return a(this,hs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,hs)&&a(this,Bt,Cs).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,J).getActive())==null?void 0:t.parent)===this&&(a(this,J).commitOrRemove(),a(this,J).setActiveEditor(null)),a(this,Ur)&&(clearTimeout(a(this,Ur)),g(this,Ur,null));for(const i of a(this,Bn).values())(e=a(this,rc))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,a(this,Bn).clear(),a(this,J).removeLayer(this)}render({viewport:t}){this.viewport=t,gc(this.div,t);for(const e of a(this,J).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,J).commitOrRemove(),A(this,Bt,iy).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,gc(this.div,{rotation:i}),e!==i)for(const s of a(this,Bn).values())s.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,J).viewParameters.realScale}};rc=new WeakMap,Rh=new WeakMap,ra=new WeakMap,oa=new WeakMap,Ur=new WeakMap,Bn=new WeakMap,aa=new WeakMap,Lh=new WeakMap,Nh=new WeakMap,hs=new WeakMap,Hr=new WeakMap,je=new WeakMap,$r=new WeakMap,la=new WeakMap,Ih=new WeakMap,J=new WeakMap,ca=new WeakMap,Bt=new WeakSet,g1=function(){return a(this,Bn).size!==0?a(this,Bn).values():a(this,J).getEditors(this.pageIndex)},pM=function(t){a(this,J).unselectAll();const{target:e}=t;if(e===a(this,je).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,je).div.contains(e)){const{isMac:i}=en.platform;if(t.button!==0||t.ctrlKey&&i)return;a(this,J).showAllEditors("highlight",!0,!0),a(this,je).div.classList.add("free"),this.toggleDrawing(),Wy.startHighlighting(this,a(this,J).direction==="ltr",{target:a(this,je).div,x:t.x,y:t.y}),a(this,je).div.addEventListener("pointerup",()=>{a(this,je).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,J)._signal}),t.preventDefault()}},Cs=function(){return a(Ji,ca).get(a(this,J).getMode())},y1=function(t){const e=a(this,Bt,Cs);return e?new e.prototype.constructor(t):null},v1=function(){const{x:t,y:e,width:i,height:s}=this.boundingClientRect,r=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+i),c=Math.min(window.innerHeight,e+s),u=(r+l)/2-t,h=(o+c)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},iy=function(){for(const t of a(this,Bn).values())t.isEmpty()&&t.remove()},O(Ji,"_initialized",!1),x(Ji,ca,new Map([qb,o1,f1,Wy,d1].map(t=>[t._editorType,t])));let m1=Ji;var ds,bn,oc,pm,h0,mM,er,b1,gM,x1;const Te=class Te{constructor({pageIndex:t}){x(this,er);x(this,ds,null);x(this,bn,new Map);x(this,oc,new Map);this.pageIndex=t}setParent(t){if(!a(this,ds)){g(this,ds,t);return}if(a(this,ds)!==t){if(a(this,bn).size>0)for(const e of a(this,bn).values())e.remove(),t.append(e);g(this,ds,t)}}static get _svgFactory(){return ht(this,"_svgFactory",new Hy)}draw(t,e=!1,i=!1){const s=Ce(Te,pm)._++,r=A(this,er,b1).call(this),o=Te._svgFactory.createElement("defs");r.append(o);const l=Te._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,oc).set(s,l);const u=i?A(this,er,gM).call(this,o,c):null,h=Te._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,t),a(this,bn).set(s,r),{id:s,clipPathId:`url(#${u})`}}drawOutline(t,e){const i=Ce(Te,pm)._++,s=A(this,er,b1).call(this),r=Te._svgFactory.createElement("defs");s.append(r);const o=Te._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=Te._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${i}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=Te._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Te._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=Te._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,t),a(this,bn).set(i,s),i}finalizeDraw(t,e){a(this,oc).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:i,bbox:s,rootClass:r,path:o}=e,l=typeof t=="number"?a(this,bn).get(t):t;if(l){if(i&&A(this,er,x1).call(this,l,i),s&&A(c=Te,h0,mM).call(c,l,s),r){const{classList:u}=l;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=l.firstChild.firstChild;A(this,er,x1).call(this,h,o)}}}updateParent(t,e){if(e===this)return;const i=a(this,bn).get(t);i&&(a(e,ds).append(i),a(this,bn).delete(t),a(e,bn).set(t,i))}remove(t){a(this,oc).delete(t),a(this,ds)!==null&&(a(this,bn).get(t).remove(),a(this,bn).delete(t))}destroy(){g(this,ds,null);for(const t of a(this,bn).values())t.remove();a(this,bn).clear(),a(this,oc).clear()}};ds=new WeakMap,bn=new WeakMap,oc=new WeakMap,pm=new WeakMap,h0=new WeakSet,mM=function(t,[e,i,s,r]){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},er=new WeakSet,b1=function(){const t=Te._svgFactory.create(1,1,!0);return a(this,ds).append(t),t.setAttribute("aria-hidden",!0),t},gM=function(t,e){const i=Te._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=Te._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},x1=function(t,e){for(const[i,s]of Object.entries(e))s===null?t.removeAttribute(i):t.setAttribute(i,s)},x(Te,h0),x(Te,pm,0);let w1=Te;globalThis._pdfjsTestingUtils={HighlightOutliner:Zb};globalThis.pdfjsLib={AbortException:Ca,AnnotationEditorLayer:m1,AnnotationEditorParamsType:vt,AnnotationEditorType:ct,AnnotationEditorUIManager:yc,AnnotationLayer:Yb,AnnotationMode:vo,AnnotationType:we,applyOpacity:mB,build:Aj,ColorPicker:zy,createValidAbsoluteUrl:oP,CSSConstants:pB,DOMSVGFactory:Hy,DrawLayer:w1,FeatureTest:en,fetchData:Em,findContrastColor:gB,getDocument:p2,getFilenameFromUrl:lB,getPdfFilenameFromUrl:cB,getRGB:km,getUuid:cP,getXfaPageViewport:hB,GlobalWorkerOptions:Ks,ImageKind:Cg,InvalidPDFException:qw,isDataScheme:N0,isPdfFile:qx,isValidExplicitDest:TB,MathClamp:An,noContextMenu:Ki,normalizeUnicode:rB,OPS:Af,OutputScale:tr,PasswordResponses:qO,PDFDataRangeTransport:m2,PDFDateString:Iy,PDFWorker:Ef,PermissionFlag:KO,PixelsPerInch:Ea,RenderingCancelledException:Kx,renderRichText:dP,ResponseException:Ny,setLayerDimensions:gc,shadow:ht,SignatureExtractor:Wr,stopEvent:de,SupportedImageMimeTypes:Zw,TextLayer:Cf,TouchManager:Oy,updateUrlHash:aP,Util:K,VerbosityLevel:D0,version:xj,XfaLayer:hP};const Gj="/assets/pdf.worker.min-Cpi8b8z3.mjs";Ks.workerSrc=Gj;const Xj=async n=>{try{const t=await n.arrayBuffer(),e=await p2({data:t}).promise;let i="";for(let s=1;s<=e.numPages;s++){const l=(await(await e.getPage(s)).getTextContent()).items.map(c=>c.str).join(" ");i+=l+`

`}return i.trim()}catch(t){throw console.error("Error extracting PDF text:",t),new Error("Failed to extract text from PDF")}},Yj=async n=>{try{const t=await fetch("http://localhost:4000/api/extract-cv",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:n})});if(!t.ok)throw new Error(`Server error: ${t.status}`);return await t.json()}catch(t){throw console.error("CV extraction API error:",t),t}},Kj=async n=>{const t=await Xj(n);return await Yj(t)};function qj(){const[n,t]=z.useState(!1),[e,i]=z.useState(!1),s=z.useRef(null),{cvData:r,updateCVData:o,saveCVData:l,resetCVData:c,createNewCV:u,loadCVData:h,hasUnsavedChanges:d}=YO(),{t:f,translatedCV:p,setTranslatedCV:v}=yx(),b=p||r,S=()=>{const E=l();alert(E?"CV sauvegard avec succs!":"Erreur lors de la sauvegarde du CV.")},m=()=>{confirm("tes-vous sr de vouloir rinitialiser toutes les modifications?")&&(c(),alert("CV rinitialis aux valeurs par dfaut."))},y=()=>{n&&d?confirm("Vous avez des modifications non sauvegardes. Voulez-vous continuer?")&&t(!n):t(!n)},w=()=>{confirm("tes-vous sr de vouloir crer un nouveau CV vide? Toutes les donnes actuelles seront effaces.")&&(u(),t(!0))},C=async E=>{var _;const k=(_=E.target.files)==null?void 0:_[0];if(k){if(k.type!=="application/pdf"){alert("Veuillez slectionner un fichier PDF valide.");return}try{i(!0);const P=await Kj(k);h(P),t(!0),alert("CV extrait avec succs! Vous pouvez maintenant le modifier.")}catch(P){console.error("PDF processing error:",P),alert("Erreur lors de l'extraction du CV. Assurez-vous que le serveur est dmarr (npm run dev dans le dossier server).")}finally{i(!1),s.current&&(s.current.value="")}}};return e?T.jsx(rP,{}):T.jsx("div",{className:"App",children:n?T.jsx(GO,{data:b,onUpdate:o,onSave:S,onReset:m,onTogglePreview:y,isPreviewMode:!1}):T.jsxs("div",{className:"relative",children:[T.jsxs("div",{className:"no-print fixed top-6 left-6 z-50 flex gap-3",children:[T.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-white rounded-lg shadow-lg hover:bg-gray-900 transition-all duration-200 hover:scale-105",title:"Mode dition",children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),T.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"diter"]}),T.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg shadow-lg hover:bg-green-700 transition-all duration-200 hover:scale-105",title:"Nouveau CV",children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),T.jsx("polyline",{points:"14 2 14 8 20 8"}),T.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),T.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),"Nouveau CV"]}),T.jsxs("button",{onClick:()=>{var E;return(E=s.current)==null?void 0:E.click()},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg shadow-lg hover:bg-blue-700 transition-all duration-200 hover:scale-105",title:"Importer PDF",children:[T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),T.jsx("polyline",{points:"17 8 12 3 7 8"}),T.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),"Importer PDF"]}),T.jsx("input",{ref:s,type:"file",accept:"application/pdf",onChange:C,className:"hidden"})]}),T.jsx(HO,{data:b})]})})}Sk(document.getElementById("root")).render(T.jsx(z.StrictMode,{children:T.jsx(cL,{children:T.jsx(qj,{})})}));
